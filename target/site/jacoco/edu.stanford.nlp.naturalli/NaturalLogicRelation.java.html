<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>NaturalLogicRelation.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Stanford CoreNLP</a> &gt; <a href="index.source.html" class="el_package">edu.stanford.nlp.naturalli</a> &gt; <span class="el_source">NaturalLogicRelation.java</span></div><h1>NaturalLogicRelation.java</h1><pre class="source lang-java linenums">package edu.stanford.nlp.naturalli; 

import edu.stanford.nlp.util.Trilean;

import java.util.Collections;
import java.util.HashMap;
import java.util.Map;
import java.util.Optional;

/**
 * The catalog of the seven Natural Logic relations.
 * Set-theoretically, if we assume A and B are two sets (e.g., denotations),
 * and D is the universe of discourse,
 * then the relations between A and B are defined as follows:
 *
 * &lt;ul&gt;
 *   &lt;li&gt;Equivalence: A = B&lt;/li&gt;
 *   &lt;li&gt;Forward entailment: A \\subset B&lt;/li&gt;
 *   &lt;li&gt;Reverse entailment: A \\supset B&lt;/li&gt;
 *   &lt;li&gt;Negation: A \\intersect B = \\empty \\land A \\union B = D &lt;/li&gt;
 *   &lt;li&gt;Alternation: A \\intersect B = \\empty &lt;/li&gt;
 *   &lt;li&gt;Cover: A \\union B = D &lt;/li&gt;
 * &lt;/ul&gt;
 *
 * @author Gabor Angeli
 */
<span class="pc" id="L27">@SuppressWarnings(&quot;UnusedDeclaration&quot;)</span>
public enum NaturalLogicRelation {
<span class="fc" id="L29">  EQUIVALENT         (0, true,  false, true,  false),</span>
<span class="fc" id="L30">  FORWARD_ENTAILMENT (1, true,  false, false, false),</span>
<span class="fc" id="L31">  REVERSE_ENTAILMENT (2, false, false, true,  false),</span>
<span class="fc" id="L32">  NEGATION           (3, false, true,  false, true),</span>
<span class="fc" id="L33">  ALTERNATION        (4, false, true,  false, false),</span>
<span class="fc" id="L34">  COVER              (5, false, false, false, true),</span>
<span class="fc" id="L35">  INDEPENDENCE       (6, false, false, false, false),</span>
  ;

  /**
   * A fixed index for this relation, so that it can be serialized more efficiently.
   * DO NOT CHANGE THIS INDEX or you will break existing serialization, and probably a bunch of other stuff too.
   * Otherwise, the index is arbitrary.
   */
  public final int fixedIndex;
  /**
   * Determines whether this relation maintains the truth of a fact in a true context.
   * So, if the premise is true, and this relation is applied, the conclusion remains true.
   */
  public final boolean maintainsTruth;
  /**
   * Determines whether this relation negates the truth of a fact in a true context.
   * So, if the premise is true, and this relation is applied, the conclusion becomes false.
   */
  public final boolean negatesTruth;
  /**
   * Determines whether this relation maintains the falsehood of a false fact.
   * So, if the premise is false, and this relation is applied, the conclusion remains false.
   */
  public final boolean maintainsFalsehood;
  /**
   * Determines whether this relation negates the truth of a fact in a false context.
   * So, if the premise is false, and this relation is applied, the conclusion becomes true.
   */
  public final boolean negatesFalsehood;

<span class="fc" id="L65">  NaturalLogicRelation(int fixedIndex, boolean maintainsTruth, boolean negatesTruth, boolean maintainsFalsehood, boolean negatesFalsehood) {</span>
<span class="fc" id="L66">    this.fixedIndex = fixedIndex;</span>
<span class="fc" id="L67">    this.maintainsTruth = maintainsTruth;</span>
<span class="fc" id="L68">    this.negatesTruth = negatesTruth;</span>
<span class="fc" id="L69">    this.maintainsFalsehood = maintainsFalsehood;</span>
<span class="fc" id="L70">    this.negatesFalsehood = negatesFalsehood;</span>
<span class="fc" id="L71">  }</span>

  protected static NaturalLogicRelation byFixedIndex(int index) {
<span class="pc bpc" id="L74" title="1 of 8 branches missed.">    switch (index) {</span>
<span class="fc" id="L75">      case 0: return EQUIVALENT;</span>
<span class="fc" id="L76">      case 1: return FORWARD_ENTAILMENT;</span>
<span class="fc" id="L77">      case 2: return REVERSE_ENTAILMENT;</span>
<span class="fc" id="L78">      case 3: return NEGATION;</span>
<span class="fc" id="L79">      case 4: return ALTERNATION;</span>
<span class="fc" id="L80">      case 5: return COVER;</span>
<span class="fc" id="L81">      case 6: return INDEPENDENCE;</span>
<span class="nc" id="L82">      default: throw new IllegalArgumentException(&quot;Unknown index for Natural Logic relation: &quot; + index);</span>
    }
  }

  /**
   * The MacCartney &quot;join table&quot; -- this determines the transitivity of entailment if we chain two relations together.
   * These should already be projected up through the sentence, so that the relations being joined are relations between
   * &lt;i&gt;sentences&lt;/i&gt; rather than relations between &lt;i&gt;lexical items&lt;/i&gt; (see {@link Polarity#projectLexicalRelation(NaturalLogicRelation)},
   * set by {@link edu.stanford.nlp.naturalli.NaturalLogicAnnotator} using the {@link edu.stanford.nlp.naturalli.NaturalLogicAnnotations.PolarityAnnotation}).
   * @param other The relation to join this relation with.
   * @return The new joined relation.
   */
  public NaturalLogicRelation join(NaturalLogicRelation other) {
<span class="pc bpc" id="L95" title="1 of 8 branches missed.">    switch (this) {</span>
      case EQUIVALENT:
<span class="fc" id="L97">        return other;</span>
      case FORWARD_ENTAILMENT:
<span class="pc bpc" id="L99" title="3 of 4 branches missed.">        switch (other) {</span>
          case EQUIVALENT:
          case FORWARD_ENTAILMENT:
<span class="nc" id="L102">            return FORWARD_ENTAILMENT;</span>
          case NEGATION:
          case ALTERNATION:
<span class="nc" id="L105">            return COVER;</span>
          case REVERSE_ENTAILMENT:
          case COVER:
          case INDEPENDENCE:
<span class="fc" id="L109">            return INDEPENDENCE;</span>
        }
      case REVERSE_ENTAILMENT:
<span class="pc bpc" id="L112" title="3 of 4 branches missed.">        switch (other) {</span>
          case EQUIVALENT:
          case REVERSE_ENTAILMENT:
<span class="nc" id="L115">            return REVERSE_ENTAILMENT;</span>
          case NEGATION:
          case COVER:
<span class="nc" id="L118">            return COVER;</span>
          case FORWARD_ENTAILMENT:
          case ALTERNATION:
          case INDEPENDENCE:
<span class="fc" id="L122">            return INDEPENDENCE;</span>
        }
      case NEGATION:
<span class="pc bpc" id="L125" title="5 of 8 branches missed.">        switch (other) {</span>
          case EQUIVALENT:
<span class="nc" id="L127">            return NEGATION;</span>
          case FORWARD_ENTAILMENT:
<span class="fc" id="L129">            return COVER;</span>
          case REVERSE_ENTAILMENT:
<span class="nc" id="L131">            return ALTERNATION;</span>
          case NEGATION:
<span class="fc" id="L133">            return EQUIVALENT;</span>
          case ALTERNATION:
<span class="nc" id="L135">            return REVERSE_ENTAILMENT;</span>
          case COVER:
<span class="nc" id="L137">            return FORWARD_ENTAILMENT;</span>
          case INDEPENDENCE:
<span class="fc" id="L139">            return INDEPENDENCE;</span>
        }
      case ALTERNATION:
<span class="pc bpc" id="L142" title="2 of 4 branches missed.">        switch (other) {</span>
          case EQUIVALENT:
          case REVERSE_ENTAILMENT:
<span class="nc" id="L145">            return ALTERNATION;</span>
          case NEGATION:
          case COVER:
<span class="fc" id="L148">            return FORWARD_ENTAILMENT;</span>
          case FORWARD_ENTAILMENT:
          case ALTERNATION:
          case INDEPENDENCE:
<span class="fc" id="L152">            return INDEPENDENCE;</span>
        }
      case COVER:
<span class="pc bpc" id="L155" title="2 of 4 branches missed.">        switch (other) {</span>
          case EQUIVALENT:
          case FORWARD_ENTAILMENT:
<span class="nc" id="L158">            return COVER;</span>
          case NEGATION:
          case ALTERNATION:
<span class="fc" id="L161">            return REVERSE_ENTAILMENT;</span>
          case REVERSE_ENTAILMENT:
          case COVER:
          case INDEPENDENCE:
<span class="fc" id="L165">            return INDEPENDENCE;</span>
        }
      case INDEPENDENCE:
<span class="fc" id="L168">        return INDEPENDENCE;</span>
    }
<span class="nc" id="L170">    throw new IllegalStateException(&quot;[should be impossible]: Incomplete join table for &quot; + this + &quot; joined with &quot; + other);</span>
  }

  /**
   * Implements the finite state automata of composing the truth value of a sentence with a natural logic relation being
   * applied.
   * @param initialTruthValue The truth value of the premise (the original sentence).
   * @return The truth value of the consequent -- that is, the sentence once it's been modified with this relation.
   *         A value of {@link Trilean#UNKNOWN} indicates that natural logic cannot either confirm or disprove the truth
   *         of the consequent.
   */
  public Trilean applyToTruthValue(boolean initialTruthValue) {
<span class="nc bnc" id="L182" title="All 2 branches missed.">    if (initialTruthValue) {</span>
<span class="nc bnc" id="L183" title="All 2 branches missed.">      if (maintainsTruth) {</span>
<span class="nc" id="L184">        return Trilean.TRUE;</span>
<span class="nc bnc" id="L185" title="All 2 branches missed.">      } else if (negatesTruth) {</span>
<span class="nc" id="L186">        return Trilean.FALSE;</span>
      } else {
<span class="nc" id="L188">        return Trilean.UNKNOWN;</span>
      }
    } else {
<span class="nc bnc" id="L191" title="All 2 branches missed.">      if (maintainsFalsehood) {</span>
<span class="nc" id="L192">        return Trilean.FALSE;</span>
<span class="nc bnc" id="L193" title="All 2 branches missed.">      } else if (negatesFalsehood) {</span>
<span class="nc" id="L194">        return Trilean.TRUE;</span>
      } else {
<span class="nc" id="L196">        return Trilean.UNKNOWN;</span>
      }
    }
  }

<span class="fc" id="L201">  private static final Map&lt;String, NaturalLogicRelation&gt; insertArcToNaturalLogicRelation = Collections.unmodifiableMap(new HashMap&lt;String, NaturalLogicRelation&gt;() {{</span>
<span class="fc" id="L202">    put(&quot;acomp&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L203">    put(&quot;advcl&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L204">    put(&quot;acl&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L205">    put(&quot;advmod&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L206">    put(&quot;agent&quot;, NaturalLogicRelation.INDEPENDENCE);  //</span>
<span class="fc" id="L207">    put(&quot;amod&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L208">    put(&quot;appos&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L209">    put(&quot;aux&quot;, NaturalLogicRelation.INDEPENDENCE);  // he left -/-&gt; he should leave</span>
<span class="fc" id="L210">    put(&quot;auxpass&quot;, NaturalLogicRelation.INDEPENDENCE);  // some cat adopts -/-&gt; some cat got adopted</span>
<span class="fc" id="L211">    put(&quot;ccomp&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  // interesting project here... &quot;he said x&quot; -&gt; &quot;x&quot;?</span>
<span class="fc" id="L212">    put(&quot;cc&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  // match dep_conj</span>
<span class="fc" id="L213">    put(&quot;compound&quot;, NaturalLogicRelation.INDEPENDENCE);  //</span>
<span class="fc" id="L214">    put(&quot;name&quot;, NaturalLogicRelation.INDEPENDENCE);  //</span>
<span class="fc" id="L215">    put(&quot;mwe&quot;, NaturalLogicRelation.INDEPENDENCE);  //</span>
<span class="fc" id="L216">    put(&quot;conj:and\\/or&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L217">    put(&quot;conj:and&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L218">    put(&quot;conj:both&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L219">    put(&quot;conj:but&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L220">    put(&quot;conj:nor&quot;, NaturalLogicRelation.FORWARD_ENTAILMENT);  //</span>
<span class="fc" id="L221">    put(&quot;conj:or&quot;, NaturalLogicRelation.FORWARD_ENTAILMENT);  //</span>
<span class="fc" id="L222">    put(&quot;conj:plus&quot;, NaturalLogicRelation.FORWARD_ENTAILMENT);  //</span>
<span class="fc" id="L223">    put(&quot;conj&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  // match dep_cc</span>
<span class="fc" id="L224">    put(&quot;conj_x&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L225">    put(&quot;cop&quot;, NaturalLogicRelation.INDEPENDENCE);  //</span>
<span class="fc" id="L226">    put(&quot;csubj&quot;, NaturalLogicRelation.INDEPENDENCE);  // don't drop subjects.</span>
<span class="fc" id="L227">    put(&quot;csubjpass&quot;, NaturalLogicRelation.INDEPENDENCE);  // as above</span>
<span class="fc" id="L228">    put(&quot;dep&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  // allow cutting these off, else we just miss a bunch of sentences</span>
<span class="fc" id="L229">    put(&quot;det&quot;, NaturalLogicRelation.FORWARD_ENTAILMENT);  // todo(gabor) better treatment of generics?</span>
<span class="fc" id="L230">    put(&quot;discourse&quot;, NaturalLogicRelation.EQUIVALENT);  //</span>
<span class="fc" id="L231">    put(&quot;dobj&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  // but, &quot;he studied NLP at Stanford&quot; -&gt; &quot;he studied NLP&quot;</span>
<span class="fc" id="L232">    put(&quot;expl&quot;, NaturalLogicRelation.EQUIVALENT);  // though we shouldn't see this...</span>
<span class="fc" id="L233">    put(&quot;goeswith&quot;, NaturalLogicRelation.EQUIVALENT);  // also shouldn't see this</span>
<span class="fc" id="L234">    put(&quot;infmod&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  // deprecated into vmod</span>
<span class="fc" id="L235">    put(&quot;iobj&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  // she gave me a raise -&gt; she gave a raise</span>
<span class="fc" id="L236">    put(&quot;mark&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  // he says that you like to swim -&gt; he says you like to swim</span>
<span class="fc" id="L237">    put(&quot;mwe&quot;, NaturalLogicRelation.INDEPENDENCE);  // shouldn't see this</span>
<span class="fc" id="L238">    put(&quot;neg&quot;, NaturalLogicRelation.NEGATION);  //</span>
<span class="fc" id="L239">    put(&quot;nn&quot;, NaturalLogicRelation.INDEPENDENCE);  //</span>
<span class="fc" id="L240">    put(&quot;npadvmod&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  // &quot;9 months after his election, &lt;main clause&gt;&quot;</span>
<span class="fc" id="L241">    put(&quot;nsubj&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  // Note[gabor]: Only true for _duplicate_ nsubj relations. @see NaturalLogicWeights.</span>
<span class="fc" id="L242">    put(&quot;nsubjpass&quot;, NaturalLogicRelation.INDEPENDENCE);  //</span>
<span class="fc" id="L243">    put(&quot;number&quot;, NaturalLogicRelation.INDEPENDENCE);  //</span>
<span class="fc" id="L244">    put(&quot;num&quot;, NaturalLogicRelation.INDEPENDENCE);  // gets a bit too vague if we allow deleting this? &quot;he served three terms&quot; -?-&gt; &quot;he served terms&quot;</span>
<span class="fc" id="L245">    put(&quot;op&quot;, NaturalLogicRelation.INDEPENDENCE);  //</span>
<span class="fc" id="L246">    put(&quot;parataxis&quot;, NaturalLogicRelation.INDEPENDENCE);  // or, reverse?</span>
<span class="fc" id="L247">    put(&quot;partmod&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  // deprecated into vmod</span>
<span class="fc" id="L248">    put(&quot;pcomp&quot;, NaturalLogicRelation.INDEPENDENCE);  // though, not so in collapsed dependencies</span>
<span class="fc" id="L249">    put(&quot;pobj&quot;, NaturalLogicRelation.INDEPENDENCE);  // must delete whole preposition</span>
<span class="fc" id="L250">    put(&quot;possessive&quot;, NaturalLogicRelation.INDEPENDENCE);  // see dep_poss</span>
<span class="fc" id="L251">    put(&quot;poss&quot;, NaturalLogicRelation.FORWARD_ENTAILMENT);  //</span>
<span class="fc" id="L252">    put(&quot;nmod:poss&quot;, NaturalLogicRelation.FORWARD_ENTAILMENT);  //</span>
<span class="fc" id="L253">    put(&quot;preconj&quot;, NaturalLogicRelation.INDEPENDENCE);  // forbidden to see this</span>
<span class="fc" id="L254">    put(&quot;predet&quot;, NaturalLogicRelation.INDEPENDENCE);  // forbidden to see this</span>
<span class="fc" id="L255">    put(&quot;case&quot;, NaturalLogicRelation.INDEPENDENCE);  //</span>
<span class="fc" id="L256">    put(&quot;nmod:aboard&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L257">    put(&quot;nmod:about&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L258">    put(&quot;nmod:above&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L259">    put(&quot;nmod:according_to&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L260">    put(&quot;nmod:across_from&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L261">    put(&quot;nmod:across&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L262">    put(&quot;nmod:after&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L263">    put(&quot;nmod:against&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L264">    put(&quot;nmod:ahead_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L265">    put(&quot;nmod:along&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L266">    put(&quot;nmod:alongside_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L267">    put(&quot;nmod:alongside&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L268">    put(&quot;nmod:along_with&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L269">    put(&quot;nmod:amid&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L270">    put(&quot;nmod:among&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L271">    put(&quot;nmod:anti&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L272">    put(&quot;nmod:apart_from&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L273">    put(&quot;nmod:around&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L274">    put(&quot;nmod:as_for&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L275">    put(&quot;nmod:as_from&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L276">    put(&quot;nmod:aside_from&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L277">    put(&quot;nmod:as_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L278">    put(&quot;nmod:as_per&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L279">    put(&quot;nmod:as&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L280">    put(&quot;nmod:as_to&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L281">    put(&quot;nmod:at&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L282">    put(&quot;nmod:away_from&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L283">    put(&quot;nmod:based_on&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L284">    put(&quot;nmod:because_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L285">    put(&quot;nmod:before&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L286">    put(&quot;nmod:behind&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L287">    put(&quot;nmod:below&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L288">    put(&quot;nmod:beneath&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L289">    put(&quot;nmod:beside&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L290">    put(&quot;nmod:besides&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L291">    put(&quot;nmod:between&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L292">    put(&quot;nmod:beyond&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L293">    put(&quot;nmod:but&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L294">    put(&quot;nmod:by_means_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L295">    put(&quot;nmod:by&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L296">    put(&quot;nmod:depending_on&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L297">    put(&quot;nmod:dep&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L298">    put(&quot;nmod:despite&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L299">    put(&quot;nmod:down&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L300">    put(&quot;nmod:due_to&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L301">    put(&quot;nmod:during&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L302">    put(&quot;nmod:en&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L303">    put(&quot;nmod:except_for&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L304">    put(&quot;nmod:excepting&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L305">    put(&quot;nmod:except&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L306">    put(&quot;nmod:excluding&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L307">    put(&quot;nmod:exclusive_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L308">    put(&quot;nmod:followed_by&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L309">    put(&quot;nmod:following&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L310">    put(&quot;nmod:for&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L311">    put(&quot;nmod:from&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L312">    put(&quot;nmod:if&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L313">    put(&quot;nmod:in_accordance_with&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L314">    put(&quot;nmod:in_addition_to&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L315">    put(&quot;nmod:in_case_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L316">    put(&quot;nmod:including&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L317">    put(&quot;nmod:in_front_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L318">    put(&quot;nmod:in_lieu_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L319">    put(&quot;nmod:in_place_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L320">    put(&quot;nmod:in&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L321">    put(&quot;nmod:inside_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L322">    put(&quot;nmod:inside&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L323">    put(&quot;nmod:in_spite_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L324">    put(&quot;nmod:instead_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L325">    put(&quot;nmod:into&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L326">    put(&quot;nmod:irrespective_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L327">    put(&quot;nmod:like&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L328">    put(&quot;nmod:minus&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L329">    put(&quot;nmod:near&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L330">    put(&quot;nmod:near_to&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L331">    put(&quot;nmod:next_to&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L332">    put(&quot;nmod:off_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L333">    put(&quot;nmod:off&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L334">    put(&quot;nmod:of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L335">    put(&quot;nmod:on_account_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L336">    put(&quot;nmod:on_behalf_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L337">    put(&quot;nmod:on&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L338">    put(&quot;nmod:on_top_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L339">    put(&quot;nmod:onto&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L340">    put(&quot;nmod:opposite&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L341">    put(&quot;nmod:out_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L342">    put(&quot;nmod:out&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L343">    put(&quot;nmod:outside_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L344">    put(&quot;nmod:outside&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L345">    put(&quot;nmod:over&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L346">    put(&quot;nmod:owing_to&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L347">    put(&quot;nmod:past&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L348">    put(&quot;nmod:per&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L349">    put(&quot;nmod:plus&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L350">    put(&quot;nmod:preliminary_to&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L351">    put(&quot;nmod:preparatory_to&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L352">    put(&quot;nmod:previous_to&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L353">    put(&quot;nmod:prior_to&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L354">    put(&quot;nmod:pursuant_to&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L355">    put(&quot;nmod:regarding&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L356">    put(&quot;nmod:regardless_of&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L357">    put(&quot;nmod&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L358">    put(&quot;nmod:round&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L359">    put(&quot;nmod:save&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L360">    put(&quot;nmod:since&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L361">    put(&quot;nmod:subsequent_to&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L362">    put(&quot;nmod:such_as&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L363">    put(&quot;nmod:thanks_to&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L364">    put(&quot;nmod:than&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L365">    put(&quot;nmod:throughout&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L366">    put(&quot;nmod:through&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L367">    put(&quot;nmod:together_with&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L368">    put(&quot;nmod:to&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L369">    put(&quot;nmod:toward&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L370">    put(&quot;nmod:towards&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L371">    put(&quot;nmod:underneath&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L372">    put(&quot;nmod:under&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L373">    put(&quot;nmod:unlike&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L374">    put(&quot;nmod:until&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L375">    put(&quot;nmod:upon&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L376">    put(&quot;nmod:up&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L377">    put(&quot;nmod:versus&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L378">    put(&quot;nmod:via&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L379">    put(&quot;nmod:vs.&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L380">    put(&quot;nmod:whether&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L381">    put(&quot;nmod:within&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L382">    put(&quot;nmod:without&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L383">    put(&quot;nmod:with_regard_to&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L384">    put(&quot;nmod:with_respect_to&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L385">    put(&quot;nmod:with&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L386">    put(&quot;prt&quot;, NaturalLogicRelation.INDEPENDENCE);  //</span>
<span class="fc" id="L387">    put(&quot;punct&quot;, NaturalLogicRelation.EQUIVALENT);  //</span>
<span class="fc" id="L388">    put(&quot;purpcl&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  // deprecated into advmod</span>
<span class="fc" id="L389">    put(&quot;quantmod&quot;, NaturalLogicRelation.FORWARD_ENTAILMENT);  //</span>
<span class="fc" id="L390">    put(&quot;rcmod&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  // &quot;there are great tenors --rcmod--&gt; who are modest&quot;</span>
<span class="fc" id="L391">    put(&quot;root&quot;, NaturalLogicRelation.INDEPENDENCE);  // err.. never delete</span>
<span class="fc" id="L392">    put(&quot;tmod&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L393">    put(&quot;vmod&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L394">    put(&quot;xcomp&quot;, NaturalLogicRelation.REVERSE_ENTAILMENT);  //</span>
<span class="fc" id="L395">  }});</span>

  /**
   * Returns whether this is a known dependency arc.
   */
  public static boolean knownDependencyArc(String dependencyLabel) {
<span class="nc" id="L401">    return insertArcToNaturalLogicRelation.containsKey(dependencyLabel.toLowerCase());</span>
  }

  /**
   * Returns the natural logic relation corresponding to the given dependency arc being inserted into a sentence.
   */
  public static NaturalLogicRelation forDependencyInsertion(String dependencyLabel) {
<span class="fc" id="L408">    return forDependencyInsertion(dependencyLabel, true);</span>
  }

  /**
   * Returns the natural logic relation corresponding to the given dependency arc being inserted into a sentence.
   * @param dependencyLabel The label we are checking the relation for.
   * @param isSubject Whether this is on the subject side of a relation (e.g., for CONJ_OR edges)
   */
  public static NaturalLogicRelation forDependencyInsertion(String dependencyLabel, boolean isSubject) {
<span class="fc" id="L417">    return forDependencyInsertion(dependencyLabel, isSubject, Optional.empty());</span>
  }

  /**
   * Returns the natural logic relation corresponding to the given dependency arc being inserted into a sentence.
   * @param dependencyLabel The label we are checking the relation for.
   * @param isSubject Whether this is on the subject side of a relation (e.g., for CONJ_OR edges)
   * @param dependent The dependent word of the dependency label.
   */
  public static NaturalLogicRelation forDependencyInsertion(String dependencyLabel, boolean isSubject,
                                                            Optional&lt;String&gt; dependent) {
<span class="fc bfc" id="L428" title="All 2 branches covered.">    if (!isSubject) {</span>
<span class="pc bpc" id="L429" title="8 of 13 branches missed.">      switch (dependencyLabel) {</span>
        // 'or' in the object position behaves as and.
        case &quot;conj:or&quot;:
        case &quot;conj:nor&quot;:
<span class="fc" id="L433">          return forDependencyInsertion(&quot;conj:and&quot;, false);</span>
        case &quot;cc:preconj&quot;:
<span class="nc bnc" id="L435" title="All 4 branches missed.">          if (dependent.isPresent() &amp;&amp; &quot;neither&quot;.equalsIgnoreCase(dependent.get())) {</span>
<span class="nc" id="L436">            return INDEPENDENCE;</span>
          } else {
<span class="nc" id="L438">            return REVERSE_ENTAILMENT;</span>
          }
      }
    }
<span class="fc" id="L442">    NaturalLogicRelation rel = insertArcToNaturalLogicRelation.get(dependencyLabel.toLowerCase());</span>
<span class="pc bpc" id="L443" title="1 of 2 branches missed.">    if (rel != null) {</span>
<span class="fc" id="L444">      return rel;</span>
    } else {
//      log.info(&quot;Unknown dependency arc for NaturalLogicRelation: &quot; + dependencyLabel);
<span class="nc bnc" id="L447" title="All 2 branches missed.">      if (dependencyLabel.startsWith(&quot;nmod:&quot;)) {</span>
<span class="nc" id="L448">        return NaturalLogicRelation.REVERSE_ENTAILMENT;</span>
<span class="nc bnc" id="L449" title="All 2 branches missed.">      } else if (dependencyLabel.startsWith(&quot;conj&quot;)) {</span>
<span class="nc" id="L450">        return NaturalLogicRelation.REVERSE_ENTAILMENT;</span>
<span class="nc bnc" id="L451" title="All 2 branches missed.">      } else if (dependencyLabel.startsWith(&quot;advcl&quot;)) {</span>
<span class="nc" id="L452">        return NaturalLogicRelation.REVERSE_ENTAILMENT;</span>
      } else {
<span class="nc" id="L454">        return NaturalLogicRelation.INDEPENDENCE;</span>
      }
    }
  }

  private static NaturalLogicRelation insertionToDeletion(NaturalLogicRelation insertionRel) {
<span class="pc bpc" id="L460" title="6 of 8 branches missed.">    switch (insertionRel) {</span>
<span class="nc" id="L461">      case EQUIVALENT: return EQUIVALENT;</span>
<span class="fc" id="L462">      case FORWARD_ENTAILMENT: return REVERSE_ENTAILMENT;</span>
<span class="fc" id="L463">      case REVERSE_ENTAILMENT: return FORWARD_ENTAILMENT;</span>
<span class="nc" id="L464">      case NEGATION: return NEGATION;</span>
<span class="nc" id="L465">      case ALTERNATION: return COVER;</span>
<span class="nc" id="L466">      case COVER: return ALTERNATION;</span>
<span class="nc" id="L467">      case INDEPENDENCE: return INDEPENDENCE;</span>
      default:
<span class="nc" id="L469">        throw new IllegalStateException(&quot;Unhandled natural logic relation: &quot; + insertionRel);</span>
    }
  }

  /**
   * Returns the natural logic relation corresponding to the given dependency arc being deleted from a sentence.
   */
  public static NaturalLogicRelation forDependencyDeletion(String dependencyLabel) {
<span class="fc" id="L477">    return forDependencyDeletion(dependencyLabel, true);</span>
  }

  /**
   * Returns the natural logic relation corresponding to the given dependency arc being deleted from a sentence.
   * @param dependencyLabel The label we are checking the relation for
   * @param isSubject Whether this is on the subject side of a relation (e.g., for CONJ_OR edges)
   */
  public static NaturalLogicRelation forDependencyDeletion(String dependencyLabel, boolean isSubject) {
<span class="fc" id="L486">    NaturalLogicRelation rel = forDependencyInsertion(dependencyLabel, isSubject);</span>
<span class="fc" id="L487">    return insertionToDeletion(rel);</span>
  }

  /**
   * Returns the natural logic relation corresponding to the given dependency arc being deleted from a sentence.
   * @param dependencyLabel The label we are checking the relation for
   * @param isSubject Whether this is on the subject side of a relation (e.g., for CONJ_OR edges)
   * @param dependent The dependent word of the dependency label.
   */
  public static NaturalLogicRelation forDependencyDeletion(String dependencyLabel, boolean isSubject,
                                                           Optional&lt;String&gt; dependent) {
<span class="nc" id="L498">    NaturalLogicRelation rel = forDependencyInsertion(dependencyLabel, isSubject, dependent);</span>
<span class="nc" id="L499">    return insertionToDeletion(rel);</span>
  }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.8.201612092310</span></div></body></html>