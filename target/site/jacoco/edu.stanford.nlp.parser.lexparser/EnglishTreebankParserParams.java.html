<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>EnglishTreebankParserParams.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Stanford CoreNLP</a> &gt; <a href="index.source.html" class="el_package">edu.stanford.nlp.parser.lexparser</a> &gt; <span class="el_source">EnglishTreebankParserParams.java</span></div><h1>EnglishTreebankParserParams.java</h1><pre class="source lang-java linenums">// Stanford Parser -- a probabilistic lexicalized NL CFG parser
// Copyright (c) 2002 - 2014 The Board of Trustees of
// The Leland Stanford Junior University. All Rights Reserved.
//
// This program is free software; you can redistribute it and/or
// modify it under the terms of the GNU General Public License
// as published by the Free Software Foundation; either version 2
// of the License, or (at your option) any later version.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with this program; if not, write to the Free Software
// Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
//
// For more information, bug reports, fixes, contact:
//    Christopher Manning
//    Dept of Computer Science, Gates 1A
//    Stanford CA 94305-9010
//    USA
//    parser-support@lists.stanford.edu
//    http://nlp.stanford.edu/software/lex-parser.shtml

package edu.stanford.nlp.parser.lexparser; 
import edu.stanford.nlp.util.logging.Redwood;

import java.io.IOException;
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import java.util.function.Predicate;

import edu.stanford.nlp.io.RuntimeIOException;
import edu.stanford.nlp.ling.*;
import edu.stanford.nlp.trees.*;
import edu.stanford.nlp.util.Index;


/**
 * Parser parameters for the Penn English Treebank (WSJ, Brown, Switchboard).
 *
 * @author Roger Levy
 * @author Christopher Manning
 * @version 03/05/2003
 */

public class EnglishTreebankParserParams extends AbstractTreebankParserParams  {

  /** A logger for this class */
<span class="fc" id="L53">  private static Redwood.RedwoodChannels log = Redwood.channels(EnglishTreebankParserParams.class);</span>

<span class="nc" id="L55">  protected class EnglishSubcategoryStripper implements TreeTransformer {</span>

<span class="nc" id="L57">    protected TreeFactory tf = new LabeledScoredTreeFactory();</span>

    @Override
    public Tree transformTree(Tree tree) {
<span class="nc" id="L61">      Label lab = tree.label();</span>
<span class="nc" id="L62">      String s = lab.value();</span>
<span class="nc" id="L63">      String tag = null;</span>
<span class="nc bnc" id="L64" title="All 2 branches missed.">      if (lab instanceof HasTag) {</span>
<span class="nc" id="L65">        tag = ((HasTag) lab).tag();</span>
      }
<span class="nc bnc" id="L67" title="All 2 branches missed.">      if (tree.isLeaf()) {</span>
<span class="nc" id="L68">        Tree leaf = tf.newLeaf(lab);</span>
<span class="nc" id="L69">        leaf.setScore(tree.score());</span>
<span class="nc" id="L70">        return leaf;</span>
<span class="nc bnc" id="L71" title="All 2 branches missed.">      } else if (tree.isPhrasal()) {</span>
<span class="nc bnc" id="L72" title="All 4 branches missed.">        if (englishTest.retainADVSubcategories &amp;&amp; s.contains(&quot;-ADV&quot;)) {</span>
<span class="nc" id="L73">          s = tlp.basicCategory(s);</span>
<span class="nc" id="L74">          s += &quot;-ADV&quot;;</span>
<span class="nc bnc" id="L75" title="All 4 branches missed.">        } else if (englishTest.retainTMPSubcategories &amp;&amp; s.contains(&quot;-TMP&quot;)) {</span>
<span class="nc" id="L76">          s = tlp.basicCategory(s);</span>
<span class="nc" id="L77">          s += &quot;-TMP&quot;;</span>
<span class="nc bnc" id="L78" title="All 4 branches missed.">        } else if (englishTest.retainNPTMPSubcategories &amp;&amp; s.startsWith(&quot;NP-TMP&quot;)) {</span>
<span class="nc" id="L79">          s = &quot;NP-TMP&quot;;</span>
        } else {
<span class="nc" id="L81">          s = tlp.basicCategory(s);</span>
        }
        // remove the extra NPs inserted in the splitBaseNP == Collins option
<span class="nc bnc" id="L84" title="All 2 branches missed.">        if (englishTrain.splitBaseNP == 2 &amp;&amp;</span>
<span class="nc bnc" id="L85" title="All 2 branches missed.">            s.equals(&quot;NP&quot;)) {</span>
<span class="nc" id="L86">          Tree[] kids = tree.children();</span>
<span class="nc bnc" id="L87" title="All 2 branches missed.">          if (kids.length == 1 &amp;&amp;</span>
<span class="nc bnc" id="L88" title="All 2 branches missed.">              tlp.basicCategory(kids[0].value()).equals(&quot;NP&quot;)) {</span>
            // go through kidkids here so as to keep any annotation on me.
<span class="nc" id="L90">            List&lt;Tree&gt; kidkids = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L91" title="All 2 branches missed.">            for (int cNum = 0; cNum &lt; kids[0].children().length; cNum++) {</span>
<span class="nc" id="L92">              Tree child = kids[0].children()[cNum];</span>
<span class="nc" id="L93">              Tree newChild = transformTree(child);</span>
<span class="nc bnc" id="L94" title="All 2 branches missed.">              if (newChild != null) {</span>
<span class="nc" id="L95">                kidkids.add(newChild);</span>
              }
            }
<span class="nc" id="L98">            CategoryWordTag myLabel = new CategoryWordTag(lab);</span>
<span class="nc" id="L99">            myLabel.setCategory(s);</span>
<span class="nc" id="L100">            return tf.newTreeNode(myLabel, kidkids);</span>
          }
        }
        // remove the extra POSSPs inserted by restructurePossP
<span class="nc bnc" id="L104" title="All 2 branches missed.">        if (englishTrain.splitPoss == 2 &amp;&amp;</span>
<span class="nc bnc" id="L105" title="All 2 branches missed.">            s.equals(&quot;POSSP&quot;)) {</span>
<span class="nc" id="L106">          Tree[] kids = tree.children();</span>
<span class="nc" id="L107">          List&lt;Tree&gt; newkids = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L108" title="All 2 branches missed.">          for (int j = 0; j &lt; kids.length - 1; j++) {</span>
<span class="nc bnc" id="L109" title="All 2 branches missed.">            for (int cNum = 0; cNum &lt; kids[j].children().length; cNum++) {</span>
<span class="nc" id="L110">              Tree child = kids[0].children()[cNum];</span>
<span class="nc" id="L111">              Tree newChild = transformTree(child);</span>
<span class="nc bnc" id="L112" title="All 2 branches missed.">              if (newChild != null) {</span>
<span class="nc" id="L113">                newkids.add(newChild);</span>
              }
            }
          }
<span class="nc" id="L117">          Tree finalChild = transformTree(kids[kids.length - 1]);</span>
<span class="nc" id="L118">          newkids.add(finalChild);</span>
<span class="nc" id="L119">          CategoryWordTag myLabel = new CategoryWordTag(lab);</span>
<span class="nc" id="L120">          myLabel.setCategory(&quot;NP&quot;);</span>
<span class="nc" id="L121">          return tf.newTreeNode(myLabel, newkids);</span>
        }
      } else { // preterminal
<span class="nc" id="L124">        s = tlp.basicCategory(s);</span>
<span class="nc bnc" id="L125" title="All 2 branches missed.">        if (tag != null) {</span>
<span class="nc" id="L126">          tag = tlp.basicCategory(tag);</span>
        }
      }
<span class="nc" id="L129">      List&lt;Tree&gt; children = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L130" title="All 2 branches missed.">      for (int cNum = 0; cNum &lt; tree.numChildren(); cNum++) {</span>
<span class="nc" id="L131">        Tree child = tree.getChild(cNum);</span>
<span class="nc" id="L132">        Tree newChild = transformTree(child);</span>
<span class="nc bnc" id="L133" title="All 2 branches missed.">        if (newChild != null) {</span>
<span class="nc" id="L134">          children.add(newChild);</span>
        }
      }
<span class="nc bnc" id="L137" title="All 2 branches missed.">      if (children.isEmpty()) {</span>
<span class="nc" id="L138">        return null;</span>
      }
<span class="nc" id="L140">      CategoryWordTag newLabel = new CategoryWordTag(lab);</span>
<span class="nc" id="L141">      newLabel.setCategory(s);</span>
<span class="nc bnc" id="L142" title="All 2 branches missed.">      if (tag != null) {</span>
<span class="nc" id="L143">        newLabel.setTag(tag);</span>
      }
<span class="nc" id="L145">      Tree node = tf.newTreeNode(newLabel, children);</span>
<span class="nc" id="L146">      node.setScore(tree.score());</span>
<span class="nc" id="L147">      return node;</span>
    }

  } // end class EnglishSubcategoryStripper


  public EnglishTreebankParserParams() {
<span class="fc" id="L154">    super(new PennTreebankLanguagePack());</span>
<span class="fc" id="L155">    headFinder = new ModCollinsHeadFinder(tlp);</span>
<span class="fc" id="L156">  }</span>

  private HeadFinder headFinder;

<span class="fc" id="L160">  private EnglishTrain englishTrain = new EnglishTrain();</span>

<span class="fc" id="L162">  protected EnglishTest englishTest = new EnglishTest();</span>

  @Override
  public HeadFinder headFinder() {
<span class="fc" id="L166">    return headFinder;</span>
  }

  @Override
  public HeadFinder typedDependencyHeadFinder() {
<span class="nc bnc" id="L171" title="All 2 branches missed.">    if (generateOriginalDependencies) {</span>
<span class="nc bnc" id="L172" title="All 2 branches missed.">      return new SemanticHeadFinder(treebankLanguagePack(), !englishTest.makeCopulaHead);</span>
    } else {
<span class="nc bnc" id="L174" title="All 2 branches missed.">      return new UniversalSemanticHeadFinder(treebankLanguagePack(), !englishTest.makeCopulaHead);</span>
    }
  }


  /**
   * Allows you to read in trees from the source you want.  It's the
   * responsibility of treeReaderFactory() to deal properly with character-set
   * encoding of the input.  It also is the responsibility of tr to properly
   * normalize trees.
   */
  @Override
  public DiskTreebank diskTreebank() {
<span class="nc" id="L187">    return new DiskTreebank(treeReaderFactory());</span>
  }


  /**
   * Allows you to read in trees from the source you want.  It's the
   * responsibility of treeReaderFactory() to deal properly with character-set
   * encoding of the input.  It also is the responsibility of tr to properly
   * normalize trees.
   */
  @Override
  public MemoryTreebank memoryTreebank() {
<span class="fc" id="L199">    return new MemoryTreebank(treeReaderFactory());</span>
  }


  /**
   * Makes appropriate TreeReaderFactory with all options specified
   */
  @Override
  public TreeReaderFactory treeReaderFactory() {
<span class="pc bnc" id="L208" title="All 4 branches missed.">    return in -&gt; new PennTreeReader(in, new LabeledScoredTreeFactory(), new NPTmpRetainingTreeNormalizer(englishTrain.splitTMP, englishTrain.splitSGapped == 5, englishTrain.leaveItAll, englishTrain.splitNPADV &gt;= 1, headFinder()));</span>
  }


  /**
   * returns a MemoryTreebank appropriate to the testing treebank source
   */
  @Override
  public MemoryTreebank testMemoryTreebank() {
<span class="nc" id="L217">    return new MemoryTreebank(in -&gt; new PennTreeReader(in, new LabeledScoredTreeFactory(), new BobChrisTreeNormalizer(tlp)));</span>
  }

  /**
   * The tree transformer used to produce trees for evaluation.  It will
   * be applied both to the parser output and the gold tree.
   */
  @Override
  public TreeTransformer collinizer() {
<span class="nc bnc" id="L226" title="All 2 branches missed.">    return new TreeCollinizer(tlp, true, englishTrain.splitBaseNP == 2, englishTrain.collapseWhCategories);</span>
  }

  @Override
  public TreeTransformer collinizerEvalb() {
<span class="nc bnc" id="L231" title="All 2 branches missed.">    return new TreeCollinizer(tlp, true, englishTrain.splitBaseNP == 2, englishTrain.collapseWhCategories);</span>
  }

  /**
   * contains Treebank-specific (but not parser-specific) info such
   * as what is punctuation, and also information about the structure
   * of labels
   */
  @Override
  public TreebankLanguagePack treebankLanguagePack() {
<span class="fc" id="L241">    return tlp;</span>
  }

  @Override
  public Lexicon lex(Options op, Index&lt;String&gt; wordIndex, Index&lt;String&gt; tagIndex) {
<span class="nc bnc" id="L246" title="All 2 branches missed.">    if(op.lexOptions.uwModelTrainer == null) {</span>
      //use default unknown word model for English
<span class="nc" id="L248">      op.lexOptions.uwModelTrainer = &quot;edu.stanford.nlp.parser.lexparser.EnglishUnknownWordModelTrainer&quot;;</span>
    }
<span class="nc" id="L250">    return new BaseLexicon(op, wordIndex, tagIndex);</span>
  }


  // Automatically generated by SisterAnnotationStats -- preferably don't edit
<span class="fc" id="L255">  private static final String[] sisterSplit1 = {&quot;ADJP=l=VBD&quot;, &quot;ADJP=l=VBP&quot;, &quot;NP=r=RBR&quot;, &quot;PRN=r=.&quot;, &quot;ADVP=l=PP&quot;, &quot;PP=l=JJ&quot;, &quot;PP=r=NP&quot;, &quot;SBAR=l=VB&quot;, &quot;PP=l=VBG&quot;, &quot;ADJP=r=,&quot;, &quot;ADVP=r=.&quot;, &quot;ADJP=l=VB&quot;, &quot;FRAG=l=FRAG&quot;, &quot;FRAG=r=:&quot;, &quot;PP=r=,&quot;, &quot;ADJP=l=,&quot;, &quot;FRAG=r=FRAG&quot;, &quot;FRAG=l=:&quot;, &quot;PRN=r=VP&quot;, &quot;PP=l=RB&quot;, &quot;S=l=ADJP&quot;, &quot;SBAR=l=VBN&quot;, &quot;NP=r=NX&quot;, &quot;SBAR=l=VBZ&quot;, &quot;SBAR=l=ADVP&quot;, &quot;QP=r=JJ&quot;, &quot;SBAR=l=PP&quot;, &quot;SBAR=l=ADJP&quot;, &quot;NP=r=VBG&quot;, &quot;VP=r=:&quot;, &quot;VP=l=ADJP&quot;, &quot;SBAR=l=VBP&quot;, &quot;ADVP=r=NP&quot;, &quot;PP=l=VB&quot;, &quot;VP=r=PP&quot;, &quot;ADJP=r=SBAR&quot;, &quot;NP=r=JJR&quot;, &quot;SBAR=l=NN&quot;, &quot;S=l=RB&quot;, &quot;S=l=NNS&quot;, &quot;S=r=SBAR&quot;, &quot;S=l=WHPP&quot;, &quot;VP=l=:&quot;, &quot;ADVP=l=NP&quot;, &quot;ADVP=r=PP&quot;, &quot;ADJP=l=JJ&quot;, &quot;NP=r=VBN&quot;, &quot;NP=l=PRN&quot;, &quot;VP=r=S&quot;, &quot;NP=r=NNPS&quot;, &quot;NX=r=NX&quot;, &quot;ADJP=l=PRP$&quot;, &quot;SBAR=l=CC&quot;, &quot;SBAR=l=S&quot;, &quot;S=l=PRT&quot;, &quot;ADVP=l=VB&quot;, &quot;ADVP=r=JJ&quot;, &quot;NP=l=DT&quot;};</span>
<span class="fc" id="L256">  private static final String[] sisterSplit2 = {&quot;S=r=PP&quot;, &quot;NP=r=JJS&quot;, &quot;ADJP=r=NNP&quot;, &quot;NP=l=PRT&quot;, &quot;ADJP=r=PP&quot;, &quot;ADJP=l=VBZ&quot;, &quot;PP=r=VP&quot;, &quot;NP=r=CD&quot;, &quot;ADVP=l=IN&quot;, &quot;ADVP=l=,&quot;, &quot;ADJP=r=JJ&quot;, &quot;ADVP=l=VBD&quot;, &quot;PP=r=.&quot;, &quot;S=l=ADVP&quot;, &quot;S=l=DT&quot;, &quot;PP=l=NP&quot;, &quot;VP=l=PRN&quot;, &quot;NP=r=IN&quot;, &quot;NP=r=``&quot;};</span>
<span class="fc" id="L257">  private static final String[] sisterSplit3 = {&quot;PP=l=VBD&quot;, &quot;ADJP=r=NNS&quot;, &quot;S=l=:&quot;, &quot;NP=l=ADVP&quot;, &quot;NP=r=PRN&quot;, &quot;NP=r=-RRB-&quot;, &quot;NP=l=-LRB-&quot;, &quot;NP=l=JJ&quot;, &quot;SBAR=r=.&quot;, &quot;S=r=:&quot;, &quot;ADVP=r=VP&quot;, &quot;NP=l=RB&quot;, &quot;NP=r=RB&quot;, &quot;S=l=VBP&quot;, &quot;SBAR=r=,&quot;, &quot;VP=r=,&quot;, &quot;PP=r=PP&quot;, &quot;NP=r=S&quot;, &quot;ADJP=l=NP&quot;, &quot;VP=l=VBG&quot;, &quot;PP=l=PP&quot;};</span>
<span class="fc" id="L258">  private static final String[] sisterSplit4 = {&quot;VP=l=NP&quot;, &quot;NP=r=NN&quot;, &quot;NP=r=VP&quot;, &quot;VP=r=.&quot;, &quot;NP=r=PP&quot;, &quot;VP=l=TO&quot;, &quot;VP=l=MD&quot;, &quot;NP=r=,&quot;, &quot;NP=r=NP&quot;, &quot;NP=r=.&quot;, &quot;NP=l=IN&quot;, &quot;NP=l=NP&quot;, &quot;VP=l=,&quot;, &quot;VP=l=S&quot;, &quot;NP=l=,&quot;, &quot;VP=l=VBZ&quot;, &quot;S=r=.&quot;, &quot;NP=r=NNS&quot;, &quot;S=l=IN&quot;, &quot;NP=r=JJ&quot;, &quot;NP=r=NNP&quot;, &quot;VP=l=VBD&quot;, &quot;S=l=WHNP&quot;, &quot;VP=r=NP&quot;, &quot;VP=l=''&quot;, &quot;VP=l=VBP&quot;, &quot;NP=l=:&quot;, &quot;S=r=,&quot;, &quot;VP=l=``&quot;, &quot;VP=l=VB&quot;, &quot;NP=l=S&quot;, &quot;NP=l=VP&quot;, &quot;NP=l=VB&quot;, &quot;NP=l=VBD&quot;, &quot;NP=r=SBAR&quot;, &quot;NP=r=:&quot;, &quot;VP=l=PP&quot;, &quot;NP=l=VBZ&quot;, &quot;NP=l=CC&quot;, &quot;NP=l=''&quot;, &quot;S=r=NP&quot;, &quot;S=r=S&quot;, &quot;S=l=VBN&quot;, &quot;NP=l=``&quot;, &quot;ADJP=r=NN&quot;, &quot;S=r=VP&quot;, &quot;NP=r=CC&quot;, &quot;VP=l=RB&quot;, &quot;S=l=S&quot;, &quot;S=l=NP&quot;, &quot;NP=l=TO&quot;, &quot;S=l=,&quot;, &quot;S=l=VBD&quot;, &quot;S=r=''&quot;, &quot;S=l=``&quot;, &quot;S=r=CC&quot;, &quot;PP=l=,&quot;, &quot;S=l=CC&quot;, &quot;VP=l=CC&quot;, &quot;ADJP=l=DT&quot;, &quot;NP=l=VBG&quot;, &quot;VP=r=''&quot;, &quot;SBAR=l=NP&quot;, &quot;VP=l=VP&quot;, &quot;NP=l=PP&quot;, &quot;S=l=VB&quot;, &quot;SBAR=l=VBD&quot;, &quot;VP=l=ADVP&quot;, &quot;VP=l=VBN&quot;, &quot;NP=r=''&quot;, &quot;VP=l=SBAR&quot;, &quot;SBAR=l=,&quot;, &quot;S=l=WHADVP&quot;, &quot;VP=r=VP&quot;, &quot;NP=r=ADVP&quot;, &quot;QP=r=NNS&quot;, &quot;NP=l=VBP&quot;, &quot;S=l=VBZ&quot;, &quot;NP=l=VBN&quot;, &quot;S=l=PP&quot;, &quot;VP=r=CC&quot;, &quot;NP=l=SBAR&quot;, &quot;SBAR=r=NP&quot;, &quot;S=l=VBG&quot;, &quot;SBAR=r=VP&quot;, &quot;NP=r=ADJP&quot;, &quot;S=l=JJ&quot;, &quot;S=l=NN&quot;, &quot;QP=r=NN&quot;};</span>

  @Override
  public String[] sisterSplitters() {
<span class="nc bnc" id="L262" title="All 5 branches missed.">    switch (englishTrain.sisterSplitLevel) {</span>
      case 1:
<span class="nc" id="L264">        return sisterSplit1;</span>
      case 2:
<span class="nc" id="L266">        return sisterSplit2;</span>
      case 3:
<span class="nc" id="L268">        return sisterSplit3;</span>
      case 4:
<span class="nc" id="L270">        return sisterSplit4;</span>
      default:
<span class="nc" id="L272">        return new String[0];</span>
    }
  }

  /**
   * Returns a TreeTransformer appropriate to the Treebank which
   * can be used to remove functional tags (such as &quot;-TMP&quot;) from
   * categories.
   */
  @Override
  public TreeTransformer subcategoryStripper() {
<span class="nc" id="L283">    return new EnglishSubcategoryStripper();</span>
  }


  public static class EnglishTest implements Serializable {
    /* THESE OPTIONS ARE ENGLISH-SPECIFIC AND AFFECT ONLY TEST TIME */
<span class="fc" id="L289">    EnglishTest() {}</span>
<span class="fc" id="L290">    boolean retainNPTMPSubcategories = false;</span>
<span class="fc" id="L291">    boolean retainTMPSubcategories = false;</span>
<span class="fc" id="L292">    boolean retainADVSubcategories = false;</span>

<span class="fc" id="L294">    boolean makeCopulaHead = false;</span>

    private static final long serialVersionUID = 183157656745674521L;

  }


  public static class EnglishTrain implements Serializable {
    /* THESE OPTIONS ARE ENGLISH-SPECIFIC AND AFFECT ONLY TRAIN TIME */
<span class="fc" id="L303">    EnglishTrain() {}</span>

    /**
     * if true, leave all PTB (functional tag) annotations (bad)
     */
<span class="fc" id="L308">    public int leaveItAll = 0;</span>

    /**
     * Annotate prepositions into subcategories.  Values:
     * 0 = no annotation
     * 1 = IN with a ^S.* parent (putative subordinating
     * conjunctions) marked differently from others (real prepositions). OK.
     * 2 = Annotate IN prepositions 3 ways: ^S.* parent, ^N.* parent or rest
     * (generally predicative ADJP, VP). Better than sIN=1.  Good.
     * 3 = Annotate prepositions 6 ways: real feature engineering. Great.
     * 4 = Refinement of 3: allows -SC under SINV, WHADVP for -T and no -SCC
     *     if the parent is an NP.
     * 5 = Like 4 but maps TO to IN in a &quot;nominal&quot; (N*, P*, A*) context.
     * 6 = 4, but mark V/A complement and leave noun ones unmarked instead.
     */
<span class="fc" id="L323">    public int splitIN = 0;</span>

    /** Mark quote marks for single vs. double so don't get mismatched ones.
     */
<span class="fc" id="L327">    public boolean splitQuotes = false;</span>

    /** Separate out sentence final punct. (. ! ?).  Doesn't help.
     */
<span class="fc" id="L331">    public boolean splitSFP = false;</span>

    /**
     * Mark the nouns that are percent signs.  Slightly good.
     */
<span class="fc" id="L336">    public boolean splitPercent = false;</span>

    /**
     * Mark phrases that are headed by %.
     * A value of 0 = do nothing, 1 = only NP, 2 = NP and ADJP,
     * 3 = NP, ADJP and QP, 4 = any phrase.
     */
<span class="fc" id="L343">    public int splitNPpercent = 0;</span>

    /** Grand parent annotate RB to try to distinguish sentential ones and
     *  ones in places like NP post modifier (things like 'very' are already
     *  distinguished as their parent is ADJP).
     */
<span class="fc" id="L349">    public boolean tagRBGPA = false;</span>

    /** Mark NNP words as to position in phrase (single, left, right, inside)
     *  or subcategorizes NNP(S) as initials or initial/final in NP.
     */
<span class="fc" id="L354">    public int splitNNP = 0;</span>

    /**
     * Join pound with dollar.
     */
<span class="fc" id="L359">    public boolean joinPound = false;</span>

    /**
     * Joint comparative and superlative adjective with positive.
     */
<span class="fc" id="L364">    public boolean joinJJ = false;</span>

    /**
     * Join proper nouns with common nouns. This isn't to improve
     * performance, but because Genia doesn't use proper noun tags in
     * general.
     */
<span class="fc" id="L371">    public boolean joinNounTags = false;</span>

    /**
     * A special test for &quot;such&quot; mainly (&quot;such as Fred&quot;). A wash, so omit
     */
<span class="fc" id="L376">    public boolean splitPPJJ = false;</span>

    /**
     * Put a special tag on 'transitive adjectives' with NP complement, like
     * 'due May 15' -- it also catches 'such' in 'such as NP', which may
     * be a good.  Matches 658 times in 2-21 training corpus. Wash.
     */
<span class="fc" id="L383">    public boolean splitTRJJ = false;</span>

    /**
     * Put a special tag on 'adjectives with complements'.  This acts as a
     * general subcat feature for adjectives.
     */
<span class="fc" id="L389">    public boolean splitJJCOMP = false;</span>

    /**
     * Specially mark the comparative/superlative words: less, least,
     * more, most
     */
<span class="fc" id="L395">    public boolean splitMoreLess = false;</span>

    /**
     * Mark &quot;Intransitive&quot; DT.  Good.
     */
<span class="fc" id="L400">    public boolean unaryDT = false;//true;</span>
    /**
     * Mark &quot;Intransitive&quot; RB.  Good.
     */
<span class="fc" id="L404">    public boolean unaryRB = false;//true;</span>
    /**
     * &quot;Intransitive&quot; PRP. Wash -- basically a no-op really.
     */
<span class="fc" id="L408">    public boolean unaryPRP = false;</span>
    /**
     * Mark reflexive PRP words.
     */
<span class="fc" id="L412">    public boolean markReflexivePRP = false;</span>
    /**
     * Mark &quot;Intransitive&quot; IN. Minutely negative.
     */
<span class="fc" id="L416">    public boolean unaryIN = false;</span>

    /** Provide annotation of conjunctions.  Gives modest gains (numbers
     *  shown F1 increase with respect to goodPCFG in June 2005).  A value of
     *  1 annotates both &quot;and&quot; and &quot;or&quot; as &quot;CC-C&quot; (+0.29%),
     *  2 annotates &quot;but&quot; and &quot;&amp;amp;&quot; separately (+0.17%),
     *  3 annotates just &quot;and&quot; (equalsIgnoreCase) (+0.11%),
     *  0 annotates nothing (+0.00%).
     */
<span class="fc" id="L425">    public int splitCC = 0;</span>

    /**
     * Annotates forms of &quot;not&quot; specially as tag &quot;NOT&quot;. BAD
     */
<span class="fc" id="L430">    public boolean splitNOT = false;</span>
    /**
     * Split modifier (NP, AdjP) adverbs from others.
     * This does nothing if you're already doing tagPA.
     */
<span class="fc" id="L435">    public boolean splitRB = false;</span>

    /**
     * Make special tags for forms of BE and HAVE (and maybe DO/HELP, etc.).
     * A value of 0 is do nothing.
     * A value of 1 is the basic form.  Positive PCFG effect,
     *   but neutral to negative in Factored, and impossible if you use gPA.
     * A value of 2 adds in &quot;s&quot; = &quot;'s&quot;
     * and delves further to disambiguate &quot;'s&quot; as BE or HAVE.  Theoretically
     * good, but no practical gains.
     * A value of 3 adds DO.
     * A value of 4 adds HELP (which also takes VB form complement) as DO.
     * A value of 5 adds LET (which also takes VB form complement) as DO.
     * A value of 6 adds MAKE (which also takes VB form complement) as DO.
     * A value of 7 adds WATCH, SEE (which also take VB form complement) as DO.
     * A value of 8 adds come, go, but not inflections (which colloquially
     *   can take a VB form complement) as DO.
     * A value of 9 adds GET as BE.
     * Differences are small. You get about 0.3 F1 by doing something; the best
     * appear to be 2 or 3 for sentence exact and 7 or 8 for LP/LR F1.
     */
<span class="fc" id="L456">    public int splitAux = 0;</span>

    /**
     * Pitiful attempt at marking V* preterms with their surface subcat
     * frames.  Bad so far.
     */
<span class="fc" id="L462">    public boolean vpSubCat = false;</span>
    /**
     * Attempt to record ditransitive verbs.  The value 0 means do nothing;
     * 1 records two or more NP or S* arguments, and 2 means to only record
     * two or more NP arguments (that aren't NP-TMP).
     * 1 gave neutral to bad results.
     */
<span class="fc" id="L469">    public int markDitransV = 0;</span>

    /**
     * Add (head) tags to VPs.  An argument of
     * 0 = no head-subcategorization of VPs,
     * 1 = add head tags (anything, as given by HeadFinder),
     * 2 = add head tags, but collapse finite verb tags (VBP, VBD, VBZ, MD)
     *     together,
     * 3 = only annotate verbal tags, and collapse finite verb tags
     *     (annotation is VBF, TO, VBG, VBN, VB, or zero),
     * 4 = only split on categories of VBF, TO, VBG, VBN, VB, and map
     *     cases that are not headed by a verbal category to an appropriate
     *     category based on word suffix (ing, d, t, s, to) or to VB otherwise.
     * We usually use a value of 3; 2 or 3 is much better than 0.
     * See also &lt;code&gt;splitVPNPAgr&lt;/code&gt;. If it is true, its effects override
     * any value set for this parameter.
     */
<span class="fc" id="L486">    public int splitVP = 0;</span>

    /**
     * Put enough marking on VP and NP to permit &quot;agreement&quot;.
     */
<span class="fc" id="L491">    public boolean splitVPNPAgr = false;</span>

    /**
     * Mark S/SINV/SQ nodes according to verbal tag.  Meanings are:
     * 0 = no subcategorization.
     * 1 = mark with head tag
     * 2 = mark only -VBF if VBZ/VBD/VBP/MD tag
     * 3 = as 2 and mark -VBNF if TO/VBG/VBN/VB
     * 4 = as 2 but only mark S not SINV/SQ
     * 5 = as 3 but only mark S not SINV/SQ
     * Previously seen as bad.  Option 4 might be promising now.
     */
<span class="fc" id="L503">    public int splitSTag = 0;</span>

<span class="fc" id="L505">    public boolean markContainedVP = false;</span>

<span class="fc" id="L507">    public boolean splitNPPRP = false;</span>

    /**
     * Verbal distance -- mark whether symbol dominates a verb (V*, MD).
     * Very good.
     */
<span class="fc" id="L513">    public int dominatesV = 0;</span>

    /**
     * Verbal distance -- mark whether symbol dominates a preposition (IN)
     */
<span class="fc" id="L518">    public boolean dominatesI = false;</span>

    /**
     * Verbal distance -- mark whether symbol dominates a conjunction (CC)
     */
<span class="fc" id="L523">    public boolean dominatesC = false;</span>

    /**
     * Mark phrases which are conjunctions.
     * 0 = No marking
     * 1 = Any phrase with a CC daughter that isn't first or last.  Possibly marginally positive.
     * 2 = As 0 but also a non-marginal CONJP daughter.  In principle good, but no gains.
     * 3 = More like Charniak.  Not yet implemented.  Need to annotate _before_ annotate children!
     *     np or vp with two or more np/vp children, a comma, cc or conjp, and nothing else.
     */
<span class="fc" id="L533">    public int markCC = 0;</span>

    /**
     * Mark specially S nodes with &quot;gapped&quot; subject (control, raising).
     * 1 is basic version.  2 is better mark S nodes with &quot;gapped&quot; subject.
     * 3 seems best on small training set, but all of these are too similar;
     * 4 can't be differentiated.
     * 5 is done on tree before empty splitting. (Bad!?)
     */
<span class="fc" id="L542">    public int splitSGapped = 0;</span>

    /**
     * Mark &quot;numeric NPs&quot;.  Probably bad?
     */
<span class="fc" id="L547">    public boolean splitNumNP = false;</span>

    /**
     * Give a special tag to NPs which are possessive NPs (end in 's).
     * A value of 0 means do nothing, 1 means tagging possessive NPs with
     * &quot;-P&quot;, 2 means restructure possessive NPs so that they introduce a
     * POSSP node that
     * takes as children the POS and a regularly structured NP.
     * I.e., recover standard good linguistic practice circa 1985.
     * This seems a good idea, but is almost a no-op (modulo fine points of
     * markovization), since the previous NP-P phrase already uniquely
     * captured what is now a POSSP.
     */
<span class="fc" id="L560">    public int splitPoss = 0;</span>

    /**
     * Mark base NPs.  A value of 0 = no marking, 1 = marking
     * baseNP (ones which rewrite just as preterminals), and 2 = doing
     * Collins-style marking, where an extra NP node is inserted above a
     * baseNP, if it isn't
     * already in an NP over NP construction, as in Collins 1999.
     * &lt;i&gt;This option shouldn't really be in EnglishTrain since it's needed
     * at parsing time.  But we don't currently use it....&lt;/i&gt;
     * A value of 1 is good.
     */
<span class="fc" id="L572">    public int splitBaseNP = 0;</span>

    /**
     * Retain NP-TMP (or maybe PP-TMP) annotation.  Good.
     * The values for this parameter are defined in
     * NPTmpRetainingTreeNormalizer.
     */
<span class="fc" id="L579">    public int splitTMP = NPTmpRetainingTreeNormalizer.TEMPORAL_NONE;</span>

    /** Split SBAR nodes.
     *  1 = mark 'in order to' purpose clauses; this is actually a small and
     *  inconsistent part of what is marked SBAR-PRP in the treebank, which
     *  is mainly 'because' reason clauses.
     *  2 = mark all infinitive SBAR.
     *  3 = do 1 and 2.
     *  A value of 1 seems minutely positive; 2 and 3 seem negative.
     *  Also get 'in case Sfin', 'In order to', and on one occasion
     *  'in order that'
     */
<span class="fc" id="L591">    public int splitSbar = 0;</span>

    /**
     * Retain NP-ADV annotation.  0 means strip &quot;-ADV&quot; annotation.  1 means to
     * retain it, and to percolate it down to a head tag providing it can
     * do it through a path of only NP nodes.
     */
<span class="fc" id="L598">    public int splitNPADV = 0;</span>

    /**
     * Mark NP-NNP.  0 is nothing; 1 is only NNP head, 2 is NNP and NNPS
     * head; 3 is NNP or NNPS anywhere in local NP.  All bad!
     */
<span class="fc" id="L604">    public int splitNPNNP = 0;</span>

    /**
     * 'Correct' tags to produce verbs in VPs, etc. where possible
     */
<span class="fc" id="L609">    public boolean correctTags = false;</span>

    /**
     * Right edge has a phrasal node.  Bad?
     */
<span class="fc" id="L614">    public boolean rightPhrasal = false;</span>

    /**
     * Set the support * KL cutoff level (1-4) for sister splitting
     * -- don't use it, as far as we can tell so far
     */
<span class="fc" id="L620">    public int sisterSplitLevel = 1;</span>

    /**
     * Grand-parent annotate (root mark) VP below ROOT.  Seems negative.
     */
<span class="fc" id="L625">    public boolean gpaRootVP = false;</span>

    /**
     * Change TO inside PP to IN.
     */
<span class="fc" id="L630">    public int makePPTOintoIN = 0;</span>

    /** Collapse WHPP with PP, etc., in training and perhaps in evaluation.
     *  1 = collapse phrasal categories.
     *  2 = collapse POS categories.
     *  4 = restore them in output (not yet implemented)
     */
<span class="fc" id="L637">    public int collapseWhCategories = 0;</span>

    public void display() {
<span class="nc" id="L640">      String englishParams = &quot;Using EnglishTreebankParserParams&quot; + &quot; splitIN=&quot; + splitIN + &quot; sPercent=&quot; + splitPercent + &quot; sNNP=&quot; + splitNNP + &quot; sQuotes=&quot; + splitQuotes + &quot; sSFP=&quot; + splitSFP + &quot; rbGPA=&quot; + tagRBGPA + &quot; j#=&quot; + joinPound + &quot; jJJ=&quot; + joinJJ + &quot; jNounTags=&quot; + joinNounTags + &quot; sPPJJ=&quot; + splitPPJJ + &quot; sTRJJ=&quot; + splitTRJJ + &quot; sJJCOMP=&quot; + splitJJCOMP + &quot; sMoreLess=&quot; + splitMoreLess + &quot; unaryDT=&quot; + unaryDT + &quot; unaryRB=&quot; + unaryRB + &quot; unaryPRP=&quot; + unaryPRP + &quot; reflPRP=&quot; + markReflexivePRP + &quot; unaryIN=&quot; + unaryIN + &quot; sCC=&quot; + splitCC + &quot; sNT=&quot; + splitNOT + &quot; sRB=&quot; + splitRB + &quot; sAux=&quot; + splitAux + &quot; vpSubCat=&quot; + vpSubCat + &quot; mDTV=&quot; + markDitransV + &quot; sVP=&quot; + splitVP + &quot; sVPNPAgr=&quot; + splitVPNPAgr + &quot; sSTag=&quot; + splitSTag + &quot; mVP=&quot; + markContainedVP + &quot; sNP%=&quot; + splitNPpercent + &quot; sNPPRP=&quot; + splitNPPRP + &quot; dominatesV=&quot; + dominatesV + &quot; dominatesI=&quot; + dominatesI + &quot; dominatesC=&quot; + dominatesC + &quot; mCC=&quot; + markCC + &quot; sSGapped=&quot; + splitSGapped + &quot; numNP=&quot; + splitNumNP + &quot; sPoss=&quot; + splitPoss + &quot; baseNP=&quot; + splitBaseNP + &quot; sNPNNP=&quot; + splitNPNNP + &quot; sTMP=&quot; + splitTMP + &quot; sNPADV=&quot; + splitNPADV + &quot; cTags=&quot; + correctTags + &quot; rightPhrasal=&quot; + rightPhrasal + &quot; gpaRootVP=&quot; + gpaRootVP + &quot; splitSbar=&quot; + splitSbar + &quot; mPPTOiIN=&quot; + makePPTOintoIN + &quot; cWh=&quot; + collapseWhCategories;</span>
<span class="nc" id="L641">      log.info(englishParams);</span>
<span class="nc" id="L642">    }</span>

    private static final long serialVersionUID = 1831576434872643L;

  } // end class EnglishTrain

<span class="fc" id="L648">  private static final TreeFactory categoryWordTagTreeFactory =</span>
    new LabeledScoredTreeFactory(new CategoryWordTagFactory());

  /**
   * This method does language-specific tree transformations such
   * as annotating particular nodes with language-relevant features.
   * Such parameterizations should be inside the specific
   * TreebankLangParserParams class.  This method is recursively
   * applied to each node in the tree (depth first, left-to-right),
   * so you shouldn't write this method to apply recursively to tree
   * members.  This method is allowed to (and in some cases does)
   * destructively change the input tree &lt;code&gt;t&lt;/code&gt;. It changes both
   * labels and the tree shape.
   *
   * @param t The input tree (with non-language-specific annotation already
   *           done, so you need to strip back to basic categories)
   * @param root The root of the current tree (can be null for words)
   * @return The fully annotated tree node (with daughters still as you
   *           want them in the final result)
   */
  @Override
  public Tree transformTree(Tree t, Tree root) {
<span class="nc bnc" id="L670" title="All 4 branches missed.">    if (t == null || t.isLeaf()) {</span>
<span class="nc" id="L671">      return t;</span>
    }

    Tree parent;
    String parentStr;
    String grandParentStr;
<span class="nc bnc" id="L677" title="All 4 branches missed.">    if (root == null || t.equals(root)) {</span>
<span class="nc" id="L678">      parent = null;</span>
<span class="nc" id="L679">      parentStr = &quot;&quot;;</span>
    } else {
<span class="nc" id="L681">      parent = t.parent(root);</span>
<span class="nc" id="L682">      parentStr = parent.label().value();</span>
    }
<span class="nc bnc" id="L684" title="All 4 branches missed.">    if (parent == null || parent.equals(root)) {</span>
<span class="nc" id="L685">      grandParentStr = &quot;&quot;;</span>
    } else {
<span class="nc" id="L687">      Tree grandParent = parent.parent(root);</span>
<span class="nc" id="L688">      grandParentStr = grandParent.label().value();</span>
    }
<span class="nc" id="L690">    String baseParentStr = tlp.basicCategory(parentStr);</span>
<span class="nc" id="L691">    String baseGrandParentStr = tlp.basicCategory(grandParentStr);</span>

<span class="nc" id="L693">    CoreLabel lab = (CoreLabel) t.label();</span>
<span class="nc" id="L694">    String word = lab.word();</span>
<span class="nc" id="L695">    String tag = lab.tag();</span>
<span class="nc" id="L696">    String baseTag = tlp.basicCategory(tag);</span>
<span class="nc" id="L697">    String cat = lab.value();</span>
<span class="nc" id="L698">    String baseCat = tlp.basicCategory(cat);</span>

<span class="nc bnc" id="L700" title="All 2 branches missed.">    if (t.isPreTerminal()) {</span>
<span class="nc bnc" id="L701" title="All 2 branches missed.">      if (englishTrain.correctTags) {</span>
<span class="nc bnc" id="L702" title="All 2 branches missed.">        if (baseParentStr.equals(&quot;NP&quot;)) {</span>
<span class="nc bnc" id="L703" title="All 50 branches missed.">          switch (baseCat) {</span>
            case &quot;IN&quot;:
<span class="nc bnc" id="L705" title="All 4 branches missed.">              if (word.equalsIgnoreCase(&quot;a&quot;) || word.equalsIgnoreCase(&quot;that&quot;)) {</span>
<span class="nc" id="L706">                cat = changeBaseCat(cat, &quot;DT&quot;);</span>
<span class="nc bnc" id="L707" title="All 2 branches missed.">              } else if (word.equalsIgnoreCase(&quot;so&quot;) ||</span>
<span class="nc bnc" id="L708" title="All 2 branches missed.">                  word.equalsIgnoreCase(&quot;about&quot;)) {</span>
<span class="nc" id="L709">                cat = changeBaseCat(cat, &quot;RB&quot;);</span>
<span class="nc bnc" id="L710" title="All 4 branches missed.">              } else if (word.equals(&quot;fiscal&quot;) || word.equalsIgnoreCase(&quot;next&quot;)) {</span>
<span class="nc" id="L711">                cat = changeBaseCat(cat, &quot;JJ&quot;);</span>
              }
              break;
            case &quot;RB&quot;:
<span class="nc bnc" id="L715" title="All 2 branches missed.">              if (word.equals(&quot;McNally&quot;)) {</span>
<span class="nc" id="L716">                cat = changeBaseCat(cat, &quot;NNP&quot;);</span>
<span class="nc bnc" id="L717" title="All 2 branches missed.">              } else if (word.equals(&quot;multifamily&quot;)) {</span>
<span class="nc" id="L718">                cat = changeBaseCat(cat, &quot;NN&quot;);</span>
<span class="nc bnc" id="L719" title="All 2 branches missed.">              } else if (word.equals(&quot;MORE&quot;)) {</span>
<span class="nc" id="L720">                cat = changeBaseCat(cat, &quot;JJR&quot;);</span>
<span class="nc bnc" id="L721" title="All 2 branches missed.">              } else if (word.equals(&quot;hand&quot;)) {</span>
<span class="nc" id="L722">                cat = changeBaseCat(cat, &quot;NN&quot;);</span>
<span class="nc bnc" id="L723" title="All 2 branches missed.">              } else if (word.equals(&quot;fist&quot;)) {</span>
<span class="nc" id="L724">                cat = changeBaseCat(cat, &quot;NN&quot;);</span>
              }
              break;
            case &quot;RP&quot;:
<span class="nc bnc" id="L728" title="All 2 branches missed.">              if (word.equals(&quot;Howard&quot;)) {</span>
<span class="nc" id="L729">                cat = changeBaseCat(cat, &quot;NNP&quot;);</span>
<span class="nc bnc" id="L730" title="All 2 branches missed.">              } else if (word.equals(&quot;whole&quot;)) {</span>
<span class="nc" id="L731">                cat = changeBaseCat(cat, &quot;JJ&quot;);</span>
              }
              break;
            case &quot;JJ&quot;:
<span class="nc bnc" id="L735" title="All 2 branches missed.">              if (word.equals(&quot;U.S.&quot;)) {</span>
<span class="nc" id="L736">                cat = changeBaseCat(cat, &quot;NNP&quot;);</span>
<span class="nc bnc" id="L737" title="All 2 branches missed.">              } else if (word.equals(&quot;ours&quot;)) {</span>
<span class="nc" id="L738">                cat = changeBaseCat(cat, &quot;PRP&quot;);</span>
<span class="nc bnc" id="L739" title="All 2 branches missed.">              } else if (word.equals(&quot;mine&quot;)) {</span>
<span class="nc" id="L740">                cat = changeBaseCat(cat, &quot;NN&quot;);</span>
<span class="nc bnc" id="L741" title="All 2 branches missed.">              } else if (word.equals(&quot;Sept.&quot;)) {</span>
<span class="nc" id="L742">                cat = changeBaseCat(cat, &quot;NNP&quot;);</span>
              }
              break;
            case &quot;NN&quot;:
<span class="nc bnc" id="L746" title="All 12 branches missed.">              if (word.equals(&quot;Chapman&quot;) || word.equals(&quot;Jan.&quot;) || word.equals(&quot;Sept.&quot;) || word.equals(&quot;Oct.&quot;) || word.equals(&quot;Nov.&quot;) || word.equals(&quot;Dec.&quot;)) {</span>
<span class="nc" id="L747">                cat = changeBaseCat(cat, &quot;NNP&quot;);</span>
<span class="nc bnc" id="L748" title="All 26 branches missed.">              } else if (word.equals(&quot;members&quot;) || word.equals(&quot;bureaus&quot;) || word.equals(&quot;days&quot;) || word.equals(&quot;outfits&quot;) || word.equals(&quot;institutes&quot;) || word.equals(&quot;innings&quot;) || word.equals(&quot;write-offs&quot;) || word.equals(&quot;wines&quot;) || word.equals(&quot;trade-offs&quot;) || word.equals(&quot;tie-ins&quot;) || word.equals(&quot;thrips&quot;) || word.equals(&quot;1980s&quot;) || word.equals(&quot;1920s&quot;)) {</span>
<span class="nc" id="L749">                cat = changeBaseCat(cat, &quot;NNS&quot;);</span>
<span class="nc bnc" id="L750" title="All 2 branches missed.">              } else if (word.equals(&quot;this&quot;)) {</span>
<span class="nc" id="L751">                cat = changeBaseCat(cat, &quot;DT&quot;);</span>
              }
              break;
            case &quot;:&quot;:
<span class="nc bnc" id="L755" title="All 2 branches missed.">              if (word.equals(&quot;'&quot;)) {</span>
<span class="nc" id="L756">                cat = changeBaseCat(cat, &quot;''&quot;);</span>
              }
              break;
            case &quot;NNS&quot;:
<span class="nc bnc" id="L760" title="All 4 branches missed.">              if (word.equals(&quot;start-up&quot;) || word.equals(&quot;ground-handling&quot;) ||</span>
<span class="nc bnc" id="L761" title="All 4 branches missed.">                  word.equals(&quot;word-processing&quot;) || word.equals(&quot;T-shirt&quot;) ||</span>
<span class="nc bnc" id="L762" title="All 2 branches missed.">                  word.equals(&quot;co-pilot&quot;)) {</span>
<span class="nc" id="L763">                cat = changeBaseCat(cat, &quot;NN&quot;);</span>
<span class="nc bnc" id="L764" title="All 4 branches missed.">              } else if (word.equals(&quot;Sens.&quot;) || word.equals(&quot;Aichi&quot;)) {</span>
<span class="nc" id="L765">                cat = changeBaseCat(cat, &quot;NNP&quot;);  //not clear why Sens not NNPS</span>
              }
              break;
            case &quot;VBZ&quot;:
<span class="nc bnc" id="L769" title="All 2 branches missed.">              if (word.equals(&quot;'s&quot;)) {</span>
<span class="nc" id="L770">                cat = changeBaseCat(cat, &quot;POS&quot;);</span>
<span class="nc bnc" id="L771" title="All 2 branches missed.">              } else if (!word.equals(&quot;kills&quot;)) { // a worse PTB error</span>
<span class="nc" id="L772">                cat = changeBaseCat(cat, &quot;NNS&quot;);</span>
              }
              break;
            case &quot;VBG&quot;:
<span class="nc bnc" id="L776" title="All 2 branches missed.">              if (word.equals(&quot;preferred&quot;)) {</span>
<span class="nc" id="L777">                cat = changeBaseCat(cat, &quot;VBN&quot;);</span>
              }
              break;
            case &quot;VB&quot;:
<span class="nc bnc" id="L781" title="All 2 branches missed.">              if (word.equals(&quot;The&quot;)) {</span>
<span class="nc" id="L782">                cat = changeBaseCat(cat, &quot;DT&quot;);</span>
<span class="nc bnc" id="L783" title="All 2 branches missed.">              } else if (word.equals(&quot;allowed&quot;)) {</span>
<span class="nc" id="L784">                cat = changeBaseCat(cat, &quot;VBD&quot;);</span>
<span class="nc bnc" id="L785" title="All 10 branches missed.">              } else if (word.equals(&quot;short&quot;) || word.equals(&quot;key&quot;) || word.equals(&quot;many&quot;) || word.equals(&quot;last&quot;) || word.equals(&quot;further&quot;)) {</span>
<span class="nc" id="L786">                cat = changeBaseCat(cat, &quot;JJ&quot;);</span>
<span class="nc bnc" id="L787" title="All 2 branches missed.">              } else if (word.equals(&quot;lower&quot;)) {</span>
<span class="nc" id="L788">                cat = changeBaseCat(cat, &quot;JJR&quot;);</span>
<span class="nc bnc" id="L789" title="All 12 branches missed.">              } else if (word.equals(&quot;Nov.&quot;) || word.equals(&quot;Jan.&quot;) || word.equals(&quot;Dec.&quot;) || word.equals(&quot;Tandy&quot;) || word.equals(&quot;Release&quot;) || word.equals(&quot;Orkem&quot;)) {</span>
<span class="nc" id="L790">                cat = changeBaseCat(cat, &quot;NNP&quot;);</span>
<span class="nc bnc" id="L791" title="All 92 branches missed.">              } else if (word.equals(&quot;watch&quot;) || word.equals(&quot;review&quot;) || word.equals(&quot;risk&quot;) || word.equals(&quot;realestate&quot;) || word.equals(&quot;love&quot;) || word.equals(&quot;experience&quot;) || word.equals(&quot;control&quot;) || word.equals(&quot;Transport&quot;) || word.equals(&quot;mind&quot;) || word.equals(&quot;term&quot;) || word.equals(&quot;program&quot;) || word.equals(&quot;gender&quot;) || word.equals(&quot;audit&quot;) || word.equals(&quot;blame&quot;) || word.equals(&quot;stock&quot;) || word.equals(&quot;run&quot;) || word.equals(&quot;group&quot;) || word.equals(&quot;affect&quot;) || word.equals(&quot;rent&quot;) || word.equals(&quot;show&quot;) || word.equals(&quot;accord&quot;) || word.equals(&quot;change&quot;) || word.equals(&quot;finish&quot;) || word.equals(&quot;work&quot;) || word.equals(&quot;schedule&quot;) || word.equals(&quot;influence&quot;) || word.equals(&quot;school&quot;) || word.equals(&quot;freight&quot;) || word.equals(&quot;growth&quot;) || word.equals(&quot;travel&quot;) || word.equals(&quot;call&quot;) || word.equals(&quot;autograph&quot;) || word.equals(&quot;demand&quot;) || word.equals(&quot;abuse&quot;) || word.equals(&quot;return&quot;) || word.equals(&quot;defeat&quot;) || word.equals(&quot;pressure&quot;) || word.equals(&quot;bank&quot;) || word.equals(&quot;notice&quot;) || word.equals(&quot;tax&quot;) || word.equals(&quot;ooze&quot;) || word.equals(&quot;network&quot;) || word.equals(&quot;concern&quot;) || word.equals(&quot;pit&quot;) || word.equals(&quot;contract&quot;) || word.equals(&quot;cash&quot;)) {</span>
<span class="nc" id="L792">                cat = changeBaseCat(cat, &quot;NN&quot;);</span>
              }
              break;
            case &quot;NNP&quot;:
<span class="nc bnc" id="L796" title="All 2 branches missed.">              if (word.equals(&quot;Officials&quot;)) {</span>
<span class="nc" id="L797">                cat = changeBaseCat(cat, &quot;NNS&quot;);</span>
<span class="nc bnc" id="L798" title="All 2 branches missed.">              } else if (word.equals(&quot;Currently&quot;)) {</span>
<span class="nc" id="L799">                cat = changeBaseCat(cat, &quot;RB&quot;);</span>
                // should change NP-TMP to ADVP-TMP here too!
              }
              break;
            case &quot;PRP&quot;:
<span class="nc bnc" id="L804" title="All 4 branches missed.">              if (word.equals(&quot;her&quot;) &amp;&amp; parent.numChildren() &gt; 1) {</span>
<span class="nc" id="L805">                cat = changeBaseCat(cat, &quot;PRP$&quot;);</span>
<span class="nc bnc" id="L806" title="All 2 branches missed.">              } else if (word.equals(&quot;US&quot;)) {</span>
<span class="nc" id="L807">                cat = changeBaseCat(cat, &quot;NNP&quot;);</span>
              }
<span class="nc" id="L809">              break;</span>
          }
<span class="nc bnc" id="L811" title="All 2 branches missed.">        } else if (baseParentStr.equals(&quot;WHNP&quot;)) {</span>
<span class="nc bnc" id="L812" title="All 4 branches missed.">          if (baseCat.equals(&quot;VBP&quot;) &amp;&amp; (word.equalsIgnoreCase(&quot;that&quot;))) {</span>
<span class="nc" id="L813">            cat = changeBaseCat(cat, &quot;WDT&quot;);</span>
          }
<span class="nc bnc" id="L815" title="All 2 branches missed.">        } else if (baseParentStr.equals(&quot;UCP&quot;)) {</span>
<span class="nc bnc" id="L816" title="All 2 branches missed.">           if (word.equals(&quot;multifamily&quot;)) {</span>
<span class="nc" id="L817">             cat = changeBaseCat(cat, &quot;NN&quot;);</span>
           }
<span class="nc bnc" id="L819" title="All 2 branches missed.">        } else if (baseParentStr.equals(&quot;PRT&quot;)) {</span>
<span class="nc bnc" id="L820" title="All 4 branches missed.">          if (baseCat.equals(&quot;RBR&quot;) &amp;&amp; word.equals(&quot;in&quot;)) {</span>
<span class="nc" id="L821">            cat = changeBaseCat(cat, &quot;RP&quot;);</span>
<span class="nc bnc" id="L822" title="All 4 branches missed.">          } else if (baseCat.equals(&quot;NNP&quot;) &amp;&amp; word.equals(&quot;up&quot;)) {</span>
<span class="nc" id="L823">            cat = changeBaseCat(cat, &quot;RP&quot;);</span>
          }
<span class="nc bnc" id="L825" title="All 2 branches missed.">        } else if (baseParentStr.equals(&quot;PP&quot;)) {</span>
<span class="nc bnc" id="L826" title="All 2 branches missed.">          if (parentStr.equals(&quot;PP-TMP&quot;)) {</span>
<span class="nc bnc" id="L827" title="All 2 branches missed.">            if (baseCat.equals(&quot;RP&quot;)) {</span>
<span class="nc" id="L828">              cat = changeBaseCat(cat, &quot;IN&quot;);</span>
            }
          }
<span class="nc bnc" id="L831" title="All 6 branches missed.">          if (word.equals(&quot;in&quot;) &amp;&amp; (baseCat.equals(&quot;RP&quot;) || baseCat.equals(&quot;NN&quot;))) {</span>
<span class="nc" id="L832">            cat = changeBaseCat(cat, &quot;IN&quot;);</span>
<span class="nc bnc" id="L833" title="All 2 branches missed.">          } else if (baseCat.equals(&quot;RB&quot;)) {</span>
<span class="nc bnc" id="L834" title="All 4 branches missed.">            if (word.equals(&quot;for&quot;) || word.equals(&quot;After&quot;)) {</span>
<span class="nc" id="L835">              cat = changeBaseCat(cat, &quot;IN&quot;);</span>
            }
<span class="nc bnc" id="L837" title="All 4 branches missed.">          } else if (word.equals(&quot;if&quot;) &amp;&amp; baseCat.equals(&quot;JJ&quot;)) {</span>
<span class="nc" id="L838">            cat = changeBaseCat(cat, &quot;IN&quot;);</span>
          }
<span class="nc bnc" id="L840" title="All 2 branches missed.">        } else if (baseParentStr.equals(&quot;VP&quot;)) {</span>
<span class="nc bnc" id="L841" title="All 2 branches missed.">          if (baseCat.equals(&quot;NNS&quot;)) {</span>
<span class="nc" id="L842">            cat = changeBaseCat(cat, &quot;VBZ&quot;);</span>
<span class="nc bnc" id="L843" title="All 2 branches missed.">          } else if (baseCat.equals(&quot;IN&quot;)) {</span>
<span class="nc bnc" id="L844" title="All 18 branches missed.">            switch (word) {</span>
              case &quot;complicated&quot;:
<span class="nc" id="L846">                cat = changeBaseCat(cat, &quot;VBD&quot;);</span>
<span class="nc" id="L847">                break;</span>
              case &quot;post&quot;:
<span class="nc" id="L849">                cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc" id="L850">                break;</span>
              case &quot;like&quot;:
<span class="nc" id="L852">                cat = changeBaseCat(cat, &quot;VB&quot;);  // most are VB; odd VBP</span>

<span class="nc" id="L854">                break;</span>
              case &quot;off&quot;:
<span class="nc" id="L856">                cat = changeBaseCat(cat, &quot;RP&quot;);</span>
<span class="nc" id="L857">                break;</span>
            }
<span class="nc bnc" id="L859" title="All 2 branches missed.">          } else if (baseCat.equals(&quot;NN&quot;)) {</span>
<span class="nc bnc" id="L860" title="All 2 branches missed.">            if (word.endsWith(&quot;ing&quot;)) {</span>
<span class="nc" id="L861">              cat = changeBaseCat(cat, &quot;VBG&quot;);</span>
<span class="nc bnc" id="L862" title="All 2 branches missed.">            } else if (word.equals(&quot;bid&quot;)) {</span>
<span class="nc" id="L863">              cat = changeBaseCat(cat, &quot;VBN&quot;);</span>
<span class="nc bnc" id="L864" title="All 2 branches missed.">            } else if (word.equals(&quot;are&quot;)) {</span>
<span class="nc" id="L865">              cat = changeBaseCat(cat, &quot;VBP&quot;);</span>
<span class="nc bnc" id="L866" title="All 2 branches missed.">            } else if (word.equals(&quot;lure&quot;)) {</span>
<span class="nc" id="L867">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L868" title="All 2 branches missed.">            } else if (word.equals(&quot;cost&quot;)) {</span>
<span class="nc" id="L869">              cat = changeBaseCat(cat, &quot;VBP&quot;);</span>
<span class="nc bnc" id="L870" title="All 2 branches missed.">            } else if (word.equals(&quot;agreed&quot;)) {</span>
<span class="nc" id="L871">              cat = changeBaseCat(cat, &quot;VBN&quot;);</span>
<span class="nc bnc" id="L872" title="All 2 branches missed.">            } else if (word.equals(&quot;restructure&quot;)) {</span>
<span class="nc" id="L873">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L874" title="All 2 branches missed.">            } else if (word.equals(&quot;rule&quot;)) {</span>
<span class="nc" id="L875">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L876" title="All 2 branches missed.">            } else if (word.equals(&quot;fret&quot;)) {</span>
<span class="nc" id="L877">              cat = changeBaseCat(cat, &quot;VBP&quot;);</span>
<span class="nc bnc" id="L878" title="All 2 branches missed.">            } else if (word.equals(&quot;retort&quot;)) {</span>
<span class="nc" id="L879">              cat = changeBaseCat(cat, &quot;VBP&quot;);</span>
<span class="nc bnc" id="L880" title="All 2 branches missed.">            } else if (word.equals(&quot;draft&quot;)) {</span>
<span class="nc" id="L881">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L882" title="All 2 branches missed.">            } else if (word.equals(&quot;will&quot;)) {</span>
<span class="nc" id="L883">              cat = changeBaseCat(cat, &quot;MD&quot;);</span>
<span class="nc bnc" id="L884" title="All 2 branches missed.">            } else if (word.equals(&quot;yield&quot;)) {</span>
<span class="nc" id="L885">              cat = changeBaseCat(cat, &quot;VBP&quot;);</span>
<span class="nc bnc" id="L886" title="All 2 branches missed.">            } else if (word.equals(&quot;lure&quot;)) {</span>
<span class="nc" id="L887">              cat = changeBaseCat(cat, &quot;VBP&quot;);</span>
<span class="nc bnc" id="L888" title="All 2 branches missed.">            } else if (word.equals(&quot;feel&quot;)) {</span>
<span class="nc" id="L889">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L890" title="All 2 branches missed.">            } else if (word.equals(&quot;institutes&quot;)) {</span>
<span class="nc" id="L891">              cat = changeBaseCat(cat, &quot;VBZ&quot;);</span>
<span class="nc bnc" id="L892" title="All 2 branches missed.">            } else if (word.equals(&quot;share&quot;)) {</span>
<span class="nc" id="L893">              cat = changeBaseCat(cat, &quot;VBP&quot;);</span>
<span class="nc bnc" id="L894" title="All 2 branches missed.">            } else if (word.equals(&quot;trade&quot;)) {</span>
<span class="nc" id="L895">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L896" title="All 2 branches missed.">            } else if (word.equals(&quot;beat&quot;)) {</span>
<span class="nc" id="L897">              cat = changeBaseCat(cat, &quot;VBN&quot;);</span>
<span class="nc bnc" id="L898" title="All 2 branches missed.">            } else if (word.equals(&quot;effect&quot;)) {</span>
<span class="nc" id="L899">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L900" title="All 2 branches missed.">            } else if (word.equals(&quot;speed&quot;)) {</span>
<span class="nc" id="L901">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L902" title="All 2 branches missed.">            } else if (word.equals(&quot;work&quot;)) {</span>
<span class="nc" id="L903">              cat = changeBaseCat(cat, &quot;VB&quot;);   // though also one VBP</span>
<span class="nc bnc" id="L904" title="All 2 branches missed.">            } else if (word.equals(&quot;act&quot;)) {</span>
<span class="nc" id="L905">              cat = changeBaseCat(cat, &quot;VBP&quot;);</span>
<span class="nc bnc" id="L906" title="All 2 branches missed.">            } else if (word.equals(&quot;drop&quot;)) {</span>
<span class="nc" id="L907">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L908" title="All 2 branches missed.">            } else if (word.equals(&quot;stand&quot;)) {</span>
<span class="nc" id="L909">              cat = changeBaseCat(cat, &quot;VBP&quot;);</span>
<span class="nc bnc" id="L910" title="All 2 branches missed.">            } else if (word.equals(&quot;push&quot;)) {</span>
<span class="nc" id="L911">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L912" title="All 2 branches missed.">            } else if (word.equals(&quot;service&quot;)) {</span>
<span class="nc" id="L913">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L914" title="All 2 branches missed.">            } else if (word.equals(&quot;set&quot;)) {</span>
<span class="nc" id="L915">              cat = changeBaseCat(cat, &quot;VBN&quot;);   // or VBD sometimes, sigh</span>
<span class="nc bnc" id="L916" title="All 2 branches missed.">            } else if (word.equals(&quot;appeal&quot;)) {</span>
<span class="nc" id="L917">              cat = changeBaseCat(cat, &quot;VBP&quot;);  // 2 VBP, 1 VB in train</span>
<span class="nc bnc" id="L918" title="All 2 branches missed.">            } else if (word.equals(&quot;mold&quot;)) {</span>
<span class="nc" id="L919">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L920" title="All 2 branches missed.">            } else if (word.equals(&quot;mean&quot;)) {</span>
<span class="nc" id="L921">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L922" title="All 2 branches missed.">            } else if (word.equals(&quot;reconfirm&quot;)) {</span>
<span class="nc" id="L923">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L924" title="All 2 branches missed.">            } else if (word.equals(&quot;land&quot;)) {</span>
<span class="nc" id="L925">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L926" title="All 2 branches missed.">            } else if (word.equals(&quot;point&quot;)) {</span>
<span class="nc" id="L927">              cat = changeBaseCat(cat, &quot;VBP&quot;);</span>
<span class="nc bnc" id="L928" title="All 2 branches missed.">            } else if (word.equals(&quot;rise&quot;)) {</span>
<span class="nc" id="L929">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L930" title="All 2 branches missed.">            } else if (word.equals(&quot;pressured&quot;)) {</span>
<span class="nc" id="L931">              cat = changeBaseCat(cat, &quot;VBN&quot;);</span>
<span class="nc bnc" id="L932" title="All 2 branches missed.">            } else if (word.equals(&quot;smell&quot;)) {</span>
<span class="nc" id="L933">              cat = changeBaseCat(cat, &quot;VBP&quot;);</span>
<span class="nc bnc" id="L934" title="All 2 branches missed.">            } else if (word.equals(&quot;pay&quot;)) {</span>
<span class="nc" id="L935">              cat = changeBaseCat(cat, &quot;VBP&quot;);</span>
<span class="nc bnc" id="L936" title="All 2 branches missed.">            } else if (word.equals(&quot;hum&quot;)) {</span>
<span class="nc" id="L937">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L938" title="All 2 branches missed.">            } else if (word.equals(&quot;shape&quot;)) {</span>
<span class="nc" id="L939">              cat = changeBaseCat(cat, &quot;VBP&quot;);</span>
<span class="nc bnc" id="L940" title="All 2 branches missed.">            } else if (word.equals(&quot;benefit&quot;)) {</span>
<span class="nc" id="L941">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L942" title="All 2 branches missed.">            } else if (word.equals(&quot;abducted&quot;)) {</span>
<span class="nc" id="L943">              cat = changeBaseCat(cat, &quot;VBN&quot;);</span>
<span class="nc bnc" id="L944" title="All 2 branches missed.">            } else if (word.equals(&quot;look&quot;)) {</span>
<span class="nc" id="L945">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L946" title="All 2 branches missed.">            } else if (word.equals(&quot;fare&quot;)) {</span>
<span class="nc" id="L947">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L948" title="All 2 branches missed.">            } else if (word.equals(&quot;change&quot;)) {</span>
<span class="nc" id="L949">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L950" title="All 2 branches missed.">            } else if (word.equals(&quot;farm&quot;)) {</span>
<span class="nc" id="L951">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L952" title="All 2 branches missed.">            } else if (word.equals(&quot;increase&quot;)) {</span>
<span class="nc" id="L953">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc bnc" id="L954" title="All 2 branches missed.">            } else if (word.equals(&quot;stem&quot;)) {</span>
<span class="nc" id="L955">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
            // only done 200-700
<span class="nc bnc" id="L957" title="All 2 branches missed.">            } else if (word.equals(&quot;rebounded&quot;)) {</span>
<span class="nc" id="L958">              cat = changeBaseCat(cat, &quot;VBD&quot;);</span>
<span class="nc bnc" id="L959" title="All 2 branches missed.">            } else if (word.equals(&quot;face&quot;)) {</span>
<span class="nc" id="L960">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
            }
<span class="nc bnc" id="L962" title="All 2 branches missed.">          } else if (baseCat.equals(&quot;NNP&quot;)) {</span>
<span class="nc bnc" id="L963" title="All 90 branches missed.">            switch (word) {</span>
              case &quot;GRAB&quot;:
<span class="nc" id="L965">                cat = changeBaseCat(cat, &quot;VBP&quot;);</span>
<span class="nc" id="L966">                break;</span>
              case &quot;mature&quot;:
<span class="nc" id="L968">                cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc" id="L969">                break;</span>
              case &quot;Face&quot;:
<span class="nc" id="L971">                cat = changeBaseCat(cat, &quot;VBP&quot;);</span>
<span class="nc" id="L972">                break;</span>
              case &quot;are&quot;:
<span class="nc" id="L974">                cat = changeBaseCat(cat, &quot;VBP&quot;);</span>
<span class="nc" id="L975">                break;</span>
              case &quot;Urging&quot;:
<span class="nc" id="L977">                cat = changeBaseCat(cat, &quot;VBG&quot;);</span>
<span class="nc" id="L978">                break;</span>
              case &quot;Finding&quot;:
<span class="nc" id="L980">                cat = changeBaseCat(cat, &quot;VBG&quot;);</span>
<span class="nc" id="L981">                break;</span>
              case &quot;say&quot;:
<span class="nc" id="L983">                cat = changeBaseCat(cat, &quot;VBP&quot;);</span>
<span class="nc" id="L984">                break;</span>
              case &quot;Added&quot;:
<span class="nc" id="L986">                cat = changeBaseCat(cat, &quot;VBD&quot;);</span>
<span class="nc" id="L987">                break;</span>
              case &quot;Adds&quot;:
<span class="nc" id="L989">                cat = changeBaseCat(cat, &quot;VBZ&quot;);</span>
<span class="nc" id="L990">                break;</span>
              case &quot;BRACED&quot;:
<span class="nc" id="L992">                cat = changeBaseCat(cat, &quot;VBD&quot;);</span>
<span class="nc" id="L993">                break;</span>
              case &quot;REQUIRED&quot;:
<span class="nc" id="L995">                cat = changeBaseCat(cat, &quot;VBN&quot;);</span>
<span class="nc" id="L996">                break;</span>
              case &quot;SIZING&quot;:
<span class="nc" id="L998">                cat = changeBaseCat(cat, &quot;VBG&quot;);</span>
<span class="nc" id="L999">                break;</span>
              case &quot;REVIEW&quot;:
<span class="nc" id="L1001">                cat = changeBaseCat(cat, &quot;VB&quot;);</span>
<span class="nc" id="L1002">                break;</span>
              case &quot;code-named&quot;:
<span class="nc" id="L1004">                cat = changeBaseCat(cat, &quot;VBN&quot;);</span>
<span class="nc" id="L1005">                break;</span>
              case &quot;Printed&quot;:
<span class="nc" id="L1007">                cat = changeBaseCat(cat, &quot;VBN&quot;);</span>
<span class="nc" id="L1008">                break;</span>
              case &quot;Rated&quot;:
<span class="nc" id="L1010">                cat = changeBaseCat(cat, &quot;VBN&quot;);</span>
<span class="nc" id="L1011">                break;</span>
              case &quot;FALTERS&quot;:
<span class="nc" id="L1013">                cat = changeBaseCat(cat, &quot;VBZ&quot;);</span>
<span class="nc" id="L1014">                break;</span>
              case &quot;Got&quot;:
<span class="nc" id="L1016">                cat = changeBaseCat(cat, &quot;VBN&quot;);</span>
<span class="nc" id="L1017">                break;</span>
              case &quot;JUMPING&quot;:
<span class="nc" id="L1019">                cat = changeBaseCat(cat, &quot;VBG&quot;);</span>
<span class="nc" id="L1020">                break;</span>
              case &quot;Branching&quot;:
<span class="nc" id="L1022">                cat = changeBaseCat(cat, &quot;VBG&quot;);</span>
<span class="nc" id="L1023">                break;</span>
              case &quot;Excluding&quot;:
<span class="nc" id="L1025">                cat = changeBaseCat(cat, &quot;VBG&quot;);</span>
<span class="nc" id="L1026">                break;</span>
              case &quot;OKing&quot;:
<span class="nc" id="L1028">                cat = changeBaseCat(cat, &quot;VBG&quot;);</span>
<span class="nc" id="L1029">                break;</span>
            }
<span class="nc bnc" id="L1031" title="All 2 branches missed.">          } else if (baseCat.equals(&quot;POS&quot;)) {</span>
<span class="nc" id="L1032">            cat = changeBaseCat(cat, &quot;VBZ&quot;);</span>
<span class="nc bnc" id="L1033" title="All 2 branches missed.">          } else if (baseCat.equals(&quot;VBD&quot;)) {</span>
<span class="nc bnc" id="L1034" title="All 2 branches missed.">            if (word.equals(&quot;heaves&quot;)) {</span>
<span class="nc" id="L1035">              cat = changeBaseCat(cat, &quot;VBZ&quot;);</span>
            }
<span class="nc bnc" id="L1037" title="All 2 branches missed.">          } else if (baseCat.equals(&quot;VB&quot;)) {</span>
<span class="nc bnc" id="L1038" title="All 4 branches missed.">            if (word.equals(&quot;allowed&quot;) || word.equals(&quot;increased&quot;)) {</span>
<span class="nc" id="L1039">              cat = changeBaseCat(cat, &quot;VBD&quot;);</span>
            }
<span class="nc bnc" id="L1041" title="All 2 branches missed.">          } else if (baseCat.equals(&quot;VBN&quot;)) {</span>
<span class="nc bnc" id="L1042" title="All 2 branches missed.">            if (word.equals(&quot;has&quot;)) {</span>
<span class="nc" id="L1043">              cat = changeBaseCat(cat, &quot;VBZ&quot;);</span>
<span class="nc bnc" id="L1044" title="All 4 branches missed.">            } else if (word.equals(&quot;grew&quot;) || word.equals(&quot;fell&quot;)) {</span>
<span class="nc" id="L1045">              cat = changeBaseCat(cat, &quot;VBD&quot;);</span>
            }
<span class="nc bnc" id="L1047" title="All 2 branches missed.">          } else if (baseCat.equals(&quot;JJ&quot;)) {</span>
<span class="nc bnc" id="L1048" title="All 2 branches missed.">            if (word.equals(&quot;own&quot;)) {</span>
<span class="nc" id="L1049">              cat = changeBaseCat(cat, &quot;VB&quot;);</span>
              // a couple should actually be VBP, but at least verb is closer
            }
<span class="nc bnc" id="L1052" title="All 2 branches missed.">          } else if (word.equalsIgnoreCase(&quot;being&quot;)) {</span>
<span class="nc bnc" id="L1053" title="All 2 branches missed.">            if (!cat.equals(&quot;VBG&quot;)) {</span>
<span class="nc" id="L1054">              cat = changeBaseCat(cat, &quot;VBG&quot;);</span>
            }
<span class="nc bnc" id="L1056" title="All 2 branches missed.">          } else if (word.equalsIgnoreCase(&quot;all&quot;)) {</span>
<span class="nc" id="L1057">            cat = changeBaseCat(cat, &quot;RB&quot;);</span>
          // The below two lines seem in principle good but don't actually
          // improve parser performance; they degrade it on 2200-2219
          // } else if (baseGrandParentStr.equals(&quot;NP&quot;) &amp;&amp; baseCat.equals(&quot;VBD&quot;)) {
          //   cat = changeBaseCat(cat, &quot;VBN&quot;);
          }
<span class="nc bnc" id="L1063" title="All 2 branches missed.">        } else if (baseParentStr.equals(&quot;S&quot;)) {</span>
<span class="nc bnc" id="L1064" title="All 2 branches missed.">          if (word.equalsIgnoreCase(&quot;all&quot;)) {</span>
<span class="nc" id="L1065">            cat = changeBaseCat(cat, &quot;RB&quot;);</span>
          }
<span class="nc bnc" id="L1067" title="All 2 branches missed.">        } else if (baseParentStr.equals(&quot;ADJP&quot;)) {</span>
<span class="nc bnc" id="L1068" title="All 18 branches missed.">          switch (baseCat) {</span>
            case &quot;UH&quot;:
<span class="nc" id="L1070">              cat = changeBaseCat(cat, &quot;JJ&quot;);</span>
<span class="nc" id="L1071">              break;</span>
            case &quot;JJ&quot;:
<span class="nc bnc" id="L1073" title="All 2 branches missed.">              if (word.equalsIgnoreCase(&quot;more&quot;)) {</span>
<span class="nc" id="L1074">                cat = changeBaseCat(cat, &quot;JJR&quot;);</span>
              }
              break;
            case &quot;RB&quot;:
<span class="nc bnc" id="L1078" title="All 2 branches missed.">              if (word.equalsIgnoreCase(&quot;free&quot;)) {</span>
<span class="nc" id="L1079">                cat = changeBaseCat(cat, &quot;JJ&quot;);</span>
<span class="nc bnc" id="L1080" title="All 2 branches missed.">              } else if (word.equalsIgnoreCase(&quot;clear&quot;)) {</span>
<span class="nc" id="L1081">                cat = changeBaseCat(cat, &quot;JJ&quot;);</span>
<span class="nc bnc" id="L1082" title="All 2 branches missed.">              } else if (word.equalsIgnoreCase(&quot;tight&quot;)) {</span>
<span class="nc" id="L1083">                cat = changeBaseCat(cat, &quot;JJ&quot;);</span>
<span class="nc bnc" id="L1084" title="All 2 branches missed.">              } else if (word.equalsIgnoreCase(&quot;sure&quot;)) {</span>
<span class="nc" id="L1085">                cat = changeBaseCat(cat, &quot;JJ&quot;);</span>
<span class="nc bnc" id="L1086" title="All 2 branches missed.">              } else if (word.equalsIgnoreCase(&quot;particular&quot;)) {</span>
<span class="nc" id="L1087">                cat = changeBaseCat(cat, &quot;JJ&quot;);</span>
              }
              // most uses of hard/RB should be JJ but not hard put/pressed exx.
              break;
            case &quot;VB&quot;:
<span class="nc bnc" id="L1092" title="All 2 branches missed.">              if (word.equalsIgnoreCase(&quot;stock&quot;)) {</span>
<span class="nc" id="L1093">                cat = changeBaseCat(cat, &quot;NN&quot;);</span>
<span class="nc bnc" id="L1094" title="All 2 branches missed.">              } else if (word.equalsIgnoreCase(&quot;secure&quot;)) {</span>
<span class="nc" id="L1095">                cat = changeBaseCat(cat, &quot;JJ&quot;);</span>
              }
<span class="nc" id="L1097">              break;</span>
          }
<span class="nc bnc" id="L1099" title="All 2 branches missed.">        } else if (baseParentStr.equals(&quot;QP&quot;)) {</span>
<span class="nc bnc" id="L1100" title="All 2 branches missed.">          if (word.equalsIgnoreCase(&quot;about&quot;)) {</span>
<span class="nc" id="L1101">            cat = changeBaseCat(cat, &quot;RB&quot;);</span>
<span class="nc bnc" id="L1102" title="All 2 branches missed.">          } else if (baseCat.equals(&quot;JJ&quot;)) {</span>
<span class="nc bnc" id="L1103" title="All 2 branches missed.">            if (word.equalsIgnoreCase(&quot;more&quot;)) {</span>
<span class="nc" id="L1104">              cat = changeBaseCat(cat, &quot;JJR&quot;);</span>
            // this isn't right for &quot;as much as X&quot; constructions!
            // } else if (word.equalsIgnoreCase(&quot;as&quot;)) {
            //   cat = changeBaseCat(cat, &quot;RB&quot;);
            }
          }
<span class="nc bnc" id="L1110" title="All 2 branches missed.">        } else if (baseParentStr.equals(&quot;ADVP&quot;)) {</span>
<span class="nc bnc" id="L1111" title="All 2 branches missed.">          if (baseCat.equals(&quot;EX&quot;)) {</span>
<span class="nc" id="L1112">            cat = changeBaseCat(cat, &quot;RB&quot;);</span>
<span class="nc bnc" id="L1113" title="All 4 branches missed.">          } else if (baseCat.equals(&quot;NN&quot;) &amp;&amp; word.equalsIgnoreCase(&quot;that&quot;)) {</span>
<span class="nc" id="L1114">            cat = changeBaseCat(cat, &quot;DT&quot;);</span>
<span class="nc bnc" id="L1115" title="All 4 branches missed.">          } else if (baseCat.equals(&quot;NNP&quot;) &amp;&amp; (word.endsWith(&quot;ly&quot;) ||</span>
<span class="nc bnc" id="L1116" title="All 2 branches missed.">                                               word.equals(&quot;Overall&quot;))) {</span>
<span class="nc" id="L1117">            cat = changeBaseCat(cat, &quot;RB&quot;);</span>

          // This should be a sensible thing to do, but hurts on 2200-2219
          // } else if (baseCat.equals(&quot;RP&quot;) &amp;&amp; word.equalsIgnoreCase(&quot;around&quot;)) {
          //   cat = changeBaseCat(cat, &quot;RB&quot;);
          }
<span class="nc bnc" id="L1123" title="All 2 branches missed.">        } else if (baseParentStr.equals(&quot;SBAR&quot;)) {</span>
<span class="nc bnc" id="L1124" title="All 8 branches missed.">          if ((word.equalsIgnoreCase(&quot;that&quot;) || word.equalsIgnoreCase(&quot;because&quot;) || word.equalsIgnoreCase(&quot;while&quot;)) &amp;&amp; !baseCat.equals(&quot;IN&quot;)) {</span>
<span class="nc" id="L1125">            cat = changeBaseCat(cat, &quot;IN&quot;);</span>
<span class="nc bnc" id="L1126" title="All 6 branches missed.">          } else if ((word.equals(&quot;Though&quot;) || word.equals(&quot;Whether&quot;)) &amp;&amp; baseCat.equals(&quot;NNP&quot;)) {</span>
<span class="nc" id="L1127">            cat = changeBaseCat(cat, &quot;IN&quot;);</span>
          }
<span class="nc bnc" id="L1129" title="All 2 branches missed.">        } else if (baseParentStr.equals(&quot;SBARQ&quot;)) {</span>
<span class="nc bnc" id="L1130" title="All 2 branches missed.">          if (baseCat.equals(&quot;S&quot;)) {</span>
<span class="nc bnc" id="L1131" title="All 2 branches missed.">            if (word.equalsIgnoreCase(&quot;had&quot;)) {</span>
<span class="nc" id="L1132">              cat = changeBaseCat(cat, &quot;SQ&quot;);</span>
            }
          }
<span class="nc bnc" id="L1135" title="All 2 branches missed.">        } else if (baseCat.equals(&quot;JJS&quot;)) {</span>
<span class="nc bnc" id="L1136" title="All 2 branches missed.">          if (word.equalsIgnoreCase(&quot;less&quot;)) {</span>
<span class="nc" id="L1137">            cat = changeBaseCat(cat, &quot;JJR&quot;);</span>
          }
<span class="nc bnc" id="L1139" title="All 2 branches missed.">        } else if (baseCat.equals(&quot;JJ&quot;)) {</span>
<span class="nc bnc" id="L1140" title="All 2 branches missed.">          if (word.equalsIgnoreCase(&quot;%&quot;)) {</span>
            // nearly all % are NN, a handful are JJ which we 'correct'
<span class="nc" id="L1142">            cat = changeBaseCat(cat, &quot;NN&quot;);</span>
<span class="nc bnc" id="L1143" title="All 2 branches missed.">          } else if (word.equalsIgnoreCase(&quot;to&quot;)) {</span>
<span class="nc" id="L1144">            cat = changeBaseCat(cat, &quot;TO&quot;);</span>
          }
<span class="nc bnc" id="L1146" title="All 2 branches missed.">        } else if (baseCat.equals(&quot;VB&quot;)) {</span>
<span class="nc bnc" id="L1147" title="All 2 branches missed.">          if (word.equalsIgnoreCase(&quot;even&quot;)) {</span>
<span class="nc" id="L1148">            cat = changeBaseCat(cat, &quot;RB&quot;);</span>
          }
<span class="nc bnc" id="L1150" title="All 2 branches missed.">        } else if (baseCat.equals(&quot;,&quot;)) {</span>
<span class="nc bnc" id="L1151" title="All 22 branches missed.">          switch (word) {</span>
            case &quot;2&quot;:
<span class="nc" id="L1153">              cat = changeBaseCat(cat, &quot;CD&quot;);</span>
<span class="nc" id="L1154">              break;</span>
            case &quot;an&quot;:
<span class="nc" id="L1156">              cat = changeBaseCat(cat, &quot;DT&quot;);</span>
<span class="nc" id="L1157">              break;</span>
            case &quot;Wa&quot;:
<span class="nc" id="L1159">              cat = changeBaseCat(cat, &quot;NNP&quot;);</span>
<span class="nc" id="L1160">              break;</span>
            case &quot;section&quot;:
<span class="nc" id="L1162">              cat = changeBaseCat(cat, &quot;NN&quot;);</span>
<span class="nc" id="L1163">              break;</span>
            case &quot;underwriters&quot;:
<span class="nc" id="L1165">              cat = changeBaseCat(cat, &quot;NNS&quot;);</span>
<span class="nc" id="L1166">              break;</span>
          }
<span class="nc bnc" id="L1168" title="All 2 branches missed.">        } else if (baseCat.equals(&quot;CD&quot;)) {</span>
<span class="nc bnc" id="L1169" title="All 2 branches missed.">          if (word.equals(&quot;high-risk&quot;)) {</span>
<span class="nc" id="L1170">            cat = changeBaseCat(cat, &quot;JJ&quot;);</span>
          }
<span class="nc bnc" id="L1172" title="All 2 branches missed.">        } else if (baseCat.equals(&quot;RB&quot;)) {</span>
<span class="nc bnc" id="L1173" title="All 2 branches missed.">          if (word.equals(&quot;for&quot;)) {</span>
<span class="nc" id="L1174">            cat = changeBaseCat(cat, &quot;IN&quot;);</span>
          }
<span class="nc bnc" id="L1176" title="All 2 branches missed.">        } else if (baseCat.equals(&quot;RP&quot;)) {</span>
<span class="nc bnc" id="L1177" title="All 2 branches missed.">          if (word.equals(&quot;for&quot;)) {</span>
<span class="nc" id="L1178">            cat = changeBaseCat(cat, &quot;IN&quot;);</span>
          }
<span class="nc bnc" id="L1180" title="All 2 branches missed.">        } else if (baseCat.equals(&quot;NN&quot;)) {</span>
<span class="nc bnc" id="L1181" title="All 6 branches missed.">          if (word.length() == 2 &amp;&amp; word.charAt(1) == '.' &amp;&amp; Character.isUpperCase(word.charAt(0))) {</span>
<span class="nc" id="L1182">            cat = changeBaseCat(cat, &quot;NNP&quot;);</span>
<span class="nc bnc" id="L1183" title="All 2 branches missed.">          } else if (word.equals(&quot;Lorillard&quot;)) {</span>
<span class="nc" id="L1184">            cat = changeBaseCat(cat, &quot;NNP&quot;);</span>
          }
<span class="nc bnc" id="L1186" title="All 4 branches missed.">        } else if (word.equals(&quot;for&quot;) || word.equals(&quot;at&quot;)) {</span>
<span class="nc bnc" id="L1187" title="All 2 branches missed.">          if ( ! baseCat.equals(&quot;IN&quot;)) {</span>
            // only non-prepositional taggings are mistaken
<span class="nc" id="L1189">            cat = changeBaseCat(cat, &quot;IN&quot;);</span>
          }
<span class="nc bnc" id="L1191" title="All 4 branches missed.">        } else if (word.equalsIgnoreCase(&quot;and&quot;) &amp;&amp; ! baseCat.equals(&quot;CC&quot;)) {</span>
<span class="nc" id="L1192">          cat = changeBaseCat(cat, &quot;CC&quot;);</span>
<span class="nc bnc" id="L1193" title="All 2 branches missed.">        } else if (word.equals(&quot;ago&quot;)) {</span>
<span class="nc bnc" id="L1194" title="All 2 branches missed.">          if ( ! baseCat.equals(&quot;RB&quot;)) {</span>
<span class="nc" id="L1195">            cat = changeBaseCat(cat, &quot;RB&quot;);</span>
          }
        }
        // put correct value into baseCat for later processing!
<span class="nc" id="L1199">        baseCat = tlp.basicCategory(cat);</span>
      }
<span class="nc bnc" id="L1201" title="All 4 branches missed.">      if (englishTrain.makePPTOintoIN &gt; 0 &amp;&amp; baseCat.equals(&quot;TO&quot;)) {</span>
        // CONJP is for &quot;not to mention&quot;
<span class="nc bnc" id="L1203" title="All 4 branches missed.">        if ( ! (baseParentStr.equals(&quot;VP&quot;) || baseParentStr.equals(&quot;CONJP&quot;) ||</span>
<span class="nc bnc" id="L1204" title="All 2 branches missed.">                baseParentStr.startsWith(&quot;S&quot;))) {</span>
<span class="nc bnc" id="L1205" title="All 2 branches missed.">          if (englishTrain.makePPTOintoIN == 1) {</span>
<span class="nc" id="L1206">            cat = changeBaseCat(cat, &quot;IN&quot;);</span>
          } else {
<span class="nc" id="L1208">            cat = cat + &quot;-IN&quot;;</span>
          }
        }
      }
<span class="nc bnc" id="L1212" title="All 4 branches missed.">      if (englishTrain.splitIN == 5 &amp;&amp; baseCat.equals(&quot;TO&quot;)) {</span>
<span class="nc bnc" id="L1213" title="All 6 branches missed.">        if (grandParentStr.charAt(0) == 'N' &amp;&amp; (parentStr.charAt(0) == 'P' || parentStr.charAt(0) == 'A')) {</span>
          // noun postmodifier PP (or so-called ADVP like &quot;outside India&quot;)
<span class="nc" id="L1215">          cat = changeBaseCat(cat, &quot;IN&quot;) + &quot;-N&quot;;</span>
        }
      }
<span class="nc bnc" id="L1218" title="All 6 branches missed.">      if (englishTrain.splitIN == 1 &amp;&amp; baseCat.equals(&quot;IN&quot;) &amp;&amp; parentStr.charAt(0) == 'S') {</span>
<span class="nc" id="L1219">        cat = cat + &quot;^S&quot;;</span>
<span class="nc bnc" id="L1220" title="All 4 branches missed.">      } else if (englishTrain.splitIN == 2 &amp;&amp; baseCat.equals(&quot;IN&quot;)) {</span>
<span class="nc bnc" id="L1221" title="All 2 branches missed.">        if (parentStr.charAt(0) == 'S') {</span>
<span class="nc" id="L1222">          cat = cat + &quot;^S&quot;;</span>
<span class="nc bnc" id="L1223" title="All 2 branches missed.">        } else if (grandParentStr.charAt(0) == 'N') {</span>
<span class="nc" id="L1224">          cat = cat + &quot;^N&quot;;</span>
        }
<span class="nc bnc" id="L1226" title="All 4 branches missed.">      } else if (englishTrain.splitIN == 3 &amp;&amp; baseCat.equals(&quot;IN&quot;)) {</span>
        // 6 classes seems good!
        // but have played with joining first two, splitting out ADJP/ADVP,
        // and joining two SC cases
<span class="nc bnc" id="L1230" title="All 6 branches missed.">        if (grandParentStr.charAt(0) == 'N' &amp;&amp; (parentStr.charAt(0) == 'P' || parentStr.charAt(0) == 'A')) {</span>
          // noun postmodifier PP (or so-called ADVP like &quot;outside India&quot;)
<span class="nc" id="L1232">          cat = cat + &quot;-N&quot;;</span>
<span class="nc bnc" id="L1233" title="All 6 branches missed.">        } else if (parentStr.charAt(0) == 'Q' &amp;&amp; (grandParentStr.charAt(0) == 'N' || grandParentStr.startsWith(&quot;ADJP&quot;))) {</span>
          // about, than, between, etc. in a QP preceding head of NP
<span class="nc" id="L1235">          cat = cat + &quot;-Q&quot;;</span>
<span class="nc bnc" id="L1236" title="All 2 branches missed.">        } else if (grandParentStr.equals(&quot;S&quot;)) {</span>
          // the distinction here shouldn't matter given parent annotation!
<span class="nc bnc" id="L1238" title="All 2 branches missed.">          if (baseParentStr.equals(&quot;SBAR&quot;)) {</span>
            // sentential subordinating conj: although, if, until, as, while
<span class="nc" id="L1240">            cat = cat + &quot;-SCC&quot;;</span>
          } else {
            // PP adverbial clause: among, in, for, after
<span class="nc" id="L1243">            cat = cat + &quot;-SC&quot;;</span>
          }
<span class="nc bnc" id="L1245" title="All 4 branches missed.">        } else if (baseParentStr.equals(&quot;SBAR&quot;) || baseParentStr.equals(&quot;WHNP&quot;)) {</span>
          // that-clause complement of VP or NP (or whether, if complement)
          // but also VP adverbial because, until, as, etc.
<span class="nc" id="L1248">          cat = cat + &quot;-T&quot;;</span>
        }
        // all the rest under VP, PP, ADJP, ADVP, etc. are basic case
<span class="nc bnc" id="L1251" title="All 6 branches missed.">      } else if (englishTrain.splitIN &gt;= 4 &amp;&amp; englishTrain.splitIN &lt;= 5 &amp;&amp; baseCat.equals(&quot;IN&quot;)) {</span>
<span class="nc bnc" id="L1252" title="All 6 branches missed.">        if (grandParentStr.charAt(0) == 'N' &amp;&amp; (parentStr.charAt(0) == 'P' || parentStr.charAt(0) == 'A')) {</span>
          // noun postmodifier PP (or so-called ADVP like &quot;outside India&quot;)
<span class="nc" id="L1254">          cat = cat + &quot;-N&quot;;</span>
<span class="nc bnc" id="L1255" title="All 6 branches missed.">        } else if (parentStr.charAt(0) == 'Q' &amp;&amp; (grandParentStr.charAt(0) == 'N' || grandParentStr.startsWith(&quot;ADJP&quot;))) {</span>
          // about, than, between, etc. in a QP preceding head of NP
<span class="nc" id="L1257">          cat = cat + &quot;-Q&quot;;</span>
<span class="nc bnc" id="L1258" title="All 2 branches missed.">        } else if (baseGrandParentStr.charAt(0) == 'S' &amp;&amp;</span>
<span class="nc bnc" id="L1259" title="All 2 branches missed.">                   ! baseGrandParentStr.equals(&quot;SBAR&quot;)) {</span>
          // the distinction here shouldn't matter given parent annotation!
<span class="nc bnc" id="L1261" title="All 2 branches missed.">          if (baseParentStr.equals(&quot;SBAR&quot;)) {</span>
            // sentential subordinating conj: although, if, until, as, while
<span class="nc" id="L1263">            cat = cat + &quot;-SCC&quot;;</span>
<span class="nc bnc" id="L1264" title="All 4 branches missed.">          } else if (!baseParentStr.equals(&quot;NP&quot;) &amp;&amp; !baseParentStr.equals(&quot;ADJP&quot;)) {</span>
            // PP adverbial clause: among, in, for, after
<span class="nc" id="L1266">            cat = cat + &quot;-SC&quot;;</span>
          }
<span class="nc bnc" id="L1268" title="All 6 branches missed.">        } else if (baseParentStr.equals(&quot;SBAR&quot;) || baseParentStr.equals(&quot;WHNP&quot;) || baseParentStr.equals(&quot;WHADVP&quot;)) {</span>
          // that-clause complement of VP or NP (or whether, if complement)
          // but also VP adverbial because, until, as, etc.
<span class="nc" id="L1271">          cat = cat + &quot;-T&quot;;</span>
        }
        // all the rest under VP, PP, ADJP, ADVP, etc. are basic case
<span class="nc bnc" id="L1274" title="All 4 branches missed.">      } else if (englishTrain.splitIN == 6 &amp;&amp; baseCat.equals(&quot;IN&quot;)) {</span>
<span class="nc bnc" id="L1275" title="All 4 branches missed.">        if (grandParentStr.charAt(0) == 'V' || grandParentStr.charAt(0) == 'A') {</span>
<span class="nc" id="L1276">          cat = cat + &quot;-V&quot;;</span>
<span class="nc bnc" id="L1277" title="All 6 branches missed.">        } else if (grandParentStr.charAt(0) == 'N' &amp;&amp; (parentStr.charAt(0) == 'P' || parentStr.charAt(0) == 'A')) {</span>
          // noun postmodifier PP (or so-called ADVP like &quot;outside India&quot;)
          // XXX experiment cat = cat + &quot;-N&quot;;
<span class="nc bnc" id="L1280" title="All 6 branches missed.">        } else if (parentStr.charAt(0) == 'Q' &amp;&amp; (grandParentStr.charAt(0) == 'N' || grandParentStr.startsWith(&quot;ADJP&quot;))) {</span>
          // about, than, between, etc. in a QP preceding head of NP
<span class="nc" id="L1282">          cat = cat + &quot;-Q&quot;;</span>
<span class="nc bnc" id="L1283" title="All 2 branches missed.">        } else if (baseGrandParentStr.charAt(0) == 'S' &amp;&amp;</span>
<span class="nc bnc" id="L1284" title="All 2 branches missed.">                   ! baseGrandParentStr.equals(&quot;SBAR&quot;)) {</span>
          // the distinction here shouldn't matter given parent annotation!
<span class="nc bnc" id="L1286" title="All 2 branches missed.">          if (baseParentStr.equals(&quot;SBAR&quot;)) {</span>
            // sentential subordinating conj: although, if, until, as, while
<span class="nc" id="L1288">            cat = cat + &quot;-SCC&quot;;</span>
<span class="nc bnc" id="L1289" title="All 4 branches missed.">          } else if (!baseParentStr.equals(&quot;NP&quot;) &amp;&amp; !baseParentStr.equals(&quot;ADJP&quot;)) {</span>
            // PP adverbial clause: among, in, for, after
<span class="nc" id="L1291">            cat = cat + &quot;-SC&quot;;</span>
          }
<span class="nc bnc" id="L1293" title="All 6 branches missed.">        } else if (baseParentStr.equals(&quot;SBAR&quot;) || baseParentStr.equals(&quot;WHNP&quot;) || baseParentStr.equals(&quot;WHADVP&quot;)) {</span>
          // that-clause complement of VP or NP (or whether, if complement)
          // but also VP adverbial because, until, as, etc.
<span class="nc" id="L1296">          cat = cat + &quot;-T&quot;;</span>
        }
        // all the rest under VP, PP, ADJP, ADVP, etc. are basic case
      }
<span class="nc bnc" id="L1300" title="All 4 branches missed.">      if (englishTrain.splitPercent &amp;&amp; word.equals(&quot;%&quot;)) {</span>
<span class="nc" id="L1301">        cat += &quot;-%&quot;;</span>
      }
<span class="nc bnc" id="L1303" title="All 4 branches missed.">      if (englishTrain.splitNNP &gt; 0 &amp;&amp; baseCat.startsWith(&quot;NNP&quot;)) {</span>
<span class="nc bnc" id="L1304" title="All 2 branches missed.">        if (englishTrain.splitNNP == 1) {</span>
<span class="nc bnc" id="L1305" title="All 2 branches missed.">          if (baseCat.equals(&quot;NNP&quot;)) {</span>
<span class="nc bnc" id="L1306" title="All 2 branches missed.">            if (parent.numChildren() == 1) {</span>
<span class="nc" id="L1307">              cat += &quot;-S&quot;;</span>
<span class="nc bnc" id="L1308" title="All 2 branches missed.">            } else if (parent.firstChild().equals(t)) {</span>
<span class="nc" id="L1309">              cat += &quot;-L&quot;;</span>
<span class="nc bnc" id="L1310" title="All 2 branches missed.">            } else if (parent.lastChild().equals(t)) {</span>
<span class="nc" id="L1311">              cat += &quot;-R&quot;;</span>
            } else {
<span class="nc" id="L1313">              cat += &quot;-I&quot;;</span>
            }
          }
<span class="nc bnc" id="L1316" title="All 2 branches missed.">        } else if (englishTrain.splitNNP == 2) {</span>
<span class="nc bnc" id="L1317" title="All 2 branches missed.">          if (word.matches(&quot;[A-Z]\\.?&quot;)) {</span>
<span class="nc" id="L1318">            cat = cat + &quot;-I&quot;;</span>
<span class="nc bnc" id="L1319" title="All 2 branches missed.">          } else if (firstOfSeveralNNP(parent, t)) {</span>
<span class="nc" id="L1320">            cat = cat + &quot;-B&quot;;</span>
<span class="nc bnc" id="L1321" title="All 2 branches missed.">          } else if (lastOfSeveralNNP(parent, t)) {</span>
<span class="nc" id="L1322">            cat = cat + &quot;-E&quot;;</span>
          }
        }
      }
<span class="nc bnc" id="L1326" title="All 2 branches missed.">      if (englishTrain.splitQuotes &amp;&amp;</span>
<span class="nc bnc" id="L1327" title="All 4 branches missed.">          (word.equals(&quot;'&quot;) || word.equals(&quot;`&quot;))) {</span>
<span class="nc" id="L1328">        cat += &quot;-SG&quot;;</span>
      }
<span class="nc bnc" id="L1330" title="All 4 branches missed.">      if (englishTrain.splitSFP &amp;&amp; baseTag.equals(&quot;.&quot;)) {</span>
<span class="nc bnc" id="L1331" title="All 2 branches missed.">        if (word.equals(&quot;?&quot;)) {</span>
<span class="nc" id="L1332">          cat += &quot;-QUES&quot;;</span>
<span class="nc bnc" id="L1333" title="All 2 branches missed.">        } else if (word.equals(&quot;!&quot;)) {</span>
<span class="nc" id="L1334">          cat += &quot;-EXCL&quot;;</span>
        }
      }
<span class="nc bnc" id="L1337" title="All 2 branches missed.">      if (englishTrain.tagRBGPA) {</span>
<span class="nc bnc" id="L1338" title="All 2 branches missed.">          if (baseCat.equals(&quot;RB&quot;)) {</span>
<span class="nc" id="L1339">              cat = cat + &quot;^&quot; + baseGrandParentStr;</span>
          }
      }
<span class="nc bnc" id="L1342" title="All 4 branches missed.">      if (englishTrain.joinPound &amp;&amp; baseCat.equals(&quot;#&quot;)) {</span>
<span class="nc" id="L1343">        cat = changeBaseCat(cat, &quot;$&quot;);</span>
      }
<span class="nc bnc" id="L1345" title="All 2 branches missed.">      if (englishTrain.joinNounTags) {</span>
<span class="nc bnc" id="L1346" title="All 2 branches missed.">        if (baseCat.equals(&quot;NNP&quot;)) {</span>
<span class="nc" id="L1347">          cat = changeBaseCat(cat, &quot;NN&quot;);</span>
<span class="nc bnc" id="L1348" title="All 2 branches missed.">        } else if (baseCat.equals(&quot;NNPS&quot;)) {</span>
<span class="nc" id="L1349">          cat = changeBaseCat(cat, &quot;NNS&quot;);</span>
        }
      }
<span class="nc bnc" id="L1352" title="All 4 branches missed.">      if (englishTrain.joinJJ &amp;&amp; cat.startsWith(&quot;JJ&quot;)) {</span>
<span class="nc" id="L1353">        cat = changeBaseCat(cat, &quot;JJ&quot;);</span>
      }
<span class="nc bnc" id="L1355" title="All 6 branches missed.">      if (englishTrain.splitPPJJ &amp;&amp; cat.startsWith(&quot;JJ&quot;) &amp;&amp; parentStr.startsWith(&quot;PP&quot;)) {</span>
<span class="nc" id="L1356">        cat = cat + &quot;^S&quot;;</span>
      }
<span class="nc bnc" id="L1358" title="All 10 branches missed.">      if (englishTrain.splitTRJJ &amp;&amp; cat.startsWith(&quot;JJ&quot;) &amp;&amp; (parentStr.startsWith(&quot;PP&quot;) || parentStr.startsWith(&quot;ADJP&quot;)) &amp;&amp; headFinder().determineHead(parent) == t) {</span>
        // look for NP right sister of head JJ -- if so transitive adjective
<span class="nc" id="L1360">        Tree[] kids = parent.children();</span>
<span class="nc" id="L1361">        boolean foundJJ = false;</span>
<span class="nc" id="L1362">        int i = 0;</span>
<span class="nc bnc" id="L1363" title="All 4 branches missed.">        for (; i &lt; kids.length &amp;&amp; !foundJJ; i++) {</span>
<span class="nc bnc" id="L1364" title="All 2 branches missed.">          if (kids[i].label().value().startsWith(&quot;JJ&quot;)) {</span>
<span class="nc" id="L1365">            foundJJ = true;</span>
          }
        }
<span class="nc bnc" id="L1368" title="All 2 branches missed.">        if (foundJJ) {</span>
<span class="nc bnc" id="L1369" title="All 2 branches missed.">          for (int j = i; j &lt; kids.length; j++) {</span>
<span class="nc bnc" id="L1370" title="All 2 branches missed.">            if (kids[j].label().value().startsWith(&quot;NP&quot;)) {</span>
<span class="nc" id="L1371">              cat = cat + &quot;^T&quot;;</span>
<span class="nc" id="L1372">              break;</span>
            }
          }
        }
      }
<span class="nc bnc" id="L1377" title="All 10 branches missed.">      if (englishTrain.splitJJCOMP &amp;&amp; cat.startsWith(&quot;JJ&quot;) &amp;&amp; (parentStr.startsWith(&quot;PP&quot;) || parentStr.startsWith(&quot;ADJP&quot;)) &amp;&amp; headFinder().determineHead(parent) == t) {</span>
<span class="nc" id="L1378">        Tree[] kids = parent.children();</span>
<span class="nc" id="L1379">        int i = 0;</span>
<span class="nc bnc" id="L1380" title="All 4 branches missed.">        for (boolean foundJJ = false; i &lt; kids.length &amp;&amp; !foundJJ; i++) {</span>
<span class="nc bnc" id="L1381" title="All 2 branches missed.">          if (kids[i].label().value().startsWith(&quot;JJ&quot;)) {</span>
<span class="nc" id="L1382">            foundJJ = true;</span>
          }
        }
<span class="nc bnc" id="L1385" title="All 2 branches missed.">        for (int j = i; j &lt; kids.length; j++) {</span>
<span class="nc" id="L1386">          String kid = tlp.basicCategory(kids[j].label().value());</span>
<span class="nc bnc" id="L1387" title="All 8 branches missed.">          if (&quot;S&quot;.equals(kid) || &quot;SBAR&quot;.equals(kid) || &quot;PP&quot;.equals(kid) || &quot;NP&quot;.equals(kid)) {</span>
            // there's a complement.
<span class="nc" id="L1389">            cat = cat + &quot;^CMPL&quot;;</span>
<span class="nc" id="L1390">            break;</span>
          }
        }
      }
<span class="nc bnc" id="L1394" title="All 2 branches missed.">      if (englishTrain.splitMoreLess) {</span>
<span class="nc" id="L1395">        char ch = cat.charAt(0);</span>
<span class="nc bnc" id="L1396" title="All 6 branches missed.">        if (ch == 'R' || ch == 'J' || ch == 'C') {</span>
          // adverbs, adjectives and coordination -- what you'd expect
<span class="nc bnc" id="L1398" title="All 8 branches missed.">          if (word.equalsIgnoreCase(&quot;more&quot;) || word.equalsIgnoreCase(&quot;most&quot;) || word.equalsIgnoreCase(&quot;less&quot;) || word.equalsIgnoreCase(&quot;least&quot;)) {</span>
<span class="nc" id="L1399">            cat = cat + &quot;-ML&quot;;</span>
          }
        }
      }
<span class="nc bnc" id="L1403" title="All 4 branches missed.">      if (englishTrain.unaryDT &amp;&amp; cat.startsWith(&quot;DT&quot;)) {</span>
<span class="nc bnc" id="L1404" title="All 2 branches missed.">        if (parent.children().length == 1) {</span>
<span class="nc" id="L1405">          cat = cat + &quot;^U&quot;;</span>
        }
      }
<span class="nc bnc" id="L1408" title="All 4 branches missed.">      if (englishTrain.unaryRB &amp;&amp; cat.startsWith(&quot;RB&quot;)) {</span>
<span class="nc bnc" id="L1409" title="All 2 branches missed.">        if (parent.children().length == 1) {</span>
<span class="nc" id="L1410">          cat = cat + &quot;^U&quot;;</span>
        }
      }
<span class="nc bnc" id="L1413" title="All 4 branches missed.">      if (englishTrain.markReflexivePRP &amp;&amp; cat.startsWith(&quot;PRP&quot;)) {</span>
<span class="nc bnc" id="L1414" title="All 18 branches missed.">        if (word.equalsIgnoreCase(&quot;itself&quot;) || word.equalsIgnoreCase(&quot;themselves&quot;) || word.equalsIgnoreCase(&quot;himself&quot;) || word.equalsIgnoreCase(&quot;herself&quot;) || word.equalsIgnoreCase(&quot;ourselves&quot;) || word.equalsIgnoreCase(&quot;yourself&quot;) || word.equalsIgnoreCase(&quot;yourselves&quot;) || word.equalsIgnoreCase(&quot;myself&quot;) || word.equalsIgnoreCase(&quot;thyself&quot;)) {</span>
<span class="nc" id="L1415">          cat += &quot;-SE&quot;;</span>
        }
      }
<span class="nc bnc" id="L1418" title="All 4 branches missed.">      if (englishTrain.unaryPRP &amp;&amp; cat.startsWith(&quot;PRP&quot;)) {</span>
<span class="nc bnc" id="L1419" title="All 2 branches missed.">        if (parent.children().length == 1) {</span>
<span class="nc" id="L1420">          cat = cat + &quot;^U&quot;;</span>
        }
      }
<span class="nc bnc" id="L1423" title="All 4 branches missed.">      if (englishTrain.unaryIN &amp;&amp; cat.startsWith(&quot;IN&quot;)) {</span>
<span class="nc bnc" id="L1424" title="All 2 branches missed.">        if (parent.children().length == 1) {</span>
<span class="nc" id="L1425">          cat = cat + &quot;^U&quot;;</span>
        }
      }
<span class="nc bnc" id="L1428" title="All 4 branches missed.">      if (englishTrain.splitCC &gt; 0 &amp;&amp; baseCat.equals(&quot;CC&quot;)) {</span>
<span class="nc bnc" id="L1429" title="All 6 branches missed.">        if (englishTrain.splitCC == 1 &amp;&amp; (word.equals(&quot;and&quot;) || word.equals(&quot;or&quot;))) {</span>
<span class="nc" id="L1430">          cat = cat + &quot;-C&quot;;</span>
<span class="nc bnc" id="L1431" title="All 2 branches missed.">        } else if (englishTrain.splitCC == 2) {</span>
<span class="nc bnc" id="L1432" title="All 2 branches missed.">          if (word.equalsIgnoreCase(&quot;but&quot;)) {</span>
<span class="nc" id="L1433">            cat = cat + &quot;-B&quot;;</span>
<span class="nc bnc" id="L1434" title="All 2 branches missed.">          } else if (word.equals(&quot;&amp;&quot;)) {</span>
<span class="nc" id="L1435">            cat = cat + &quot;-A&quot;;</span>
          }
<span class="nc bnc" id="L1437" title="All 4 branches missed.">        } else if (englishTrain.splitCC == 3 &amp;&amp; word.equalsIgnoreCase(&quot;and&quot;)) {</span>
<span class="nc" id="L1438">          cat = cat + &quot;-A&quot;;</span>
        }
      }
<span class="nc bnc" id="L1441" title="All 10 branches missed.">      if (englishTrain.splitNOT &amp;&amp; baseCat.equals(&quot;RB&quot;) &amp;&amp; (word.equalsIgnoreCase(&quot;n't&quot;) || word.equalsIgnoreCase(&quot;not&quot;) || word.equalsIgnoreCase(&quot;nt&quot;))) {</span>
<span class="nc" id="L1442">        cat = cat + &quot;-N&quot;;</span>
<span class="nc bnc" id="L1443" title="All 10 branches missed.">      } else if (englishTrain.splitRB &amp;&amp; baseCat.equals(&quot;RB&quot;) &amp;&amp; (baseParentStr.equals(&quot;NP&quot;) || baseParentStr.equals(&quot;QP&quot;) || baseParentStr.equals(&quot;ADJP&quot;))) {</span>
<span class="nc" id="L1444">        cat = cat + &quot;^M&quot;;</span>
      }
<span class="nc bnc" id="L1446" title="All 14 branches missed.">      if (englishTrain.splitAux &gt; 1 &amp;&amp; (baseCat.equals(&quot;VBZ&quot;) || baseCat.equals(&quot;VBP&quot;) || baseCat.equals(&quot;VBD&quot;) || baseCat.equals(&quot;VBN&quot;) || baseCat.equals(&quot;VBG&quot;) || baseCat.equals(&quot;VB&quot;))) {</span>
<span class="nc bnc" id="L1447" title="All 4 branches missed.">        if (word.equalsIgnoreCase(&quot;'s&quot;) || word.equalsIgnoreCase(&quot;s&quot;)) {  // a few times the apostrophe is missing!</span>
<span class="nc" id="L1448">          Tree[] sisters = parent.children();</span>
<span class="nc" id="L1449">          int i = 0;</span>
<span class="nc bnc" id="L1450" title="All 4 branches missed.">          for (boolean foundMe = false; i &lt; sisters.length &amp;&amp; !foundMe; i++) {</span>
<span class="nc bnc" id="L1451" title="All 2 branches missed.">            if (sisters[i].label().value().startsWith(&quot;VBZ&quot;)) {</span>
<span class="nc" id="L1452">              foundMe = true;</span>
            }
          }
<span class="nc" id="L1455">          boolean annotateHave = false;  // VBD counts as an erroneous VBN!</span>
<span class="nc bnc" id="L1456" title="All 2 branches missed.">          for (int j = i; j &lt; sisters.length; j++) {</span>
<span class="nc bnc" id="L1457" title="All 2 branches missed.">            if (sisters[j].label().value().startsWith(&quot;VP&quot;)) {</span>
<span class="nc bnc" id="L1458" title="All 2 branches missed.">              for (Tree kid : sisters[j].children()) {</span>
<span class="nc bnc" id="L1459" title="All 4 branches missed.">                if (kid.label().value().startsWith(&quot;VBN&quot;) || kid.label().value().startsWith(&quot;VBD&quot;)) {</span>
<span class="nc" id="L1460">                  annotateHave = true;</span>
                }
              }
            }
          }
<span class="nc bnc" id="L1465" title="All 2 branches missed.">          if (annotateHave) {</span>
<span class="nc" id="L1466">            cat = cat + &quot;-HV&quot;;</span>
            // System.out.println(&quot;Went with HAVE for &quot; + parent);
          } else {
<span class="nc" id="L1469">            cat = cat + &quot;-BE&quot;;</span>
          }
<span class="nc" id="L1471">        } else {</span>
<span class="nc bnc" id="L1472" title="All 22 branches missed.">          if (word.equalsIgnoreCase(&quot;am&quot;) || word.equalsIgnoreCase(&quot;is&quot;) || word.equalsIgnoreCase(&quot;are&quot;) || word.equalsIgnoreCase(&quot;was&quot;) || word.equalsIgnoreCase(&quot;were&quot;) || word.equalsIgnoreCase(&quot;'m&quot;) || word.equalsIgnoreCase(&quot;'re&quot;) || word.equalsIgnoreCase(&quot;be&quot;) || word.equalsIgnoreCase(&quot;being&quot;) || word.equalsIgnoreCase(&quot;been&quot;) || word.equalsIgnoreCase(&quot;ai&quot;)) { // allow &quot;ai n't&quot;</span>
<span class="nc" id="L1473">            cat = cat + &quot;-BE&quot;;</span>
<span class="nc bnc" id="L1474" title="All 12 branches missed.">          } else if (word.equalsIgnoreCase(&quot;have&quot;) || word.equalsIgnoreCase(&quot;'ve&quot;) || word.equalsIgnoreCase(&quot;having&quot;) || word.equalsIgnoreCase(&quot;has&quot;) || word.equalsIgnoreCase(&quot;had&quot;) || word.equalsIgnoreCase(&quot;'d&quot;)) {</span>
<span class="nc" id="L1475">            cat = cat + &quot;-HV&quot;;</span>
<span class="nc bnc" id="L1476" title="All 2 branches missed.">          } else if (englishTrain.splitAux &gt;= 3 &amp;&amp;</span>
<span class="nc bnc" id="L1477" title="All 10 branches missed.">                     (word.equalsIgnoreCase(&quot;do&quot;) || word.equalsIgnoreCase(&quot;did&quot;) || word.equalsIgnoreCase(&quot;does&quot;) || word.equalsIgnoreCase(&quot;done&quot;) || word.equalsIgnoreCase(&quot;doing&quot;))) {</span>
            // both DO and HELP take VB form complement VP
<span class="nc" id="L1479">            cat = cat + &quot;-DO&quot;;</span>
<span class="nc bnc" id="L1480" title="All 2 branches missed.">          } else if (englishTrain.splitAux &gt;= 4 &amp;&amp;</span>
<span class="nc bnc" id="L1481" title="All 8 branches missed.">                     (word.equalsIgnoreCase(&quot;help&quot;) || word.equalsIgnoreCase(&quot;helps&quot;) || word.equalsIgnoreCase(&quot;helped&quot;) || word.equalsIgnoreCase(&quot;helping&quot;))) {</span>
            // both DO and HELP take VB form complement VP
<span class="nc" id="L1483">            cat = cat + &quot;-DO&quot;;</span>
<span class="nc bnc" id="L1484" title="All 2 branches missed.">          } else if (englishTrain.splitAux &gt;= 5 &amp;&amp;</span>
<span class="nc bnc" id="L1485" title="All 6 branches missed.">                     (word.equalsIgnoreCase(&quot;let&quot;) || word.equalsIgnoreCase(&quot;lets&quot;) || word.equalsIgnoreCase(&quot;letting&quot;))) {</span>
            // LET also takes VB form complement VP
<span class="nc" id="L1487">            cat = cat + &quot;-DO&quot;;</span>
<span class="nc bnc" id="L1488" title="All 2 branches missed.">          } else if (englishTrain.splitAux &gt;= 6 &amp;&amp;</span>
<span class="nc bnc" id="L1489" title="All 8 branches missed.">                     (word.equalsIgnoreCase(&quot;make&quot;) || word.equalsIgnoreCase(&quot;makes&quot;) || word.equalsIgnoreCase(&quot;making&quot;) || word.equalsIgnoreCase(&quot;made&quot;))) {</span>
            // MAKE can also take VB form complement VP
<span class="nc" id="L1491">            cat = cat + &quot;-DO&quot;;</span>
<span class="nc bnc" id="L1492" title="All 2 branches missed.">          } else if (englishTrain.splitAux &gt;= 7 &amp;&amp;</span>
<span class="nc bnc" id="L1493" title="All 18 branches missed.">                     (word.equalsIgnoreCase(&quot;watch&quot;) || word.equalsIgnoreCase(&quot;watches&quot;) || word.equalsIgnoreCase(&quot;watching&quot;) || word.equalsIgnoreCase(&quot;watched&quot;) || word.equalsIgnoreCase(&quot;see&quot;) || word.equalsIgnoreCase(&quot;sees&quot;) || word.equalsIgnoreCase(&quot;seeing&quot;) || word.equalsIgnoreCase(&quot;saw&quot;) || word.equalsIgnoreCase(&quot;seen&quot;))) {</span>
            // WATCH, SEE can also take VB form complement VP
<span class="nc" id="L1495">            cat = cat + &quot;-DO&quot;;</span>
<span class="nc bnc" id="L1496" title="All 2 branches missed.">          } else if (englishTrain.splitAux &gt;= 8 &amp;&amp;</span>
<span class="nc bnc" id="L1497" title="All 4 branches missed.">                     (word.equalsIgnoreCase(&quot;go&quot;) || word.equalsIgnoreCase(&quot;come&quot;))) {</span>
            // go, come, but not inflections can also take VB form complement VP
<span class="nc" id="L1499">            cat = cat + &quot;-DO&quot;;</span>
<span class="nc bnc" id="L1500" title="All 2 branches missed.">          } else if (englishTrain.splitAux &gt;= 9 &amp;&amp;</span>
<span class="nc bnc" id="L1501" title="All 10 branches missed.">                     (word.equalsIgnoreCase(&quot;get&quot;) || word.equalsIgnoreCase(&quot;gets&quot;) || word.equalsIgnoreCase(&quot;getting&quot;) || word.equalsIgnoreCase(&quot;got&quot;) || word.equalsIgnoreCase(&quot;gotten&quot;))) {</span>
            // GET also takes a VBN form complement VP
<span class="nc" id="L1503">            cat = cat + &quot;-BE&quot;;</span>
          }
        }
<span class="nc bnc" id="L1506" title="All 14 branches missed.">      } else if (englishTrain.splitAux &gt; 0 &amp;&amp; (baseCat.equals(&quot;VBZ&quot;) || baseCat.equals(&quot;VBP&quot;) || baseCat.equals(&quot;VBD&quot;) || baseCat.equals(&quot;VBN&quot;) || baseCat.equals(&quot;VBG&quot;) || baseCat.equals(&quot;VB&quot;))) {</span>
<span class="nc bnc" id="L1507" title="All 16 branches missed.">        if (word.equalsIgnoreCase(&quot;is&quot;) || word.equalsIgnoreCase(&quot;am&quot;) || word.equalsIgnoreCase(&quot;are&quot;) || word.equalsIgnoreCase(&quot;was&quot;) || word.equalsIgnoreCase(&quot;were&quot;) || word.equalsIgnoreCase(&quot;'m&quot;) || word.equalsIgnoreCase(&quot;'re&quot;) || word.equalsIgnoreCase(&quot;'s&quot;) || // imperfect -- could be (ha)s</span>
<span class="nc bnc" id="L1508" title="All 6 branches missed.">                word.equalsIgnoreCase(&quot;being&quot;) || word.equalsIgnoreCase(&quot;be&quot;) || word.equalsIgnoreCase(&quot;been&quot;)) {</span>
<span class="nc" id="L1509">          cat = cat + &quot;-BE&quot;;</span>
        }
<span class="nc bnc" id="L1511" title="All 12 branches missed.">        if (word.equalsIgnoreCase(&quot;have&quot;) || word.equalsIgnoreCase(&quot;'ve&quot;) || word.equalsIgnoreCase(&quot;having&quot;) || word.equalsIgnoreCase(&quot;has&quot;) || word.equalsIgnoreCase(&quot;had&quot;) || word.equalsIgnoreCase(&quot;'d&quot;)) {</span>
<span class="nc" id="L1512">          cat = cat + &quot;-HV&quot;;</span>
        }
      }
<span class="nc bnc" id="L1515" title="All 2 branches missed.">      if (englishTrain.collapseWhCategories != 0) {</span>
<span class="nc bnc" id="L1516" title="All 2 branches missed.">        if ((englishTrain.collapseWhCategories &amp; 1) !=0) {</span>
<span class="nc" id="L1517">          cat = cat.replaceAll(&quot;WH(NP|PP|ADVP|ADJP)&quot;, &quot;$1&quot;);</span>
        }
<span class="nc bnc" id="L1519" title="All 2 branches missed.">        if ((englishTrain.collapseWhCategories &amp; 2) != 0) {</span>
<span class="nc" id="L1520">          cat = cat.replaceAll(&quot;WP&quot;, &quot;PRP&quot;); // does both WP and WP$ !!</span>
<span class="nc" id="L1521">          cat = cat.replaceAll(&quot;WDT&quot;, &quot;DT&quot;);</span>
<span class="nc" id="L1522">          cat = cat.replaceAll(&quot;WRB&quot;, &quot;RB&quot;);</span>
        }
<span class="nc bnc" id="L1524" title="All 2 branches missed.">        if ((englishTrain.collapseWhCategories &amp; 4) !=0) {</span>
<span class="nc" id="L1525">          cat = cat.replaceAll(&quot;WH(PP|ADVP|ADJP)&quot;, &quot;$1&quot;); // don't do NP, so it is preserved! Crucial.</span>
        }
      }
<span class="nc bnc" id="L1528" title="All 4 branches missed.">      if (englishTrain.markDitransV &gt; 0 &amp;&amp; cat.startsWith(&quot;VB&quot;)) {</span>
<span class="nc" id="L1529">        cat += ditrans(parent);</span>
<span class="nc bnc" id="L1530" title="All 4 branches missed.">      } else if (englishTrain.vpSubCat &amp;&amp; cat.startsWith(&quot;VB&quot;)) {</span>
<span class="nc" id="L1531">        cat = cat + subCatify(parent);</span>
      }
      // VITAL: update tag to be same as cat for when new node is created below
<span class="nc" id="L1534">      tag = cat;</span>
    } else {                       // that is, if (t.isPhrasal())
<span class="nc" id="L1536">      Tree[] kids = t.children();</span>

<span class="nc bnc" id="L1538" title="All 2 branches missed.">      if (baseCat.equals(&quot;VP&quot;)) {</span>
<span class="nc bnc" id="L1539" title="All 2 branches missed.">        if (englishTrain.gpaRootVP) {</span>
<span class="nc bnc" id="L1540" title="All 2 branches missed.">          if (tlp.isStartSymbol(baseGrandParentStr)) {</span>
<span class="nc" id="L1541">            cat = cat + &quot;~ROOT&quot;;</span>
          }
        }
<span class="nc bnc" id="L1544" title="All 2 branches missed.">        if (englishTrain.splitVPNPAgr) {</span>
          // don't split on weirdo categories!
          // but do preserve agreement distinctions
          // note MD is like VBD -- any subject person/number okay
<span class="nc bnc" id="L1548" title="All 28 branches missed.">          switch (baseTag) {</span>
            case &quot;VBD&quot;:
            case &quot;MD&quot;:
<span class="nc" id="L1551">              cat = cat + &quot;-VBF&quot;;</span>
<span class="nc" id="L1552">              break;</span>
            case &quot;VBZ&quot;:
            case &quot;TO&quot;:
            case &quot;VBG&quot;:
            case &quot;VBP&quot;:
            case &quot;VBN&quot;:
            case &quot;VB&quot;:
<span class="nc" id="L1559">              cat = cat + &quot;-&quot; + baseTag;</span>
<span class="nc" id="L1560">              break;</span>
            default:
<span class="nc" id="L1562">              log.info(&quot;XXXX Head of &quot; + t + &quot; is &quot; + word + &quot;/&quot; + baseTag);</span>
<span class="nc" id="L1563">              break;</span>
          }
<span class="nc bnc" id="L1565" title="All 4 branches missed.">        } else if (englishTrain.splitVP == 3 || englishTrain.splitVP == 4) {</span>
          // don't split on weirdo categories but deduce
<span class="nc bnc" id="L1567" title="All 8 branches missed.">          if (baseTag.equals(&quot;VBZ&quot;) || baseTag.equals(&quot;VBD&quot;) || baseTag.equals(&quot;VBP&quot;) || baseTag.equals(&quot;MD&quot;)) {</span>
<span class="nc" id="L1568">            cat = cat + &quot;-VBF&quot;;</span>
<span class="nc bnc" id="L1569" title="All 8 branches missed.">          } else if (baseTag.equals(&quot;TO&quot;) || baseTag.equals(&quot;VBG&quot;) || baseTag.equals(&quot;VBN&quot;) || baseTag.equals(&quot;VB&quot;)) {</span>
<span class="nc" id="L1570">            cat = cat + &quot;-&quot; + baseTag;</span>
<span class="nc bnc" id="L1571" title="All 2 branches missed.">          } else if (englishTrain.splitVP == 4) {</span>
<span class="nc" id="L1572">            String dTag = deduceTag(word);</span>
<span class="nc" id="L1573">            cat = cat + &quot;-&quot; + dTag;</span>
<span class="nc" id="L1574">          }</span>
<span class="nc bnc" id="L1575" title="All 2 branches missed.">        } else if (englishTrain.splitVP == 2) {</span>
<span class="nc bnc" id="L1576" title="All 8 branches missed.">          if (baseTag.equals(&quot;VBZ&quot;) || baseTag.equals(&quot;VBD&quot;) || baseTag.equals(&quot;VBP&quot;) || baseTag.equals(&quot;MD&quot;)) {</span>
<span class="nc" id="L1577">            cat = cat + &quot;-VBF&quot;;</span>
          } else {
<span class="nc" id="L1579">            cat = cat + &quot;-&quot; + baseTag;</span>
          }
<span class="nc bnc" id="L1581" title="All 2 branches missed.">        } else if (englishTrain.splitVP == 1) {</span>
<span class="nc" id="L1582">          cat = cat + &quot;-&quot; + baseTag;</span>
        }
      }
<span class="nc bnc" id="L1585" title="All 2 branches missed.">      if (englishTrain.dominatesV &gt; 0) {</span>
<span class="nc bnc" id="L1586" title="All 2 branches missed.">        if (englishTrain.dominatesV == 2) {</span>
<span class="nc bnc" id="L1587" title="All 2 branches missed.">          if (hasClausalV(t)) {</span>
<span class="nc" id="L1588">            cat = cat + &quot;-v&quot;;</span>
          }
<span class="nc bnc" id="L1590" title="All 2 branches missed.">        } else if (englishTrain.dominatesV == 3) {</span>
<span class="nc bnc" id="L1591" title="All 2 branches missed.">          if (hasV(t.preTerminalYield()) &amp;&amp;</span>
<span class="nc bnc" id="L1592" title="All 4 branches missed.">                ! baseCat.equals(&quot;WHPP&quot;) &amp;&amp; ! baseCat.equals(&quot;RRC&quot;) &amp;&amp;</span>
<span class="nc bnc" id="L1593" title="All 4 branches missed.">                ! baseCat.equals(&quot;QP&quot;) &amp;&amp; ! baseCat.equals(&quot;PRT&quot;)) {</span>
<span class="nc" id="L1594">            cat = cat + &quot;-v&quot;;</span>
          }
        } else {
<span class="nc bnc" id="L1597" title="All 2 branches missed.">          if (hasV(t.preTerminalYield())) {</span>
<span class="nc" id="L1598">            cat = cat + &quot;-v&quot;;</span>
          }
        }
      }
<span class="nc bnc" id="L1602" title="All 4 branches missed.">      if (englishTrain.dominatesI &amp;&amp; hasI(t.preTerminalYield())) {</span>
<span class="nc" id="L1603">        cat = cat + &quot;-i&quot;;</span>
      }
<span class="nc bnc" id="L1605" title="All 4 branches missed.">      if (englishTrain.dominatesC &amp;&amp; hasC(t.preTerminalYield())) {</span>
<span class="nc" id="L1606">        cat = cat + &quot;-c&quot;;</span>
      }
<span class="nc bnc" id="L1608" title="All 4 branches missed.">      if (englishTrain.splitNPpercent &gt; 0 &amp;&amp; word.equals(&quot;%&quot;)) {</span>
<span class="nc bnc" id="L1609" title="All 4 branches missed.">        if (baseCat.equals(&quot;NP&quot;) ||</span>
<span class="nc bnc" id="L1610" title="All 4 branches missed.">            englishTrain.splitNPpercent &gt; 1 &amp;&amp; baseCat.equals(&quot;ADJP&quot;) ||</span>
<span class="nc bnc" id="L1611" title="All 4 branches missed.">            englishTrain.splitNPpercent &gt; 2 &amp;&amp; baseCat.equals(&quot;QP&quot;) ||</span>
            englishTrain.splitNPpercent &gt; 3) {
<span class="nc" id="L1613">          cat += &quot;-%&quot;;</span>
        }
      }
<span class="nc bnc" id="L1616" title="All 4 branches missed.">      if (englishTrain.splitNPPRP &amp;&amp; baseTag.equals(&quot;PRP&quot;)) {</span>
<span class="nc" id="L1617">        cat += &quot;-PRON&quot;;</span>
      }
<span class="nc bnc" id="L1619" title="All 4 branches missed.">      if (englishTrain.splitSbar &gt; 0 &amp;&amp; baseCat.equals(&quot;SBAR&quot;)) {</span>
<span class="nc" id="L1620">        boolean foundIn = false;</span>
<span class="nc" id="L1621">        boolean foundOrder = false;</span>
<span class="nc" id="L1622">        boolean infinitive = baseTag.equals(&quot;TO&quot;);</span>
<span class="nc bnc" id="L1623" title="All 2 branches missed.">        for (Tree kid : kids) {</span>
<span class="nc bnc" id="L1624" title="All 4 branches missed.">          if (kid.isPreTerminal() &amp;&amp; kid.children()[0].value().equalsIgnoreCase(&quot;in&quot;)) {</span>
<span class="nc" id="L1625">            foundIn = true;</span>
          }
<span class="nc bnc" id="L1627" title="All 4 branches missed.">          if (kid.isPreTerminal() &amp;&amp; kid.children()[0].value().equalsIgnoreCase(&quot;order&quot;)) {</span>
<span class="nc" id="L1628">            foundOrder = true;</span>
          }
        }
<span class="nc bnc" id="L1631" title="All 4 branches missed.">        if (englishTrain.splitSbar &gt; 1 &amp;&amp; infinitive) {</span>
<span class="nc" id="L1632">          cat = cat + &quot;-INF&quot;;</span>
        }
<span class="nc bnc" id="L1634" title="All 8 branches missed.">        if ((englishTrain.splitSbar == 1 || englishTrain.splitSbar == 3) &amp;&amp;</span>
            foundIn &amp;&amp; foundOrder) {
<span class="nc" id="L1636">          cat = cat + &quot;-PURP&quot;;</span>
        }
      }
<span class="nc bnc" id="L1639" title="All 2 branches missed.">      if (englishTrain.splitNPNNP &gt; 0) {</span>
<span class="nc bnc" id="L1640" title="All 6 branches missed.">        if (englishTrain.splitNPNNP == 1 &amp;&amp; baseCat.equals(&quot;NP&quot;) &amp;&amp; baseTag.equals(&quot;NNP&quot;)) {</span>
<span class="nc" id="L1641">          cat = cat + &quot;-NNP&quot;;</span>
<span class="nc bnc" id="L1642" title="All 6 branches missed.">        } else if (englishTrain.splitNPNNP == 2 &amp;&amp; baseCat.equals(&quot;NP&quot;) &amp;&amp; baseTag.startsWith(&quot;NNP&quot;)) {</span>
<span class="nc" id="L1643">          cat = cat + &quot;-NNP&quot;;</span>
<span class="nc bnc" id="L1644" title="All 4 branches missed.">        } else if (englishTrain.splitNPNNP == 3 &amp;&amp; baseCat.equals(&quot;NP&quot;)) {</span>
<span class="nc" id="L1645">          boolean split = false;</span>
<span class="nc bnc" id="L1646" title="All 2 branches missed.">          for (Tree kid : kids) {</span>
<span class="nc bnc" id="L1647" title="All 2 branches missed.">            if (kid.value().startsWith(&quot;NNP&quot;)) {</span>
<span class="nc" id="L1648">              split = true;</span>
<span class="nc" id="L1649">              break;</span>
            }
          }
<span class="nc bnc" id="L1652" title="All 2 branches missed.">          if (split) {</span>
<span class="nc" id="L1653">            cat = cat + &quot;-NNP&quot;;</span>
          }
        }
      }
<span class="nc bnc" id="L1657" title="All 2 branches missed.">      if (englishTrain.collapseWhCategories != 0) {</span>
<span class="nc bnc" id="L1658" title="All 2 branches missed.">        if ((englishTrain.collapseWhCategories &amp; 1) !=0) {</span>
<span class="nc" id="L1659">          cat = cat.replaceAll(&quot;WH(NP|PP|ADVP|ADJP)&quot;, &quot;$1&quot;);</span>
        }
<span class="nc bnc" id="L1661" title="All 2 branches missed.">        if ((englishTrain.collapseWhCategories &amp; 2) != 0) {</span>
<span class="nc" id="L1662">          cat = cat.replaceAll(&quot;WP&quot;, &quot;PRP&quot;); // does both WP and WP$ !!</span>
<span class="nc" id="L1663">          cat = cat.replaceAll(&quot;WDT&quot;, &quot;DT&quot;);</span>
<span class="nc" id="L1664">          cat = cat.replaceAll(&quot;WRB&quot;, &quot;RB&quot;);</span>
        }
<span class="nc bnc" id="L1666" title="All 2 branches missed.">        if ((englishTrain.collapseWhCategories &amp; 4) !=0) {</span>
<span class="nc" id="L1667">          cat = cat.replaceAll(&quot;WH(PP|ADVP|ADJP)&quot;, &quot;$1&quot;); // don't do NP, so it is preserved! Crucial.</span>
        }
      }
<span class="nc bnc" id="L1670" title="All 4 branches missed.">      if (englishTrain.splitVPNPAgr &amp;&amp; baseCat.equals(&quot;NP&quot;) &amp;&amp;</span>
<span class="nc bnc" id="L1671" title="All 2 branches missed.">          baseParentStr.startsWith(&quot;S&quot;)) {</span>
<span class="nc bnc" id="L1672" title="All 4 branches missed.">        if (baseTag.equals(&quot;NNPS&quot;) || baseTag.equals(&quot;NNS&quot;)) {</span>
<span class="nc" id="L1673">          cat = cat + &quot;-PL&quot;;</span>
<span class="nc bnc" id="L1674" title="All 8 branches missed.">        } else if (word.equalsIgnoreCase(&quot;many&quot;) || word.equalsIgnoreCase(&quot;more&quot;) || word.equalsIgnoreCase(&quot;most&quot;) || word.equalsIgnoreCase(&quot;plenty&quot;)) {</span>
<span class="nc" id="L1675">          cat = cat + &quot;-PL&quot;;</span>
<span class="nc bnc" id="L1676" title="All 26 branches missed.">        } else if (baseTag.equals(&quot;NN&quot;) || baseTag.equals(&quot;NNP&quot;) || baseTag.equals(&quot;POS&quot;) || baseTag.equals(&quot;CD&quot;) || baseTag.equals(&quot;PRP$&quot;) || baseTag.equals(&quot;JJ&quot;) || baseTag.equals(&quot;EX&quot;) || baseTag.equals(&quot;$&quot;) || baseTag.equals(&quot;RB&quot;) || baseTag.equals(&quot;FW&quot;) || baseTag.equals(&quot;VBG&quot;) || baseTag.equals(&quot;JJS&quot;) || baseTag.equals(&quot;JJR&quot;)) {</span>
<span class="nc bnc" id="L1677" title="All 2 branches missed.">        } else if (baseTag.equals(&quot;PRP&quot;)) {</span>
<span class="nc bnc" id="L1678" title="All 8 branches missed.">          if (word.equalsIgnoreCase(&quot;they&quot;) || word.equalsIgnoreCase(&quot;them&quot;) || word.equalsIgnoreCase(&quot;we&quot;) || word.equalsIgnoreCase(&quot;us&quot;)) {</span>
<span class="nc" id="L1679">            cat = cat + &quot;-PL&quot;;</span>
          }
<span class="nc bnc" id="L1681" title="All 4 branches missed.">        } else if (baseTag.equals(&quot;DT&quot;) || baseTag.equals(&quot;WDT&quot;)) {</span>
<span class="nc bnc" id="L1682" title="All 6 branches missed.">          if (word.equalsIgnoreCase(&quot;these&quot;) || word.equalsIgnoreCase(&quot;those&quot;) || word.equalsIgnoreCase(&quot;several&quot;)) {</span>
<span class="nc" id="L1683">            cat += &quot;-PL&quot;;</span>
          }
        } else {
<span class="nc" id="L1686">          log.info(&quot;XXXX Head of &quot; + t + &quot; is &quot; + word + &quot;/&quot; + baseTag);</span>
        }
      }
<span class="nc bnc" id="L1689" title="All 2 branches missed.">      if (englishTrain.splitSTag &gt; 0 &amp;&amp;</span>
<span class="nc bnc" id="L1690" title="All 8 branches missed.">          (baseCat.equals(&quot;S&quot;) || (englishTrain.splitSTag &lt;= 3 &amp;&amp; (baseCat.equals(&quot;SINV&quot;) || baseCat.equals(&quot;SQ&quot;))))) {</span>
<span class="nc bnc" id="L1691" title="All 2 branches missed.">        if (englishTrain.splitSTag == 1) {</span>
<span class="nc" id="L1692">          cat = cat + &quot;-&quot; + baseTag;</span>
<span class="nc bnc" id="L1693" title="All 8 branches missed.">        } else if (baseTag.equals(&quot;VBZ&quot;) || baseTag.equals(&quot;VBD&quot;) || baseTag.equals(&quot;VBP&quot;) || baseTag.equals(&quot;MD&quot;)) {</span>
<span class="nc" id="L1694">          cat = cat + &quot;-VBF&quot;;</span>
<span class="nc bnc" id="L1695" title="All 4 branches missed.">        } else if ((englishTrain.splitSTag == 3 || englishTrain.splitSTag == 5) &amp;&amp;</span>
<span class="nc bnc" id="L1696" title="All 8 branches missed.">                   ((baseTag.equals(&quot;TO&quot;) || baseTag.equals(&quot;VBG&quot;) || baseTag.equals(&quot;VBN&quot;) || baseTag.equals(&quot;VB&quot;)))) {</span>
<span class="nc" id="L1697">          cat = cat + &quot;-VBNF&quot;;</span>
        }
      }
<span class="nc bnc" id="L1700" title="All 4 branches missed.">      if (englishTrain.markContainedVP &amp;&amp; containsVP(t)) {</span>
<span class="nc" id="L1701">        cat = cat + &quot;-vp&quot;;</span>
      }
<span class="nc bnc" id="L1703" title="All 2 branches missed.">      if (englishTrain.markCC &gt; 0) {</span>
        // was: for (int i = 0; i &lt; kids.length; i++) {
        // This second version takes an idea from Collins: don't count
        // marginal conjunctions which don't conjoin 2 things.
<span class="nc bnc" id="L1707" title="All 2 branches missed.">        for (int i = 1; i &lt; kids.length - 1; i++) {</span>
<span class="nc" id="L1708">          String cat2 = kids[i].label().value();</span>
<span class="nc bnc" id="L1709" title="All 2 branches missed.">          if (cat2.startsWith(&quot;CC&quot;)) {</span>
<span class="nc" id="L1710">            String word2 = kids[i].children()[0].value(); // get word</span>
            // added this if since -acl03pcfg
<span class="nc bnc" id="L1712" title="All 6 branches missed.">            if (!(word2.equals(&quot;either&quot;) || word2.equals(&quot;both&quot;) || word2.equals(&quot;neither&quot;))) {</span>
<span class="nc" id="L1713">              cat = cat + &quot;-CC&quot;;</span>
<span class="nc" id="L1714">              break;</span>
            } else {
              // log.info(&quot;XXX Found non-marginal either/both/neither&quot;);
            }
<span class="nc bnc" id="L1718" title="All 4 branches missed.">          } else if (englishTrain.markCC &gt; 1 &amp;&amp; cat2.startsWith(&quot;CONJP&quot;)) {</span>
<span class="nc" id="L1719">            cat = cat + &quot;-CC&quot;;</span>
<span class="nc" id="L1720">            break;</span>
          }
        }
      }
<span class="nc bnc" id="L1724" title="All 6 branches missed.">      if (englishTrain.splitSGapped == 1 &amp;&amp; baseCat.equals(&quot;S&quot;) &amp;&amp; !kids[0].label().value().startsWith(&quot;NP&quot;)) {</span>
        // this doesn't handle predicative NPs right yet
        // to do that, need to intervene before tree normalization
<span class="nc" id="L1727">        cat = cat + &quot;-G&quot;;</span>
<span class="nc bnc" id="L1728" title="All 4 branches missed.">      } else if (englishTrain.splitSGapped == 2 &amp;&amp; baseCat.equals(&quot;S&quot;)) {</span>
        // better version: you're gapped if there is no NP, or there is just
        // one (putatively predicative) NP with no VP, ADJP, NP, PP, or UCP
<span class="nc" id="L1731">        boolean seenPredCat = false;</span>
<span class="nc" id="L1732">        int seenNP = 0;</span>
<span class="nc bnc" id="L1733" title="All 2 branches missed.">        for (Tree kid : kids) {</span>
<span class="nc" id="L1734">          String cat2 = kid.label().value();</span>
<span class="nc bnc" id="L1735" title="All 2 branches missed.">          if (cat2.startsWith(&quot;NP&quot;)) {</span>
<span class="nc" id="L1736">            seenNP++;</span>
<span class="nc bnc" id="L1737" title="All 8 branches missed.">          } else if (cat2.startsWith(&quot;VP&quot;) || cat2.startsWith(&quot;ADJP&quot;) || cat2.startsWith(&quot;PP&quot;) || cat2.startsWith(&quot;UCP&quot;)) {</span>
<span class="nc" id="L1738">            seenPredCat = true;</span>
          }
        }
<span class="nc bnc" id="L1741" title="All 6 branches missed.">        if (seenNP == 0 || (seenNP == 1 &amp;&amp; !seenPredCat)) {</span>
<span class="nc" id="L1742">          cat = cat + &quot;-G&quot;;</span>
        }
<span class="nc bnc" id="L1744" title="All 4 branches missed.">      } else if (englishTrain.splitSGapped == 3 &amp;&amp; baseCat.equals(&quot;S&quot;)) {</span>
        // better version: you're gapped if there is no NP, or there is just
        // one (putatively predicative) NP with no VP, ADJP, NP, PP, or UCP
        // NEW: but you're not gapped if you have an S and CC daughter (coord)
<span class="nc" id="L1748">        boolean seenPredCat = false;</span>
<span class="nc" id="L1749">        boolean seenCC = false;</span>
<span class="nc" id="L1750">        boolean seenS = false;</span>
<span class="nc" id="L1751">        int seenNP = 0;</span>
<span class="nc bnc" id="L1752" title="All 2 branches missed.">        for (Tree kid : kids) {</span>
<span class="nc" id="L1753">          String cat2 = kid.label().value();</span>
<span class="nc bnc" id="L1754" title="All 2 branches missed.">          if (cat2.startsWith(&quot;NP&quot;)) {</span>
<span class="nc" id="L1755">            seenNP++;</span>
<span class="nc bnc" id="L1756" title="All 8 branches missed.">          } else if (cat2.startsWith(&quot;VP&quot;) || cat2.startsWith(&quot;ADJP&quot;) || cat2.startsWith(&quot;PP&quot;) || cat2.startsWith(&quot;UCP&quot;)) {</span>
<span class="nc" id="L1757">            seenPredCat = true;</span>
<span class="nc bnc" id="L1758" title="All 2 branches missed.">          } else if (cat2.startsWith(&quot;CC&quot;)) {</span>
<span class="nc" id="L1759">            seenCC = true;</span>
<span class="nc bnc" id="L1760" title="All 2 branches missed.">          } else if (cat2.startsWith(&quot;S&quot;)) {</span>
<span class="nc" id="L1761">            seenS = true;</span>
          }
        }
<span class="nc bnc" id="L1764" title="All 10 branches missed.">        if ((!(seenCC &amp;&amp; seenS)) &amp;&amp; (seenNP == 0 || (seenNP == 1 &amp;&amp; !seenPredCat))) {</span>
<span class="nc" id="L1765">          cat = cat + &quot;-G&quot;;</span>
        }
<span class="nc bnc" id="L1767" title="All 4 branches missed.">      } else if (englishTrain.splitSGapped == 4 &amp;&amp; baseCat.equals(&quot;S&quot;)) {</span>
        // better version: you're gapped if there is no NP, or there is just
        // one (putatively predicative) NP with no VP, ADJP, NP, PP, or UCP
        // But: not gapped if S(BAR)-NOM-SBJ constituent
        // But: you're not gapped if you have two /^S/ daughters
<span class="nc" id="L1772">        boolean seenPredCat = false;</span>
<span class="nc" id="L1773">        boolean sawSBeforePredCat = false;</span>
<span class="nc" id="L1774">        int seenS = 0;</span>
<span class="nc" id="L1775">        int seenNP = 0;</span>
<span class="nc bnc" id="L1776" title="All 2 branches missed.">        for (Tree kid : kids) {</span>
<span class="nc" id="L1777">          String cat2 = kid.label().value();</span>
<span class="nc bnc" id="L1778" title="All 2 branches missed.">          if (cat2.startsWith(&quot;NP&quot;)) {</span>
<span class="nc" id="L1779">            seenNP++;</span>
<span class="nc bnc" id="L1780" title="All 8 branches missed.">          } else if (cat2.startsWith(&quot;VP&quot;) || cat2.startsWith(&quot;ADJP&quot;) || cat2.startsWith(&quot;PP&quot;) || cat2.startsWith(&quot;UCP&quot;)) {</span>
<span class="nc" id="L1781">            seenPredCat = true;</span>
<span class="nc bnc" id="L1782" title="All 2 branches missed.">          } else if (cat2.startsWith(&quot;S&quot;)) {</span>
<span class="nc" id="L1783">            seenS++;</span>
<span class="nc bnc" id="L1784" title="All 2 branches missed.">            if (!seenPredCat) {</span>
<span class="nc" id="L1785">              sawSBeforePredCat = true;</span>
            }
          }
        }
<span class="nc bnc" id="L1789" title="All 12 branches missed.">        if ((seenS &lt; 2) &amp;&amp; (!(sawSBeforePredCat &amp;&amp; seenPredCat)) &amp;&amp; (seenNP == 0 || (seenNP == 1 &amp;&amp; !seenPredCat))) {</span>
<span class="nc" id="L1790">          cat = cat + &quot;-G&quot;;</span>
        }
      }
<span class="nc bnc" id="L1793" title="All 4 branches missed.">      if (englishTrain.splitNumNP &amp;&amp; baseCat.equals(&quot;NP&quot;)) {</span>
<span class="nc" id="L1794">        boolean seenNum = false;</span>
<span class="nc bnc" id="L1795" title="All 2 branches missed.">        for (Tree kid : kids) {</span>
<span class="nc" id="L1796">          String cat2 = kid.label().value();</span>
<span class="nc bnc" id="L1797" title="All 12 branches missed.">          if (cat2.startsWith(&quot;QP&quot;) || cat2.startsWith(&quot;CD&quot;) || cat2.startsWith(&quot;$&quot;) || cat2.startsWith(&quot;#&quot;) || (cat2.startsWith(&quot;NN&quot;) &amp;&amp; cat2.contains(&quot;-%&quot;))) {</span>
<span class="nc" id="L1798">            seenNum = true;</span>
<span class="nc" id="L1799">            break;</span>
          }
        }
<span class="nc bnc" id="L1802" title="All 2 branches missed.">        if (seenNum) {</span>
<span class="nc" id="L1803">          cat += &quot;-NUM&quot;;</span>
        }
      }
<span class="nc bnc" id="L1806" title="All 4 branches missed.">      if (englishTrain.splitPoss &gt; 0 &amp;&amp; baseCat.equals(&quot;NP&quot;) &amp;&amp;</span>
<span class="nc bnc" id="L1807" title="All 2 branches missed.">          kids[kids.length - 1].label().value().startsWith(&quot;POS&quot;)) {</span>
<span class="nc bnc" id="L1808" title="All 2 branches missed.">        if (englishTrain.splitPoss == 2) {</span>
          // special case splice in a new node!  Do it all here
          Label labelBot;
<span class="nc bnc" id="L1811" title="All 2 branches missed.">          if (t.isPrePreTerminal()) {</span>
<span class="nc" id="L1812">            labelBot = new CategoryWordTag(&quot;NP^POSSP-B&quot;, word, tag);</span>
          } else {
<span class="nc" id="L1814">            labelBot = new CategoryWordTag(&quot;NP^POSSP&quot;, word, tag);</span>
          }
<span class="nc" id="L1816">          t.setLabel(labelBot);</span>
<span class="nc" id="L1817">          List&lt;Tree&gt; oldKids = t.getChildrenAsList();</span>
          // could I use subList() here or is a true copy better?
          // lose the last child
<span class="nc" id="L1820">          List&lt;Tree&gt; newKids = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L1821" title="All 2 branches missed.">          for (int i = 0; i &lt; oldKids.size() - 1; i++) {</span>
<span class="nc" id="L1822">            newKids.add(oldKids.get(i));</span>
          }
<span class="nc" id="L1824">          t.setChildren(newKids);</span>
<span class="nc" id="L1825">          cat = changeBaseCat(cat, &quot;POSSP&quot;);</span>
<span class="nc" id="L1826">          Label labelTop = new CategoryWordTag(cat, word, tag);</span>
<span class="nc" id="L1827">          List&lt;Tree&gt; newerChildren = new ArrayList&lt;&gt;(2);</span>
<span class="nc" id="L1828">          newerChildren.add(t);</span>
          // add POS dtr
<span class="nc" id="L1830">          Tree last = oldKids.get(oldKids.size() - 1);</span>
<span class="nc bnc" id="L1831" title="All 2 branches missed.">          if ( ! last.value().equals(&quot;POS^NP&quot;)) {</span>
<span class="nc" id="L1832">            log.info(&quot;Unexpected POS value (!): &quot; + last);</span>
          }
<span class="nc" id="L1834">          last.setValue(&quot;POS^POSSP&quot;);</span>
<span class="nc" id="L1835">          newerChildren.add(last);</span>
<span class="nc" id="L1836">          return categoryWordTagTreeFactory.newTreeNode(labelTop, newerChildren);</span>
        } else {
<span class="nc" id="L1838">          cat = cat + &quot;-P&quot;;</span>
        }
      }
<span class="nc bnc" id="L1841" title="All 4 branches missed.">      if (englishTrain.splitBaseNP &gt; 0 &amp;&amp; baseCat.equals(&quot;NP&quot;) &amp;&amp;</span>
<span class="nc bnc" id="L1842" title="All 2 branches missed.">          t.isPrePreTerminal()) {</span>
<span class="nc bnc" id="L1843" title="All 2 branches missed.">        if (englishTrain.splitBaseNP == 2) {</span>
<span class="nc bnc" id="L1844" title="All 2 branches missed.">          if (parentStr.startsWith(&quot;NP&quot;)) { // already got one above us</span>
<span class="nc" id="L1845">            cat = cat + &quot;-B&quot;;</span>
          } else {
            // special case splice in a new node!  Do it all here
<span class="nc" id="L1848">            Label labelBot = new CategoryWordTag(&quot;NP^NP-B&quot;, word, tag);</span>
<span class="nc" id="L1849">            t.setLabel(labelBot);</span>
<span class="nc" id="L1850">            Label labelTop = new CategoryWordTag(cat, word, tag);</span>
<span class="nc" id="L1851">            List&lt;Tree&gt; newerChildren = new ArrayList&lt;&gt;(1);</span>
<span class="nc" id="L1852">            newerChildren.add(t);</span>
<span class="nc" id="L1853">            return categoryWordTagTreeFactory.newTreeNode(labelTop, newerChildren);</span>
          }
        } else {
<span class="nc" id="L1856">          cat = cat + &quot;-B&quot;;</span>
        }
      }
<span class="nc bnc" id="L1859" title="All 4 branches missed.">      if (englishTrain.rightPhrasal &amp;&amp; rightPhrasal(t)) {</span>
<span class="nc" id="L1860">        cat = cat + &quot;-RX&quot;;</span>
      }
    }

<span class="nc" id="L1864">    t.setLabel(new CategoryWordTag(cat, word, tag));</span>
<span class="nc" id="L1865">    return t;</span>
  }


  private boolean containsVP(Tree t) {
<span class="nc" id="L1870">    String cat = tlp.basicCategory(t.label().value());</span>
<span class="nc bnc" id="L1871" title="All 2 branches missed.">    if (cat.equals(&quot;VP&quot;)) {</span>
<span class="nc" id="L1872">      return true;</span>
    } else {
<span class="nc bnc" id="L1874" title="All 2 branches missed.">      for (Tree kid : t.children()) {</span>
<span class="nc bnc" id="L1875" title="All 2 branches missed.">        if (containsVP(kid)) {</span>
<span class="nc" id="L1876">          return true;</span>
        }
      }
<span class="nc" id="L1879">      return false;</span>
    }
  }

  private static boolean firstOfSeveralNNP(Tree parent, Tree t) {
<span class="nc" id="L1884">    boolean firstIsT = false;</span>
<span class="nc" id="L1885">    int numNNP = 0;</span>
<span class="nc bnc" id="L1886" title="All 2 branches missed.">    for (Tree kid : parent.children()) {</span>
<span class="nc bnc" id="L1887" title="All 2 branches missed.">      if (kid.value().startsWith(&quot;NNP&quot;)) {</span>
<span class="nc bnc" id="L1888" title="All 4 branches missed.">        if (t.equals(kid) &amp;&amp; numNNP == 0) {</span>
<span class="nc" id="L1889">          firstIsT = true;</span>
        }
<span class="nc" id="L1891">        numNNP++;</span>
      }
    }
<span class="nc bnc" id="L1894" title="All 4 branches missed.">    return numNNP &gt; 1 &amp;&amp; firstIsT;</span>
  }

  private static boolean lastOfSeveralNNP(Tree parent, Tree t) {
<span class="nc" id="L1898">    Tree last = null;</span>
<span class="nc" id="L1899">    int numNNP = 0;</span>
<span class="nc bnc" id="L1900" title="All 2 branches missed.">    for (Tree kid : parent.children()) {</span>
<span class="nc bnc" id="L1901" title="All 2 branches missed.">      if (kid.value().startsWith(&quot;NNP&quot;)) {</span>
<span class="nc" id="L1902">        numNNP++;</span>
<span class="nc" id="L1903">        last = kid;</span>
      }
    }
<span class="nc bnc" id="L1906" title="All 4 branches missed.">    return numNNP &gt; 1 &amp;&amp; t.equals(last);</span>
  }


  // quite heuristic, but not useless given tagging errors?
  private static String deduceTag(String w) {
<span class="nc" id="L1912">    String word = w.toLowerCase();</span>
<span class="nc bnc" id="L1913" title="All 2 branches missed.">    if (word.endsWith(&quot;ing&quot;)) {</span>
<span class="nc" id="L1914">      return &quot;VBG&quot;;</span>
<span class="nc bnc" id="L1915" title="All 4 branches missed.">    } else if (word.endsWith(&quot;d&quot;) || word.endsWith(&quot;t&quot;)) {</span>
<span class="nc" id="L1916">      return &quot;VBN&quot;;</span>
<span class="nc bnc" id="L1917" title="All 2 branches missed.">    } else if (word.endsWith(&quot;s&quot;)) {</span>
<span class="nc" id="L1918">      return &quot;VBZ&quot;;</span>
<span class="nc bnc" id="L1919" title="All 2 branches missed.">    } else if (word.equals(&quot;to&quot;)) {</span>
<span class="nc" id="L1920">      return &quot;TO&quot;;</span>
    } else {
<span class="nc" id="L1922">      return &quot;VB&quot;;</span>
    }
  }

  private static boolean rightPhrasal(Tree t) {
<span class="nc bnc" id="L1927" title="All 2 branches missed.">    while (!t.isLeaf()) {</span>
<span class="nc" id="L1928">      t = t.lastChild();</span>
<span class="nc" id="L1929">      String str = t.label().value();</span>
<span class="nc bnc" id="L1930" title="All 12 branches missed.">      if (str.startsWith(&quot;NP&quot;) || str.startsWith(&quot;PP&quot;) || str.startsWith(&quot;VP&quot;) || str.startsWith(&quot;S&quot;) || str.startsWith(&quot;Q&quot;) || str.startsWith(&quot;A&quot;)) {</span>
<span class="nc" id="L1931">        return true;</span>
      }
<span class="nc" id="L1933">    }</span>
<span class="nc" id="L1934">    return false;</span>
  }


  private static String subCatify(Tree t) {
<span class="nc" id="L1939">    StringBuilder sb = new StringBuilder(&quot;^a&quot;);</span>
<span class="nc" id="L1940">    boolean n = false;</span>
<span class="nc" id="L1941">    boolean s = false;</span>
<span class="nc" id="L1942">    boolean p = false;</span>
<span class="nc bnc" id="L1943" title="All 2 branches missed.">    for (int i = 0; i &lt; t.children().length; i++) {</span>
<span class="nc" id="L1944">      String childStr = t.children()[i].label().value();</span>
<span class="nc bnc" id="L1945" title="All 4 branches missed.">      n = (n || childStr.startsWith(&quot;NP&quot;));</span>
<span class="nc bnc" id="L1946" title="All 4 branches missed.">      s = (s || childStr.startsWith(&quot;S&quot;));</span>
<span class="nc bnc" id="L1947" title="All 4 branches missed.">      p = (p || childStr.startsWith(&quot;PP&quot;));</span>
    }
<span class="nc" id="L1949">    n = false;</span>
<span class="nc bnc" id="L1950" title="All 2 branches missed.">    if (n) {</span>
<span class="nc" id="L1951">      sb.append('N');</span>
    }
<span class="nc bnc" id="L1953" title="All 2 branches missed.">    if (p) {</span>
<span class="nc" id="L1954">      sb.append('P');</span>
    }
<span class="nc bnc" id="L1956" title="All 2 branches missed.">    if (s) {</span>
<span class="nc" id="L1957">      sb.append('S');</span>
    }
<span class="nc" id="L1959">    return sb.toString();</span>
  }


  private String ditrans(Tree t) {
<span class="nc" id="L1964">    int n = 0;</span>
<span class="nc bnc" id="L1965" title="All 2 branches missed.">    for (Tree kid : t.children()) {</span>
<span class="nc" id="L1966">      String childStr = kid.label().value();</span>
<span class="nc bnc" id="L1967" title="All 4 branches missed.">      if (childStr.startsWith(&quot;NP&quot;) &amp;&amp; !childStr.contains(&quot;-TMP&quot;)) {</span>
<span class="nc" id="L1968">        n++;</span>
<span class="nc bnc" id="L1969" title="All 4 branches missed.">      } else if (englishTrain.markDitransV == 1 &amp;&amp; childStr.startsWith(&quot;S&quot;)) {</span>
<span class="nc" id="L1970">        n++;</span>
      }
    }
<span class="nc bnc" id="L1973" title="All 2 branches missed.">    if (n &gt;= 2) {</span>
<span class="nc" id="L1974">      return &quot;^2Arg&quot;;</span>
    } else {
<span class="nc" id="L1976">      return &quot;&quot;;</span>
    }
  }


  private String changeBaseCat(String cat, String newBaseCat) {
<span class="nc" id="L1982">    int i = 1;  // not 0 in case tag is annotation introducing char</span>
<span class="nc" id="L1983">    int length = cat.length();</span>
<span class="nc bnc" id="L1984" title="All 2 branches missed.">    for (; (i &lt; length); i++) {</span>
<span class="nc bnc" id="L1985" title="All 2 branches missed.">      if (tlp.isLabelAnnotationIntroducingCharacter(cat.charAt(i))) {</span>
<span class="nc" id="L1986">        break;</span>
      }
    }
<span class="nc bnc" id="L1989" title="All 2 branches missed.">    if (i &lt; length) {</span>
<span class="nc" id="L1990">      return newBaseCat + cat.substring(i);</span>
    } else {
<span class="nc" id="L1992">      return newBaseCat;</span>
    }
  }


  /** This version doesn't count verbs in baseNPs: they're generally
   *  gerunds in compounds like &quot;operating income&quot;.  It would also
   *  catch modal tagging mistakes like &quot;May/MD 15&quot;.
   *  @param tree A tree to assess
   *  @return true if there is a verb or modal, not within a base NP
   */
  private static boolean hasClausalV(Tree tree) {
    // this is originally called only called on phrasal nodes
<span class="nc bnc" id="L2005" title="All 2 branches missed.">    if (tree.isPhrasal()) {</span>
<span class="nc bnc" id="L2006" title="All 2 branches missed.">      if (tree.isPrePreTerminal() &amp;&amp;</span>
<span class="nc bnc" id="L2007" title="All 2 branches missed.">          tree.value().startsWith(&quot;NP&quot;)) {</span>
<span class="nc" id="L2008">        return false;</span>
      }
<span class="nc" id="L2010">      Tree[] kids = tree.children();</span>
<span class="nc bnc" id="L2011" title="All 2 branches missed.">      for (Tree t : kids) {</span>
<span class="nc bnc" id="L2012" title="All 2 branches missed.">        if (hasClausalV(t)) {</span>
<span class="nc" id="L2013">          return true;</span>
        }
      }
<span class="nc" id="L2016">      return false;</span>
    } else {
<span class="nc" id="L2018">      String str = tree.value();</span>
<span class="nc bnc" id="L2019" title="All 4 branches missed.">      return str.startsWith(&quot;VB&quot;) || str.startsWith(&quot;MD&quot;);</span>
    }
  }

  private static boolean hasV(List&lt;? extends Label&gt; tags) {
<span class="nc bnc" id="L2024" title="All 2 branches missed.">    for (Label tag : tags) {</span>
<span class="nc" id="L2025">      String str = tag.toString();</span>
<span class="nc bnc" id="L2026" title="All 4 branches missed.">      if (str.startsWith(&quot;V&quot;) || str.startsWith(&quot;MD&quot;)) {</span>
<span class="nc" id="L2027">        return true;</span>
      }
<span class="nc" id="L2029">    }</span>
<span class="nc" id="L2030">    return false;</span>
  }

  private static boolean hasI(List&lt;? extends Label&gt; tags) {
<span class="nc bnc" id="L2034" title="All 2 branches missed.">    for (Label tag : tags) {</span>
<span class="nc bnc" id="L2035" title="All 2 branches missed.">      if (tag.toString().startsWith(&quot;I&quot;)) {</span>
<span class="nc" id="L2036">        return true;</span>
      }
<span class="nc" id="L2038">    }</span>
<span class="nc" id="L2039">    return false;</span>
  }

  private static boolean hasC(List&lt;? extends Label&gt; tags) {
<span class="nc bnc" id="L2043" title="All 2 branches missed.">    for (Label tag : tags) {</span>
<span class="nc bnc" id="L2044" title="All 2 branches missed.">      if (tag.toString().startsWith(&quot;CC&quot;)) {</span>
<span class="nc" id="L2045">        return true;</span>
      }
<span class="nc" id="L2047">    }</span>
<span class="nc" id="L2048">    return false;</span>
  }


  @Override
  public void display() {
<span class="nc" id="L2054">    englishTrain.display();</span>
<span class="nc" id="L2055">  }</span>


  /**
   * Set language-specific options according to flags.
   * This routine should process the option starting in args[i] (which
   * might potentially be several arguments long if it takes arguments).
   * It should return the index after the last index it consumed in
   * processing.  In particular, if it cannot process the current option,
   * the return value should be i.
   */
  @Override
  public int setOptionFlag(String[] args, int i) {
    // [CDM 2008: there are no generic options!] first, see if it's a generic option
    // int j = super.setOptionFlag(args, i);
    // if(i != j) return j;

    //lang. specific options
<span class="nc bnc" id="L2073" title="All 2 branches missed.">    if (args[i].equalsIgnoreCase(&quot;-splitIN&quot;)) {</span>
<span class="nc" id="L2074">      englishTrain.splitIN = Integer.parseInt(args[i + 1]);</span>
<span class="nc" id="L2075">      i += 2;</span>
<span class="nc bnc" id="L2076" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitPercent&quot;)) {</span>
<span class="nc" id="L2077">      englishTrain.splitPercent = true;</span>
<span class="nc" id="L2078">      i += 1;</span>
<span class="nc bnc" id="L2079" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitQuotes&quot;)) {</span>
<span class="nc" id="L2080">      englishTrain.splitQuotes = true;</span>
<span class="nc" id="L2081">      i += 1;</span>
<span class="nc bnc" id="L2082" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitSFP&quot;)) {</span>
<span class="nc" id="L2083">      englishTrain.splitSFP = true;</span>
<span class="nc" id="L2084">      i += 1;</span>
<span class="nc bnc" id="L2085" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitNNP&quot;)) {</span>
<span class="nc" id="L2086">      englishTrain.splitNNP = Integer.parseInt(args[i+1]);</span>
<span class="nc" id="L2087">      i += 2;</span>
<span class="nc bnc" id="L2088" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-rbGPA&quot;)) {</span>
<span class="nc" id="L2089">      englishTrain.tagRBGPA = true;</span>
<span class="nc" id="L2090">      i += 1;</span>
<span class="nc bnc" id="L2091" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitTRJJ&quot;)) {</span>
<span class="nc" id="L2092">      englishTrain.splitTRJJ = true;</span>
<span class="nc" id="L2093">      i += 1;</span>
<span class="nc bnc" id="L2094" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitJJCOMP&quot;)) {</span>
<span class="nc" id="L2095">      englishTrain.splitJJCOMP = true;</span>
<span class="nc" id="L2096">      i += 1;</span>
<span class="nc bnc" id="L2097" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitMoreLess&quot;)) {</span>
<span class="nc" id="L2098">      englishTrain.splitMoreLess = true;</span>
<span class="nc" id="L2099">      i += 1;</span>
<span class="nc bnc" id="L2100" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-unaryDT&quot;)) {</span>
<span class="nc" id="L2101">      englishTrain.unaryDT = true;</span>
<span class="nc" id="L2102">      i += 1;</span>
<span class="nc bnc" id="L2103" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-unaryRB&quot;)) {</span>
<span class="nc" id="L2104">      englishTrain.unaryRB = true;</span>
<span class="nc" id="L2105">      i += 1;</span>
<span class="nc bnc" id="L2106" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-unaryIN&quot;)) {</span>
<span class="nc" id="L2107">      englishTrain.unaryIN = true;</span>
<span class="nc" id="L2108">      i += 1;</span>
<span class="nc bnc" id="L2109" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-markReflexivePRP&quot;)) {</span>
<span class="nc" id="L2110">      englishTrain.markReflexivePRP = true;</span>
<span class="nc" id="L2111">      i += 1;</span>
<span class="nc bnc" id="L2112" title="All 4 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitCC&quot;) &amp;&amp; i + 1 &lt; args.length) {</span>
<span class="nc" id="L2113">      englishTrain.splitCC = Integer.parseInt(args[i+1]);</span>
<span class="nc" id="L2114">      i += 2;</span>
<span class="nc bnc" id="L2115" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitRB&quot;)) {</span>
<span class="nc" id="L2116">      englishTrain.splitRB = true;</span>
<span class="nc" id="L2117">      i += 1;</span>
<span class="nc bnc" id="L2118" title="All 4 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitAux&quot;) &amp;&amp; i+1 &lt; args.length) {</span>
<span class="nc" id="L2119">      englishTrain.splitAux = Integer.parseInt(args[i+1]);</span>
<span class="nc" id="L2120">      i += 2;</span>
<span class="nc bnc" id="L2121" title="All 4 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitSbar&quot;) &amp;&amp; i+1 &lt; args.length) {</span>
<span class="nc" id="L2122">      englishTrain.splitSbar = Integer.parseInt(args[i+1]);</span>
<span class="nc" id="L2123">      i += 2;</span>
<span class="nc bnc" id="L2124" title="All 4 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitVP&quot;) &amp;&amp; i + 1 &lt; args.length) {</span>
<span class="nc" id="L2125">      englishTrain.splitVP = Integer.parseInt(args[i + 1]);</span>
<span class="nc" id="L2126">      i += 2;</span>
<span class="nc bnc" id="L2127" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitVPNPAgr&quot;)) {</span>
<span class="nc" id="L2128">      englishTrain.splitVPNPAgr = true;</span>
<span class="nc" id="L2129">      i += 1;</span>
<span class="nc bnc" id="L2130" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-gpaRootVP&quot;)) {</span>
<span class="nc" id="L2131">      englishTrain.gpaRootVP = true;</span>
<span class="nc" id="L2132">      i += 1;</span>
<span class="nc bnc" id="L2133" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-makePPTOintoIN&quot;)) {</span>
<span class="nc" id="L2134">      englishTrain.makePPTOintoIN = Integer.parseInt(args[i + 1]);</span>
<span class="nc" id="L2135">      i += 2;</span>
<span class="nc bnc" id="L2136" title="All 4 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-collapseWhCategories&quot;) &amp;&amp; i + 1 &lt; args.length) {</span>
<span class="nc" id="L2137">      englishTrain.collapseWhCategories = Integer.parseInt(args[i + 1]);</span>
<span class="nc" id="L2138">      i += 2;</span>
<span class="nc bnc" id="L2139" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitSTag&quot;)) {</span>
<span class="nc" id="L2140">      englishTrain.splitSTag = Integer.parseInt(args[i+1]);</span>
<span class="nc" id="L2141">      i += 2;</span>
<span class="nc bnc" id="L2142" title="All 4 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitSGapped&quot;) &amp;&amp; (i + 1 &lt; args.length)) {</span>
<span class="nc" id="L2143">      englishTrain.splitSGapped = Integer.parseInt(args[i+1]);</span>
<span class="nc" id="L2144">      i += 2;</span>
<span class="nc bnc" id="L2145" title="All 4 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitNPpercent&quot;) &amp;&amp; (i+1 &lt; args.length)) {</span>
<span class="nc" id="L2146">      englishTrain.splitNPpercent = Integer.parseInt(args[i+1]);</span>
<span class="nc" id="L2147">      i += 2;</span>
<span class="nc bnc" id="L2148" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitNPPRP&quot;)) {</span>
<span class="nc" id="L2149">      englishTrain.splitNPPRP = true;</span>
<span class="nc" id="L2150">      i += 1;</span>
<span class="nc bnc" id="L2151" title="All 4 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-dominatesV&quot;) &amp;&amp; (i+1 &lt; args.length)) {</span>
<span class="nc" id="L2152">      englishTrain.dominatesV = Integer.parseInt(args[i + 1]);</span>
<span class="nc" id="L2153">      i += 2;</span>
<span class="nc bnc" id="L2154" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-dominatesI&quot;)) {</span>
<span class="nc" id="L2155">      englishTrain.dominatesI = true;</span>
<span class="nc" id="L2156">      i += 1;</span>
<span class="nc bnc" id="L2157" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-dominatesC&quot;)) {</span>
<span class="nc" id="L2158">      englishTrain.dominatesC = true;</span>
<span class="nc" id="L2159">      i += 1;</span>
<span class="nc bnc" id="L2160" title="All 4 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitNPNNP&quot;) &amp;&amp; (i+1 &lt; args.length)) {</span>
<span class="nc" id="L2161">      englishTrain.splitNPNNP = Integer.parseInt(args[i + 1]);</span>
<span class="nc" id="L2162">      i += 2;</span>
<span class="nc bnc" id="L2163" title="All 4 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitTMP&quot;) &amp;&amp; (i + 1 &lt; args.length)) {</span>
<span class="nc" id="L2164">      englishTrain.splitTMP = Integer.parseInt(args[i + 1]);</span>
<span class="nc" id="L2165">      i += 2;</span>
<span class="nc bnc" id="L2166" title="All 4 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitNPADV&quot;) &amp;&amp; (i+1 &lt; args.length)) {</span>
<span class="nc" id="L2167">      englishTrain.splitNPADV = Integer.parseInt(args[i+1]);</span>
<span class="nc" id="L2168">      i += 2;</span>
<span class="nc bnc" id="L2169" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-markContainedVP&quot;)) {</span>
<span class="nc" id="L2170">      englishTrain.markContainedVP = true;</span>
<span class="nc" id="L2171">      i += 1;</span>
<span class="nc bnc" id="L2172" title="All 4 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-markDitransV&quot;) &amp;&amp; (i+1 &lt; args.length)) {</span>
<span class="nc" id="L2173">      englishTrain.markDitransV = Integer.parseInt(args[i+1]);</span>
<span class="nc" id="L2174">      i += 2;</span>
<span class="nc bnc" id="L2175" title="All 4 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-splitPoss&quot;) &amp;&amp; (i+1 &lt; args.length)) {</span>
<span class="nc" id="L2176">      englishTrain.splitPoss = Integer.parseInt(args[i+1]);</span>
<span class="nc" id="L2177">      i += 2;</span>
<span class="nc bnc" id="L2178" title="All 4 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-baseNP&quot;) &amp;&amp; (i+1 &lt; args.length)) {</span>
<span class="nc" id="L2179">      englishTrain.splitBaseNP = Integer.parseInt(args[i+1]);</span>
<span class="nc" id="L2180">      i += 2;</span>
<span class="nc bnc" id="L2181" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-joinNounTags&quot;)) {</span>
<span class="nc" id="L2182">      englishTrain.joinNounTags = true;</span>
<span class="nc" id="L2183">      i += 1;</span>
<span class="nc bnc" id="L2184" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-correctTags&quot;)) {</span>
<span class="nc" id="L2185">      englishTrain.correctTags = true;</span>
<span class="nc" id="L2186">      i += 1;</span>
<span class="nc bnc" id="L2187" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-noCorrectTags&quot;)) {</span>
<span class="nc" id="L2188">      englishTrain.correctTags = false;</span>
<span class="nc" id="L2189">      i += 1;</span>
<span class="nc bnc" id="L2190" title="All 4 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-markCC&quot;) &amp;&amp; (i + 1 &lt; args.length)) {</span>
<span class="nc" id="L2191">      englishTrain.markCC = Integer.parseInt(args[i+1]);</span>
<span class="nc" id="L2192">      i += 2;</span>
<span class="nc bnc" id="L2193" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-noAnnotations&quot;)) {</span>
<span class="nc" id="L2194">      englishTrain.splitVP = 0;</span>
<span class="nc" id="L2195">      englishTrain.splitTMP = NPTmpRetainingTreeNormalizer.TEMPORAL_NONE;</span>
<span class="nc" id="L2196">      englishTrain.splitSGapped = 0;</span>
<span class="nc" id="L2197">      i += 1;</span>
<span class="nc bnc" id="L2198" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-retainNPTMPSubcategories&quot;)) {</span>
<span class="nc" id="L2199">      englishTest.retainNPTMPSubcategories = true;</span>
<span class="nc" id="L2200">      i += 1;</span>
<span class="nc bnc" id="L2201" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-retainTMPSubcategories&quot;)) {</span>
<span class="nc" id="L2202">      englishTest.retainTMPSubcategories = true;</span>
<span class="nc" id="L2203">      i += 1;</span>
<span class="nc bnc" id="L2204" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-retainADVSubcategories&quot;)) {</span>
<span class="nc" id="L2205">      englishTest.retainADVSubcategories = true;</span>
<span class="nc" id="L2206">      i += 1;</span>
<span class="nc bnc" id="L2207" title="All 4 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-leaveItAll&quot;) &amp;&amp; (i + 1 &lt; args.length)) {</span>
<span class="nc" id="L2208">      englishTrain.leaveItAll = Integer.parseInt(args[i + 1]);</span>
<span class="nc" id="L2209">      i += 2;</span>
<span class="nc bnc" id="L2210" title="All 4 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-headFinder&quot;) &amp;&amp; (i + 1 &lt; args.length)) {</span>
      try {
<span class="nc" id="L2212">        headFinder = (HeadFinder) Class.forName(args[i + 1]).newInstance();</span>
<span class="nc" id="L2213">      } catch (Exception e) {</span>
<span class="nc" id="L2214">        log.info(&quot;Error: Unable to load HeadFinder; default HeadFinder will be used.&quot;);</span>
<span class="nc" id="L2215">        e.printStackTrace();</span>
<span class="nc" id="L2216">      }</span>
<span class="nc" id="L2217">      i += 2;</span>
<span class="nc bnc" id="L2218" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-makeCopulaHead&quot;)) {</span>
<span class="nc" id="L2219">      englishTest.makeCopulaHead = true;</span>
<span class="nc" id="L2220">      i += 1;</span>
<span class="nc bnc" id="L2221" title="All 2 branches missed.">    } else if(args[i].equalsIgnoreCase(&quot;-originalDependencies&quot;)) {</span>
<span class="nc" id="L2222">      setGenerateOriginalDependencies(true);</span>
<span class="nc" id="L2223">      i += 1;</span>
<span class="nc bnc" id="L2224" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-acl03pcfg&quot;)) {</span>
<span class="nc" id="L2225">      englishTrain.splitIN = 3;</span>
<span class="nc" id="L2226">      englishTrain.splitPercent = true;</span>
<span class="nc" id="L2227">      englishTrain.splitPoss = 1;</span>
<span class="nc" id="L2228">      englishTrain.splitCC = 2;</span>
<span class="nc" id="L2229">      englishTrain.unaryDT = true;</span>
<span class="nc" id="L2230">      englishTrain.unaryRB = true;</span>
<span class="nc" id="L2231">      englishTrain.splitAux = 1;</span>
<span class="nc" id="L2232">      englishTrain.splitVP = 2;</span>
<span class="nc" id="L2233">      englishTrain.splitSGapped = 3;</span>
<span class="nc" id="L2234">      englishTrain.dominatesV = 1;</span>
<span class="nc" id="L2235">      englishTrain.splitTMP = NPTmpRetainingTreeNormalizer.TEMPORAL_ACL03PCFG;</span>
<span class="nc" id="L2236">      englishTrain.splitBaseNP = 1;</span>
<span class="nc" id="L2237">      i += 1;</span>
<span class="nc bnc" id="L2238" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-jenny&quot;)) {</span>
<span class="nc" id="L2239">      englishTrain.splitIN = 3;</span>
<span class="nc" id="L2240">      englishTrain.splitPercent = true;</span>
<span class="nc" id="L2241">      englishTrain.splitPoss = 1;</span>
<span class="nc" id="L2242">      englishTrain.splitCC = 2;</span>
<span class="nc" id="L2243">      englishTrain.unaryDT = true;</span>
<span class="nc" id="L2244">      englishTrain.unaryRB = true;</span>
<span class="nc" id="L2245">      englishTrain.splitAux = 1;</span>
<span class="nc" id="L2246">      englishTrain.splitVP = 2;</span>
<span class="nc" id="L2247">      englishTrain.splitSGapped = 3;</span>
<span class="nc" id="L2248">      englishTrain.dominatesV = 1;</span>
<span class="nc" id="L2249">      englishTrain.splitTMP = NPTmpRetainingTreeNormalizer.TEMPORAL_ACL03PCFG;</span>
<span class="nc" id="L2250">      englishTrain.splitBaseNP = 1;</span>
<span class="nc" id="L2251">      i += 1;</span>
<span class="nc bnc" id="L2252" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-linguisticPCFG&quot;)) {</span>
<span class="nc" id="L2253">      englishTrain.splitIN = 3;</span>
<span class="nc" id="L2254">      englishTrain.splitPercent = true;</span>
<span class="nc" id="L2255">      englishTrain.splitPoss = 1;</span>
<span class="nc" id="L2256">      englishTrain.splitCC = 2;</span>
<span class="nc" id="L2257">      englishTrain.unaryDT = true;</span>
<span class="nc" id="L2258">      englishTrain.unaryRB = true;</span>
<span class="nc" id="L2259">      englishTrain.splitAux = 2;</span>
<span class="nc" id="L2260">      englishTrain.splitVP = 3;</span>
<span class="nc" id="L2261">      englishTrain.splitSGapped = 4;</span>
<span class="nc" id="L2262">      englishTrain.dominatesV = 0;  // not for linguistic</span>
<span class="nc" id="L2263">      englishTrain.splitTMP = NPTmpRetainingTreeNormalizer.TEMPORAL_ACL03PCFG;</span>
<span class="nc" id="L2264">      englishTrain.splitBaseNP = 1;</span>
<span class="nc" id="L2265">      englishTrain.splitMoreLess = true;</span>
<span class="nc" id="L2266">      englishTrain.correctTags = true;  // different from acl03pcfg</span>
<span class="nc" id="L2267">      i += 1;</span>
<span class="nc bnc" id="L2268" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-goodPCFG&quot;)) {</span>
<span class="nc" id="L2269">      englishTrain.splitIN = 4;  // different from acl03pcfg</span>
<span class="nc" id="L2270">      englishTrain.splitPercent = true;</span>
<span class="nc" id="L2271">      englishTrain.splitNPpercent = 0;  // no longer different from acl03pcfg</span>
<span class="nc" id="L2272">      englishTrain.splitPoss = 1;</span>
<span class="nc" id="L2273">      englishTrain.splitCC = 1;</span>
<span class="nc" id="L2274">      englishTrain.unaryDT = true;</span>
<span class="nc" id="L2275">      englishTrain.unaryRB = true;</span>
<span class="nc" id="L2276">      englishTrain.splitAux = 2;   // different from acl03pcfg</span>
<span class="nc" id="L2277">      englishTrain.splitVP = 3;   // different from acl03pcfg</span>
<span class="nc" id="L2278">      englishTrain.splitSGapped = 4;</span>
<span class="nc" id="L2279">      englishTrain.dominatesV = 1;</span>
<span class="nc" id="L2280">      englishTrain.splitTMP = NPTmpRetainingTreeNormalizer.TEMPORAL_ACL03PCFG;</span>
<span class="nc" id="L2281">      englishTrain.splitNPADV = 1; // different from acl03pcfg</span>
<span class="nc" id="L2282">      englishTrain.splitBaseNP = 1;</span>
      // englishTrain.splitMoreLess = true;   // different from acl03pcfg
<span class="nc" id="L2284">      englishTrain.correctTags = true;  // different from acl03pcfg</span>
<span class="nc" id="L2285">      englishTrain.markDitransV = 2; // different from acl03pcfg</span>
<span class="nc" id="L2286">      i += 1;</span>
<span class="nc bnc" id="L2287" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-ijcai03&quot;)) {</span>
<span class="nc" id="L2288">      englishTrain.splitIN = 3;</span>
<span class="nc" id="L2289">      englishTrain.splitPercent = true;</span>
<span class="nc" id="L2290">      englishTrain.splitPoss = 1;</span>
<span class="nc" id="L2291">      englishTrain.splitCC = 2;</span>
<span class="nc" id="L2292">      englishTrain.unaryDT = false;</span>
<span class="nc" id="L2293">      englishTrain.unaryRB = false;</span>
<span class="nc" id="L2294">      englishTrain.splitAux = 0;</span>
<span class="nc" id="L2295">      englishTrain.splitVP = 2;</span>
<span class="nc" id="L2296">      englishTrain.splitSGapped = 4;</span>
<span class="nc" id="L2297">      englishTrain.dominatesV = 0;</span>
<span class="nc" id="L2298">      englishTrain.splitTMP = NPTmpRetainingTreeNormalizer.TEMPORAL_ACL03PCFG;</span>
<span class="nc" id="L2299">      englishTrain.splitBaseNP = 1;</span>
<span class="nc" id="L2300">      i += 1;</span>
<span class="nc bnc" id="L2301" title="All 2 branches missed.">    } else if (args[i].equalsIgnoreCase(&quot;-goodFactored&quot;)) {</span>
<span class="nc" id="L2302">      englishTrain.splitIN = 3;</span>
<span class="nc" id="L2303">      englishTrain.splitPercent = true;</span>
<span class="nc" id="L2304">      englishTrain.splitPoss = 1;</span>
<span class="nc" id="L2305">      englishTrain.splitCC = 2;</span>
<span class="nc" id="L2306">      englishTrain.unaryDT = false;</span>
<span class="nc" id="L2307">      englishTrain.unaryRB = false;</span>
<span class="nc" id="L2308">      englishTrain.splitAux = 0;</span>
<span class="nc" id="L2309">      englishTrain.splitVP = 3;  // different from ijcai03</span>
<span class="nc" id="L2310">      englishTrain.splitSGapped = 4;</span>
<span class="nc" id="L2311">      englishTrain.dominatesV = 0;</span>
<span class="nc" id="L2312">      englishTrain.splitTMP = NPTmpRetainingTreeNormalizer.TEMPORAL_ACL03PCFG;</span>
<span class="nc" id="L2313">      englishTrain.splitBaseNP = 1;</span>
      // BAD!! englishTrain.markCC = 1;  // different from ijcai03
<span class="nc" id="L2315">      englishTrain.correctTags = true;  // different from ijcai03</span>
<span class="nc" id="L2316">      i += 1;</span>
    }
<span class="nc" id="L2318">    return i;</span>
  }


  /** {@inheritDoc} */
  @Override
  public List&lt;Word&gt; defaultTestSentence() {
<span class="nc" id="L2325">    List&lt;Word&gt; ret = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L2326">    String[] sent = {&quot;This&quot;, &quot;is&quot;, &quot;just&quot;, &quot;a&quot;, &quot;test&quot;, &quot;.&quot;};</span>
<span class="nc bnc" id="L2327" title="All 2 branches missed.">    for (String str : sent) {</span>
<span class="nc" id="L2328">      ret.add(new Word(str));</span>
    }
<span class="nc" id="L2330">    return ret;</span>
  }

  @Override
  public List&lt;GrammaticalStructure&gt;
    readGrammaticalStructureFromFile(String filename)
  {
    try {
<span class="nc bnc" id="L2338" title="All 2 branches missed.">      if (generateOriginalDependencies) {</span>
<span class="nc" id="L2339">        return EnglishGrammaticalStructure.</span>
<span class="nc" id="L2340">            readCoNLLXGrammaticalStructureCollection(filename);</span>
      } else {
<span class="nc" id="L2342">        return UniversalEnglishGrammaticalStructure.</span>
<span class="nc" id="L2343">            readCoNLLXGrammaticalStructureCollection(filename);</span>
      }
<span class="nc" id="L2345">    } catch (IOException e) {</span>
<span class="nc" id="L2346">      throw new RuntimeIOException(e);</span>
    }
  }

  @Override
  public GrammaticalStructure getGrammaticalStructure(Tree t,
                                                      Predicate&lt;String&gt; filter,
                                                      HeadFinder hf) {
<span class="nc bnc" id="L2354" title="All 2 branches missed.">    if (generateOriginalDependencies) {</span>
<span class="nc" id="L2355">      return new EnglishGrammaticalStructure(t, filter, hf);</span>
    } else {
<span class="nc" id="L2357">      return new UniversalEnglishGrammaticalStructure(t, filter, hf);</span>
    }
  }

  @Override
  public boolean supportsBasicDependencies() {
<span class="nc" id="L2363">    return true;</span>
  }

<span class="fc" id="L2366">  private static final String[] RETAIN_TMP_ARGS = { &quot;-retainTmpSubcategories&quot; };</span>

  @Override
  public String[] defaultCoreNLPFlags() {
<span class="nc" id="L2370">    return RETAIN_TMP_ARGS;</span>
  }

  public static void main(String[] args) {
<span class="nc" id="L2374">    TreebankLangParserParams tlpp = new EnglishTreebankParserParams();</span>
<span class="nc" id="L2375">    Treebank tb = tlpp.memoryTreebank();</span>
<span class="nc" id="L2376">    tb.loadPath(args[0]);</span>
<span class="nc bnc" id="L2377" title="All 2 branches missed.">    for (Tree t : tb) {</span>
<span class="nc" id="L2378">      t.pennPrint();</span>
<span class="nc" id="L2379">    }</span>
<span class="nc" id="L2380">  }</span>

  private static final long serialVersionUID = 4153878351331522581L;

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.8.201612092310</span></div></body></html>