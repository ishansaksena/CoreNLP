<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>EnglishPTBTreebankCorrector.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Stanford CoreNLP</a> &gt; <a href="index.source.html" class="el_package">edu.stanford.nlp.trees</a> &gt; <span class="el_source">EnglishPTBTreebankCorrector.java</span></div><h1>EnglishPTBTreebankCorrector.java</h1><pre class="source lang-java linenums">package edu.stanford.nlp.trees; 
import edu.stanford.nlp.util.logging.Redwood;

import java.io.BufferedReader;
import java.io.StringReader;
import java.io.IOException;
import java.util.List;
import java.util.ArrayList;

import edu.stanford.nlp.trees.tregex.Macros;
import edu.stanford.nlp.trees.tregex.TregexPattern;
import edu.stanford.nlp.trees.tregex.TregexPatternCompiler;
import edu.stanford.nlp.trees.tregex.tsurgeon.Tsurgeon;
import edu.stanford.nlp.trees.tregex.tsurgeon.TsurgeonPattern;
import edu.stanford.nlp.util.Pair;


public class EnglishPTBTreebankCorrector implements TreebankTransformer  {

  /** A logger for this class */
<span class="nc" id="L21">  private static Redwood.RedwoodChannels log = Redwood.channels(EnglishPTBTreebankCorrector.class);</span>

  private static final boolean DEBUG = false;

  // &quot;ai&quot; is from &quot;ai n't&quot;; occasionally there is a bare &quot;s&quot; from &quot;is&quot;
  private static final String BE =
    &quot;/^(?i:am|is|are|was|were|be|being|been|'s|'m|'re|s|ai)$/&quot;;

  private static final String DO =
    &quot;/^(?i:do|did|does|doing|done)$/&quot;;

  /** List of be, have, and get auxiliary forms: things that you would expect
   *  to have a VBN complement if anything verbal.
   *  A few times the apostrophe is missing on &quot;'s&quot;, so we have just &quot;s&quot;.
   *  Could also add become, feel, seem, remain for some PTB cases, but
   *  maybe should reparse them?
   */
  private static final String BE_HAVE_GET =
    &quot;/^(?i:has|have|had|having|am|is|are|was|were|be|being|been|'s|'ve|'d|'m|'re|s|ai|get|gets|getting|got|gotten)$/&quot;;

  private static final String MODAL_WORD =
    &quot;/^(?i:should|would|wo|could|may|might|ca|can|dare|will|'ll|must|shall|sha|'d)$/&quot;;

  private static final String MODAL =
    &quot;[ &lt; (__ &lt; /^(?i:should|would|wo|could|may|might|ca|can|dare|will|'ll|must|shall|sha)$/) | &lt; (MD &lt; /^(?i:'d)$/) ]&quot;;

  /** Contexts that take VB complement.  This is a tregex subexpression
   *  that includes the tag.  Something to specify next to VP:
   *  &quot;(@VP&quot; + MODAL_DO_TO + &quot;)&quot;.  na is gonna.  sha is shan't (though doesn't occur).
   *  Not modals that take TO: need, ought.  Or mighta.
   *  Note that &quot;'d&quot; can also be &quot;had&quot;, so one needs to be careful on that!
   */
  private static final String MODAL_DO_TO =
    &quot;[ &lt; (__ &lt; /^(?i:do|did|does|doing|done|to|na|should|would|wo|could|may|might|ca|can|dare|will|'ll|must|shall|sha)$/) | &lt; (MD &lt; /^(?i:'d)$/) ]&quot;;


  /** Verbs that take bare VB complements.
   *  'say' is sort of special, these are semi-direct speech cases where there
   *  are no inverted quotes but imperatives follow.  Check for
   *  overgeneralization.
   */
  private static final String BARE_VP_VERB =
    &quot; &lt; (__ &lt; /^(?i:help|helps|helping|helped|make|makes|making|made|see|sees|saw|seen|seeing|hear|heard|hears|hearing|let|lets|letting)$/)&quot;;

  private static final String SAY_VERB =
    &quot; &lt; (__ &lt; /^(?i:say|says|said|saying)$/)&quot;;

  private final List&lt;Pair&lt;TregexPattern,TsurgeonPattern&gt;&gt; ops;


<span class="nc" id="L71">  public EnglishPTBTreebankCorrector() {</span>
    // initialize the transformations to be done
<span class="nc" id="L73">    ops = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L74">    TreebankLanguagePack tlp = new PennTreebankLanguagePack();</span>
<span class="nc" id="L75">    TregexPatternCompiler tpc = new TregexPatternCompiler(tlp.headFinder(), tlp.getBasicCategoryFunction());</span>
<span class="nc" id="L76">    Macros.addAllMacros(tpc, getBufferedReader(macroStr));</span>
    try {
<span class="nc" id="L78">      BufferedReader br = getBufferedReader(editStr);</span>
<span class="nc" id="L79">      List&lt;TsurgeonPattern&gt; tsp = new ArrayList&lt;&gt;();</span>
<span class="nc bnc" id="L80" title="All 2 branches missed.">      for (String line; (line = br.readLine()) != null; ) {</span>
<span class="nc" id="L81">        TregexPattern matchPattern = tpc.compile(line);</span>
<span class="nc" id="L82">        tsp.clear();</span>
        if (DEBUG) log.info(&quot;Pattern is &quot; + line + &quot; [&quot; + matchPattern + ']');
<span class="nc bnc" id="L84" title="All 2 branches missed.">        while (continuing(line = br.readLine())) {</span>
<span class="nc" id="L85">          TsurgeonPattern p = Tsurgeon.parseOperation(line);</span>
          if (DEBUG) log.info(&quot;Operation is &quot; + line + &quot; [&quot; + p + ']');
<span class="nc" id="L87">          tsp.add(p);</span>
<span class="nc" id="L88">        }</span>
<span class="nc bnc" id="L89" title="All 2 branches missed.">        if ( ! tsp.isEmpty()) {</span>
<span class="nc" id="L90">          TsurgeonPattern tp = Tsurgeon.collectOperations(tsp);</span>
<span class="nc" id="L91">          ops.add(new Pair&lt;&gt;(matchPattern, tp));</span>
        }
<span class="nc" id="L93">      } // while not at end of file</span>
<span class="nc" id="L94">    } catch (IOException ioe) {</span>
<span class="nc" id="L95">      ioe.printStackTrace();</span>
<span class="nc" id="L96">    }</span>
<span class="nc" id="L97">  }</span>

  /** Fix all the English Penn Treebank errors, or at least some of them (!).
   */
  @Override
  public MemoryTreebank transformTrees(Treebank tb) {
<span class="nc" id="L103">    MemoryTreebank mtb = new MemoryTreebank(tb.treeReaderFactory(),</span>
<span class="nc" id="L104">                                            tb.encoding());</span>
<span class="nc bnc" id="L105" title="All 2 branches missed.">    for (Tree t : tb) {</span>
<span class="nc" id="L106">      mtb.add(Tsurgeon.processPatternsOnTree(ops, t));</span>
<span class="nc" id="L107">    }</span>
<span class="nc" id="L108">    return mtb;</span>
  }

  private static boolean continuing(String str) {
<span class="nc bnc" id="L112" title="All 4 branches missed.">    return str != null &amp;&amp; ! str.matches(&quot;\\s*&quot;);</span>
  }

  private static BufferedReader getBufferedReader(String source) {
<span class="nc" id="L116">    return new BufferedReader(new StringReader(source));</span>
  }

  // Note that backslashes and dollar signs need to be escaped.
  // Maybe we should have an easy syntax for invoking Matcher.quoteReplacement?
  private static final String macroStr =
    &quot;HAVE_AUX_WORD\t/^(?i:has|have|had|having|'s|'ve|'d)\\$/\n&quot;;

  private static final String editStr =

    // 1. Bung tree fixing

    // NOTE: if you add more of these, make sure to group the string concatenations
    // into chunks using parentheses, or the compiler will choke with a
    // StackOverflowError (!)

    (
    // Fix a bad parse in wsj_0415.mrg
    (&quot;@VP=adj &lt; (NP &lt; (NP=ex &lt; (NN &lt; growth)) &lt; CC=bad &lt; (NP=bd &lt; (VB &lt; service)))\n&quot; +
    &quot;excise ex ex\n&quot; +
    &quot;delete bad\n&quot; +
    &quot;delete bd\n&quot; +
    &quot;adjoinF (VP VP@ (CC and) (VP (VB service) (NP (NN debt)))) adj\n&quot; +
            '\n') +

    // sec 24
    (&quot;@SBAR=home &lt;1 /^-NONE-$/=emp &lt;2 (@S &lt; (@NP &lt;1 (DT=bad &lt; that|That) &lt;-1 NNS))\n&quot; +
    &quot;delete emp\n&quot; +
    &quot;relabel bad IN\n&quot; +
    &quot;move bad &gt;1 home\n&quot; +
            '\n') +

    // sec 22 bad parse!
    (&quot;@NP &lt; (@NP=gone &lt; (NN &lt; authority)) &lt; (@PP=bad &lt; (TO &lt; to) &lt; (NP=vp &lt; (NN=newv &lt; block) &lt; (NNS=newnp &lt; mergers)))\n&quot; +
    &quot;excise gone gone\n&quot; +
    &quot;adjoin (S (NP-SBJ (-NONE- *)) VP@) bad\n&quot; +
    &quot;relabel vp VP\n&quot; +
    &quot;relabel newv VB\n&quot; +
    &quot;adjoin (NP NN@) newnp\n&quot; +
            '\n') +

    // Fix some cases of 'as well as' not made into a CONJP unit
    // There are a few other wierd cases that should also be reviewed with the tregex
    // well|Well|WELL , as|AS|As . as|AS|As !&gt;(__ &gt; @CONJP)
    // but note that there are also non-CONJP uses as adverbial form of 'as good as'
    // This bleeds retagging of 'well' inside NP below
    (&quot;@NP &lt; (__=bad &lt; well|Well|WELL $, (__=before &lt; as|AS|As) $. (__=after &lt; as|AS|As))\n&quot; +
    &quot;adjoinH (CONJP RB@) bad\n&quot; +
    &quot;relabel bad CONJP\n&quot; +
    &quot;move before &gt;1 bad\n&quot; +
    &quot;move after &gt;-1 bad\n&quot; +
    '\n' )


    ) +

    // 2. POS tag fixing

    // 2.a. Ones specific to a phrasal category

    // 2.a.i NP

    (

    (&quot;@NP &lt; (/^``$/ &lt; /^`$/) &lt; (POS=bad &lt; /^'$/)\n&quot; +
    &quot;relabel bad /''/\n&quot; +
            '\n') +

    (&quot;@NP &lt; (IN|WDT=bad &lt; /^(?:a|that|That)$/)\n&quot; +
    &quot;relabel bad DT\n&quot; +
            '\n') +

    (&quot;@NP &lt; (IN=bad &lt; /^(?:so|about)$/)\n&quot; +
    &quot;relabel bad RB\n&quot; +
            '\n') +

    (&quot;@NP &lt; (IN=bad &lt; /^(?:fiscal|next)$/)\n&quot; +
    &quot;relabel bad JJ\n&quot; +
            '\n') +

    (&quot;@NP &lt; (RB=bad &lt; /^(?:a|that|Some)$/)\n&quot; +
    &quot;relabel bad DT\n&quot; +
            '\n') +

    (&quot;@NP &lt; (RB=bad &lt; most $. DT)\n&quot; +
    &quot;relabel bad PDT\n&quot; +
            '\n') +

    (&quot;@NP &lt; (RB=bad &lt; /^(?:MORE)$/)\n&quot; +
    &quot;relabel bad JJR\n&quot; +
            '\n') +

    (&quot;@NP &lt; (NN=bad &lt; the)\n&quot; +
    &quot;relabel bad DT\n&quot; +
            '\n') +

    (&quot;@NP &lt; (/^VB/=bad &lt; won)\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n') +

    // &quot;well&quot;. Other rules for under INTJ further below.
    (&quot;@NP &lt; (/^RB/=bad &lt; well|WELL|Well)\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n') +

    // treat like &quot;sheep&quot;: if it would be &quot;dollars&quot;, make it plural
    (&quot;@NP &lt; (NN=bad &lt; yen|won [ $- (CD !&lt; one|One|1) | $- (@QP !&lt; (CD &lt; one|One|1)) ] )\n&quot; +
     &quot;relabel bad NNS\n&quot; +
            '\n') +

    // it's 69 NNPS, 17 NNS, 3 NNP for Democrats; 46, 17, 3 for Republicans; all political party mentions
    (&quot;@NP &lt; (NNP|NNS=bad &lt; Democrats|Republicans)\n&quot; +
    &quot;relabel bad NNPS\n&quot; +
            '\n') +

    (&quot;@NP &lt; (CD=bad &lt; the)\n&quot; +
    &quot;relabel bad DT\n&quot; +
            '\n') +

    (&quot;@NP &lt; (JJ=bad &lt; the)\n&quot; +
    &quot;relabel bad DT\n&quot; +
            '\n') +

    (&quot;@NP|NX &lt; (NNP=bad &lt; the)\n&quot; +
    &quot;relabel bad DT\n&quot; +
            '\n') +

    (&quot;@NP=bad &lt; (NNP=badder &lt; Technically|Historically)\n&quot; +
    &quot;relabel bad ADVP\n&quot; +
    &quot;relabel badder RB\n&quot; +
            '\n') +

    (&quot;@NP &lt; (RB=bad &lt; /^(?:McNally)$/)\n&quot; +
    &quot;relabel bad NNP\n&quot; +
            '\n') +

    (&quot;@NP &lt; (RB=bad &lt; /^(?:vice|night|multifamily|hand|fist)$/)\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n') +

    (&quot;@NP &lt; (RP=bad &lt; /^(?:whole)$/)\n&quot; +
    &quot;relabel bad JJ\n&quot; +
            '\n') +

    (&quot;@NP &lt; (RP=bad &lt; Howard) &lt; (NN=badder &lt; /^A\\.$/)\n&quot; +
    &quot;relabel bad NNP\n&quot; +
    &quot;relabel badder NNP\n&quot; +
            '\n') +

    (&quot;@NP &lt; (JJ=bad &lt; (First , (__ !&gt; /^``$/ !&gt; /^-LRB-$/ !&gt; /^PRP\\$$/)) $. NNP)\n&quot; +
    &quot;relabel bad NNP\n&quot; +
            '\n') +

    (&quot;@NP &lt; (JJ=bad &lt; /^(?:U\\.S\\.|Sept\\.)$/)\n&quot; +
    &quot;relabel bad NNP\n&quot; +
            '\n') +

    (&quot;@NP &lt; (JJ=bad &lt;1 Sharp) !&lt;2 __\n&quot; +
    &quot;relabel bad NNP\n&quot; +
            '\n') +

    (&quot;@NP &lt; (JJ=bad &lt; /^(?:mine)$/)\n&quot; +
    &quot;relabel bad NN\n&quot; +                // noun usages (mining)
            '\n') +

    (&quot;@NP &lt;-1 (JJ=bad &lt; firm)\n&quot; +
    &quot;relabel bad NN\n&quot; +                // noun usages
            '\n') +

    (&quot;@NP &lt; (JJ=bad &lt; /^(?:ours)$/)\n&quot; +
    &quot;relabel bad PRP\n&quot; +
            '\n') +

    // don't regard aluminum as an adjective (color)
    // all uses of plastic are also for the noun, not adjectivally for things showing plasticity
    (&quot;@NP &lt; (JJ=bad &lt; aluminum|plastic|textile)\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n') +

    // gold and silver can validly be colours but are usually metals in WSJ.  Use noun to decide
    (&quot;@NP &lt; (JJ=bad &lt; gold|silver|bronze . stocks|bat|standard|reserves|prices|market|price|prices|fund|funds|consumers|use|commemorative|medal|bullion|exploration|producer|producers|trader|traders)\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n') +

    // gold and silver can validly be colours but are usually metals in WSJ.  Use noun to decide
    (&quot;@NP &lt;: (JJ=bad &lt; gold|silver|bronze)\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n') +

    // make all uses of 'the House' (Congress) NNP, like most, and
    // like all uses of 'the Senate'
    (&quot;@NP &lt;2 (NN=bad &lt; House $- (DT &lt; /^[Tt]he$/))\n&quot; +
    &quot;relabel bad NNP\n&quot; +
            '\n') +

    (&quot;@NP &lt; (NNP=bad &lt; Democrats|Republicans)\n&quot; +
    &quot;relabel bad NNPS\n&quot; +
            '\n') +

    (&quot;@NP &lt; (NNS=bad &lt; Democrats|Republicans , __)\n&quot; +
    &quot;relabel bad NNPS\n&quot; +
            '\n') +

    (&quot;@NP &lt; (NN=bad &lt; /^(?:Chapman|Ok|Oslo|Boeing|Jan\\.|Sept\\.|Oct\\.|Nov\\.|Dec\\.|Treasury|Esso)$/)\n&quot; +
    &quot;relabel bad NNP\n&quot; +
            '\n') +

    (&quot;@NP &lt; (NN=bad &lt; /^(?:members|bureaus|days|outfits|institutes|innings|write-offs|wines|trade-offs|tie-ins|thrips|1980s|1920s|receivables|earnings)$/)\n&quot; +
    &quot;relabel bad NNS\n&quot; +
            '\n') +

    (&quot;@NP &lt; (NNP=bad &lt; Dutch $. NN|NNS|JJ|VBG)\n&quot; +
    &quot;relabel bad JJ\n&quot; +
            '\n') +

    (&quot;@NP &lt; (NN=bad &lt; /^(?:this)$/)\n&quot; +
    &quot;relabel bad DT\n&quot; +
            '\n') +

    (&quot;@NP &lt; (/^:/=bad &lt; /^(?:')$/)\n&quot; +
    &quot;relabel bad /''/\n&quot; +
            '\n') +

    (&quot;@NP &lt; (NNS=bad &lt; /^(?:start-up|ground-handling|word-processing|T-shirt|co-pilot|sell-off)$/)\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n') +

    // not clear why Sens isn't NNPS
    (&quot;@NP &lt; (NNS=bad &lt; /^(?:Sens\\.|Aichi|Asahi|Cincinnati|Hawaii|Pepsi)$/)\n&quot; +
    &quot;relabel bad NNP\n&quot; +
            '\n') +

    // VBZ under @NP.  Strong rule ordering!

    // move up misplaced possessives
    (&quot;@NP &lt;1 (@NP=dest !&lt; @NP . (__=wrong &lt; /^\u0027s$/))\n&quot; +
    &quot;move wrong &gt;-1 dest\n&quot; +
            '\n') +

    // fix bung syntax in wsj_0295 and wsj_1142
    (&quot;@S &lt; (@NP=bad &lt; PRP &lt; (VBZ=bottom &lt; /^'s$/)) &lt; (@VP=adj &lt; VBN|VBG)\n&quot; +
    &quot;adjoin (VP (VBZ 's) VP@) adj\n&quot; +
    &quot;delete bottom\n&quot; +
            '\n') +

    (&quot;@S &lt; (NP-SBJ &lt; (PRP &lt; I)) &lt; (VP &lt; (VB=bad &lt; think) &lt; SBAR)\n&quot; +
    &quot;relabel bad VBP\n&quot; +
            '\n') +


    // and an extra weird NP in wsj_0446 and wsj_1101
    (&quot;@VP &lt; (@NP=bad &lt; (VBZ &lt; kills|blames) &lt; @NP)\n&quot; +
    &quot;excise bad bad\n&quot; +
            '\n') +

    // then turn all 's VBZ ino a POS
    // except for Everything's a Dollar Inc. !
    (&quot;@NP &lt; (VBZ=bad &lt; /^'s$/) !&lt; (NNP &lt; Everything)\n&quot; +
    &quot;relabel bad POS\n&quot; +
            '\n') +

    // and then turn all other VBZ that aren't the 's into NNS.
    // 100% precision now!
    // CHECK IF CAN DELETE kills HERE NOW!
    (&quot;@NP|NX &lt; (VBZ=bad !&lt; /^(?:'s|kills)/)\n&quot; +
    &quot;relabel bad NNS\n&quot; +
            '\n') +

    // but turn POS under NP to PRP if it is the 's of let's
    (&quot;@NP &lt; (POS=bad &lt; /^'s$/) &gt; (@S &gt; (@VP &lt; (VB &lt; let)))\n&quot; +
    &quot;relabel bad PRP\n&quot; +
            '\n') +

    // fix VB at root level
    (
     // these ones are VBD
     (&quot;@S &lt; (@VP &lt; (VB=bad &lt; /...ed$/ )) &lt; (/^NP-SBJ/ !&lt; /^-NONE-$/) &gt; (__ !&gt; __)\n&quot; +
      &quot;relabel bad VBD\n&quot; +
             '\n') +

     // these ones are also VBD in practice (though in principle ambiguous)
     (&quot;@S &lt; (@VP &lt; (VB &lt; let|cut|bid| )) &lt; (/^NP-SBJ/ !&lt; /^-NONE-$/) &gt; (__ !&gt; __)\n&quot; +
      &quot;relabel bad VBD\n&quot; +
             '\n') +

     // Then, except in a few weird cases (treebank err, missing letter, reduced &quot;better not&quot; they should be VBP
     (&quot;@S &lt; (@VP &lt; (VB=bad !, Tait|MD|not )) &lt; (/^NP-SBJ/ !&lt; /^-NONE-$/) &gt; (__ !&gt; __)\n&quot; +
      &quot;relabel bad VBP\n&quot; +
             '\n')
     ) +

    // VBP under NP.  First fix one that should be a verb!  NP is wrong

    (&quot;@NP=bad &lt; (VBP &lt; are) &gt; (@VP &gt; (@S &lt; NP-SBJ))\n&quot; +
    &quot;excise bad bad\n&quot; +
            '\n') +

    (&quot;@NP &lt; (VBP=bad &lt; charge)\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n') +

    (&quot;@NP &lt; (VBP=bad &lt; the)\n&quot; +
    &quot;relabel bad DT\n&quot; +
            '\n') +

    (&quot;@NP &lt; (VBP=bad &lt; we)\n&quot; +
    &quot;relabel bad PRP\n&quot; +
            '\n') +

    (&quot;@NP &lt; (VBP=bad &lt; /^[A-Z]/)\n&quot; +
    &quot;relabel bad NNP\n&quot; +
            '\n') +

    // VBN under NP

    (&quot;@NP &lt; (VBN=bad &lt; Applied !$ __)\n&quot; +
    &quot;relabel bad NNP\n&quot; +
            '\n') +

    (&quot;@NP &lt; (VBG=bad &lt; preferred)\n&quot; +
    &quot;relabel bad VBN\n&quot; +
            '\n') +

    (&quot;@NP &lt; (VB=bad &lt; The)\n&quot; +
    &quot;relabel bad DT\n&quot; +
            '\n') +

    (&quot;@NP &lt; (VB=bad &lt; allowed)\n&quot; +
    &quot;relabel bad VBD\n&quot; +
            '\n') +

    (&quot;@NP &lt;-1 (JJR=bad &lt; cleaner)\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n') +

    (&quot;@NP &lt; (VB=bad &lt; /^(?:Nov\\.|Jan\\.|Dec\\.|Tandy|Release|Orkem|McDonald|Citicorp|Anne)$/)\n&quot; +
    &quot;relabel bad NNP\n&quot; +
            '\n') +

    (&quot;@NP &lt; (VB=bad &lt; /^(?:short|key|many|last|further)$/)\n&quot; +
    &quot;relabel bad JJ\n&quot; +
            '\n') +

    (&quot;@NP &lt; (VB=bad &lt; lower)\n&quot; +
    &quot;relabel bad JJR\n&quot; +
            '\n') +

    (&quot;@NP &lt; (VB=bad &lt; /^(?:spill|watch|review|risk|realestate|love|experience|control|Transport|mind|term|program|gender|audit|blame|stock|run|group|affect|rent|show|accord|change|finish|work|schedule|influence|school|freight|growth|travel|call|autograph|demand|abuse|return|defeat|pressure|bank|notice|tax|ooze|network|concern|pit|contract|cash|help|lunch|combat|pot|care|date|Streetspeak|face|effect|worry)$/)\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n') +

    (&quot;@NP &lt;1 (NNP=bad &lt; Officials|Cartoonists|Prices)\n&quot; +
    &quot;relabel bad NNS\n&quot; +
            '\n') +

    (&quot;@NP=badder &lt; (NNP=bad &lt; Currently)\n&quot; +
    &quot;relabel bad RB\n&quot; +
    &quot;relabel badder ADVP-TMP\n&quot; +
            '\n') +

    // nth-quarter as a modifier: may as well treat it as JJ as manual says and majority of instances are
    (&quot;@NP &lt; (NN=bad &lt; /^(?i:first|second|third|fourth)-quarter$/ $+ __)\n&quot; +
     &quot;relabel bad JJ\n&quot; +
            '\n') +

    // may as well take all of &quot;K mart&quot; as a proper noun
    (&quot;@NP &lt; (NNP &lt; K $+ (NN=bad &lt; mart))\n&quot; +
     &quot;relabel bad NNP\n&quot; +
            '\n') +


    (&quot;@NP &lt; (PRP=bad &lt; US &amp; $. __)\n&quot; +
    &quot;relabel bad NNP\n&quot; +
            '\n') +

    (&quot;@NP &lt; (PRP=bad &lt; her &amp; $. __)\n&quot; +
    &quot;relabel bad /PRP$/\n&quot; +
            '\n') +

    (&quot;@NP &lt;1 (PRP=bad &lt; his) !&lt;2 __\n&quot; +
    &quot;relabel bad /PRP$/\n&quot; +
            '\n') +

    (&quot;VBD=bad [ &gt; @NP | &gt; (@ADJP &lt; CC|CONJP &gt; @NP) ]\n&quot; +
    &quot;relabel bad VBN\n&quot; +
            '\n') +

    (&quot;@NP &lt; (NN=bad &lt; Time) &lt; (NNP &lt; Warner)\n&quot; +
    &quot;relabel bad NNP\n&quot; +
            '\n') +

    (&quot;@NP &lt; (MD=bad &lt; Can|May)\n&quot; +
    &quot;relabel bad NNP\n&quot; +
            '\n') +

    // there are a number of cases of 'the the' -- errors in sources or
    // mistakes in Perl scripts?
    // and one case of a/DT half/DT
    (&quot;@NP &lt;1 (DT=bad !&lt; the $. (DT !&lt; half))\n&quot; +
    &quot;relabel bad PDT\n&quot; +
            '\n') +

    // filling out NP with PP modifier.  This rule should precede
    (&quot;@NP=place &lt; (@NP &lt;1 DT !&lt;2 __ $. (JJ=bad $. (NN=badder $. PP)))\n&quot; +
    &quot;move bad &gt;-1 place\n&quot; +
    &quot;move badder &gt;-1 place\n&quot; +
            '\n') +

    // filling out NP with PP modifier.  This rule should follow
    (&quot;@NP=place &lt; (@NP &lt;1 DT|JJ !&lt;2 __ $. (NN=bad $. PP))\n&quot; +
    &quot;move bad &gt;-1 place\n&quot; +
            '\n') +

    // NEWSPAPERS
    (&quot;@NP &lt; (NNPS=bad &lt; NEWSPAPERS ! $ /^NN/)\n&quot; +
    &quot;relabel bad NNS\n&quot; +
            '\n') +

    (&quot;@NP &lt; (@NP &lt; (NNPS=bad &lt; CERTIFICATES)) &lt; (PP &lt; (IN &lt; OF) &lt; (NP &lt; (__ &lt; DEPOSIT)))\n&quot; +
    &quot;relabel bad NNS\n&quot; +
            '\n') +

    (&quot;@NP &lt; (@NP &lt; (__ &lt; CERTIFICATES)) &lt; (PP &lt; (IN &lt; OF) &lt; (NP &lt; (NNPS=bad &lt; DEPOSIT)))\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n') +

    (&quot;@NP &lt; (NNP=bad &lt; DISCOUNT) &lt; (NNP=badder &lt; RATE)\n&quot; +
    &quot;relabel bad NN\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n') +

    (&quot;@NP &lt; (JJ=bad &lt; DISCOUNT) &lt; (NN &lt; RATE)\n&quot; +
    &quot;relabel bad NN\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n') +

    (&quot;@NP &lt; (__ &lt; chief $. (NN=bad &lt; executive $. (NN &lt; officer)))\n&quot; +
    &quot;relabel bad JJ\n&quot; +
            '\n') +

    (&quot;@NP &lt; (NN=bad &lt; chief $. (__ &lt; executive $. (NN &lt; officer)))\n&quot; +
    &quot;relabel bad JJ\n&quot; +
            '\n') +

    (&quot;@NP &lt;: (NNP=bad &lt; /^'s$/)\n&quot; +
    &quot;relabel bad PRP\n&quot; +
            '\n') +

    &quot;NP-TMP=bad &lt; (NN &lt; Leisure)\n&quot; +
    &quot;relabel bad NP\n&quot; +
            '\n' +

    &quot;@NP &lt; (RB=bad &lt; well !$, (RB &lt; as) $,, (DT &lt; The|the))\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n' +

    // chief executive officer
    (&quot;@NP &lt; (NN &lt; officer $- (NN=bad &lt; executive $- (__ &lt; chief)))\n&quot; +
    &quot;relabel bad JJ\n&quot; +
            '\n') +

    // chief executive officer
    (&quot;@NP &lt; (NN &lt; officer $- (JJ &lt; executive $- (NN=bad &lt; chief)))\n&quot; +
    &quot;relabel bad JJ\n&quot; +
            '\n') +

    // the infamous &quot;Ad Notes&quot;
    (&quot;@NP &lt; (NNP=bad &lt; Ad) &lt; (/^NN/ &lt; Notes)\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n') +

    // the infamous &quot;Ad Notes&quot;
    (&quot;@NP &lt; (/^NN/ &lt; Ad) &lt; (NNPS=bad &lt; Notes)\n&quot; +
    &quot;relabel bad NNS\n&quot; +
            '\n') +

    // the infamous &quot;Ad Notes&quot;
    (&quot;NP=bad &lt; (/^NN/ &lt; Ad) &lt; (/^NN/ &lt; Notes)\n&quot; +
    &quot;relabel bad NP-HLN\n&quot; +
            '\n') +

    (&quot;@NP &lt; (NN=bad &lt; nonperforming)\n&quot; +
     &quot;relabel bad JJ\n&quot; +
            '\n') +

    (&quot;@NP &lt; (IN=bad &lt; next|Next) &lt; NN|NNP\n&quot; +
     &quot;relabel bad JJ\n&quot; +
            '\n') +

    (&quot;NP-PRD=x &lt; (JJ=y $+ (NN=z &lt; simple))\n&quot; +
     &quot;relabel x ADJP-PRD\n&quot; +
     &quot;relabel y RB\n&quot; +
     &quot;relabel z JJ\n&quot; +
            '\n') +

    (&quot;NP-PRD=x &lt;: (NN=z &lt; simple)\n&quot; +
     &quot;relabel x ADJP-PRD\n&quot; +
     &quot;relabel z JJ\n&quot; +
            '\n') +

    // this needs to be after the above two &quot;simple&quot; ones
    (&quot;NN=z &lt; simple\n&quot; +
     &quot;relabel z JJ\n&quot; +
            '\n') +

    &quot;&quot;) +


    (&quot;@PP &lt; (IN &lt; behind) &lt; (@NP &lt; PRP=bad &lt; (RB=no &lt; back))\n&quot; +
    &quot;relabel bad /PRP$/\n&quot; +
    &quot;relabel no NN\n&quot; +
            '\n') +

    // equally infamous &quot;Who's News:&quot;
    (&quot;@SBAR=bad &lt; (@WHNP &lt; (WP &lt; WHO)) &lt; (S=badder &lt; (VP &lt; (@NP &lt; (NN &lt; NEWS))))\n&quot; +
    &quot;relabel bad /SBARQ-HLN/\n&quot; +
    &quot;relabel badder SQ\n&quot; +
            '\n') +

    // equally infamous &quot;Who's News:&quot;
    (&quot;@SBARQ &lt; (@WHNP &lt; (WP &lt; WHO)) &lt; (SQ &lt; (VP &lt; (@NP &lt; (NNP=bad &lt; NEWS))))\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n') +

    // equally infamous &quot;Who's News:&quot;
    (&quot;@SBARQ &lt; (@WHNP &lt; (WP &lt; WHO)) &lt; (S=bad &lt; (VP &lt; (@NP &lt; (NN &lt; NEWS))))\n&quot; +
    &quot;relabel bad SQ\n&quot; +
            '\n') +

    (&quot;@WHNP &lt; @WHNP=bad &lt; @WHPP\n&quot; +
    &quot;relabel bad NP\n&quot; +
            '\n') +

    // How much always has 'much' as a JJ
    (&quot;/^WH/ &lt; (WRB &lt; /^(?i:how)$/) &lt; (__=bad &lt; (much !&gt; JJ))\n&quot; +
    &quot;relabel bad JJ\n&quot; +
            '\n') +

    // the VP is for extraposed relatives....
    (&quot;@WHNP|WHADVP &lt; (VBP|DT|IN=bad &lt; /^(?i:that)$/) [ &gt; (@SBAR &gt; @NP|VP) | &gt; (@SBAR &gt; (@SBAR &lt; /^(?:CC|CONJP|,)$/ &gt; @NP|VP)) ]\n&quot; +
    &quot;relabel bad WDT\n&quot; +
            '\n') +


    (&quot;@UCP &lt; (RB=bad &lt; multifamily)\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n') +


    (&quot;@PRT &lt; (RBR=bad &lt; in)\n&quot; +
    &quot;relabel bad RP\n&quot; +
            '\n') +

    (&quot;@PRT &lt; (NNP=bad &lt; up)\n&quot; +
    &quot;relabel bad RP\n&quot; +
            '\n') +


    // PP parent

    (&quot;@PP &lt; (RP=bad &lt; through) &lt; @NP\n&quot; +
    &quot;relabel bad IN\n&quot; +
            '\n') +

    (&quot;@PP &lt; (RP|NN=bad &lt; in) &lt; @NP\n&quot; +
    &quot;relabel bad IN\n&quot; +
            '\n') +

    (&quot;@PP &lt; (RB=bad &lt; for|For|after|After|past|Past|under|Under)\n&quot; +
    &quot;relabel bad IN\n&quot; +
            '\n') +

    (&quot;@PP &lt; (JJ=bad &lt; if)\n&quot; +
    &quot;relabel bad IN\n&quot; +
            '\n') +


    // VP parent

    (&quot;@VP=bad &lt; (IN &lt; past) &lt; @NP\n&quot; +
    &quot;relabel bad PP\n&quot; +
            '\n') +

    (&quot;@VP &lt; (RB=bad &lt; back $. (PRT &lt; (RP &lt; down))) &gt; (@SINV|SQ|VP &lt; MD)\n&quot; +
    &quot;relabel bad VB\n&quot; +
            '\n') +

    (&quot;@VP &lt; (IN=bad &lt; complicated) &gt; @S\n&quot; +
    &quot;relabel bad VBD\n&quot; +
            '\n') +

    (&quot;@VP &lt; (IN=bad &lt; near) &gt; @VP\n&quot; +
    &quot;relabel bad VB\n&quot; +
            '\n') +

    (&quot;@VP &lt; (IN=bad &lt; like|post) &gt; (@SQ|VP &lt; /^(?:VB|MD)/)\n&quot; +
    &quot;relabel bad VB\n&quot; +
            '\n') +

    (&quot;@VP &lt; (IN=bad &lt; like|post) [ &gt; @S | &gt; (@VP &lt; CC|CONJP &gt; @S) ]\n&quot; +
    &quot;relabel bad VBP\n&quot; +
            '\n') +

    (&quot;@VP &lt; (/^VBD?$/=ins &lt; take|sold) &lt; (IN=bad &lt; off)\n&quot; +
    &quot;delete bad\n&quot; +
    &quot;insert (PRT (RP off)) $- ins\n&quot; +
            '\n') +

    // NNS under VP.  Easy.

    (&quot;@VP &lt; NNS=bad\n&quot; +
    &quot;relabel bad VBZ\n&quot; +
            '\n') +

    // ordered rules for NN under VP

    // first fix the ones ending in -ing
    (&quot;@VP &lt; (NN=bad &lt; /.{2}ing$/)\n&quot; +
    &quot;relabel bad VBG\n&quot; +
            '\n') +

    (&quot;@VP &lt; (NN=bad [ &lt; set|beat|bid|redone|reset|hurt|underwritten|overrun | &lt; /.{2}[^e]ed$/ ]) [ &gt; (@VP &lt; (/^VB/ &lt; &quot; + BE_HAVE_GET + &quot;)) | &gt; (@NP &lt; @NP)]\n&quot; +
    &quot;relabel bad VBN\n&quot; +
            '\n') +

    (&quot;@VP &lt; (NN=bad &lt; agreed|set|rebounded|fell) [ &gt; @S | &gt; (@VP &lt; @CC|CONJP &gt; @S) ]\n&quot; +
    &quot;relabel bad VBD\n&quot; +
            '\n') +

    // contexts where an untensed verb should occur
    // an imperative is VB!  The 'say' cases are direct speech imperatives
    (&quot;@VP !&lt; /^VB/ &lt; (NN|NNP|JJ=bad !&lt; /...(?i:ing)$/) [ &gt; (@VP|SINV|SQ &quot; + MODAL_DO_TO + &quot;) | &gt; (@VP|SINV|UCP|SQ &lt; CC|CONJP &gt; (@VP|SINV|UCP|SQ &quot; + MODAL_DO_TO + &quot;)) | &gt; (@S &gt; (@VP &quot; + BARE_VP_VERB + &quot;)) | &gt; (@VP &quot; + BARE_VP_VERB + &quot;) | &gt; (@S &lt; (/^NP-SBJ/ &lt; /^-NONE-$/) &gt; (@VP &quot; + SAY_VERB + &quot;)) ]\n&quot; +
    &quot;relabel bad VB\n&quot; +
            '\n') +

    // file should maybe be VB - subjunctive (look at higher verb? wsj_0979)
    (&quot;@VP !&lt; /^VB/ &lt; (NN=bad [ [ !&lt; /s$/ &amp; !&lt; /e[dn]$/ &amp; !&lt; /ing$/ ] | &lt; stress ] ) [ &gt; @S | &gt; (@VP &lt; @CONJP|CC &gt; @S) ]\n&quot; +
    &quot;relabel bad VBP\n&quot; +
            '\n') +

    // not just anything ending in s.  Definitely not if -ss, but also 'focus'
    (&quot;@VP &lt; (NN=bad &lt; institutes) &gt; @S\n&quot; +
    &quot;relabel bad VBZ\n&quot; +
            '\n') +

    (&quot;@VP &lt; (VBP=bad !&lt; /...(?i:ing)$/) [ &gt; (@VP|SQ|SINV &quot; + MODAL_DO_TO + &quot;) | &gt; (@VP|UCP|SQ|SINV &lt; CC|CONJP &gt; (@VP|UCP|SQ|SINV &quot; + MODAL_DO_TO + &quot;)) | &gt; (@S &gt; (@VP &quot; + BARE_VP_VERB + &quot;)) | &gt; (@VP &quot; + BARE_VP_VERB + &quot;) | &gt; (@S &lt; (/^NP-SBJ/ &lt; /^-NONE-$/) &gt; (@VP &quot; + SAY_VERB + &quot;)) ]\n&quot; +
    &quot;relabel bad VB\n&quot; +
            '\n') +

    // Don't allow SINV for VBN as get participial clauses
    // unless the SINV has a modal under it
    // Allow VBN in complement of SEE or HEAR (but not LET or MAKE)
    (&quot;@VP &lt; (VBN=bad !&lt; /...(?i:ing)$/ !&lt; /...(?i:ed)$/) [ &gt; (@VP|SQ &quot; + MODAL_DO_TO + &quot;) | &gt; (@VP|SQ &lt; CC|CONJP !&lt; /^VB/ &gt; (@VP|SQ &quot; + MODAL_DO_TO + &quot;)) | &gt; (@SINV &quot; + MODAL + &quot;) | &gt; (@SINV &lt; CC|CONJP !&lt; /^VB/ &gt; (@SINV &quot; + MODAL + &quot;)) ]\n&quot; +
    &quot;relabel bad VB\n&quot; +
            '\n') +

    // for transitive, it can't be VBN under see/hear
    (&quot;@VP &lt; (VBN=bad !&lt; /...(?i:ing)$/) &lt; (NP !&lt; /^-NONE-$/) [ &gt; (@S &gt; (@VP &quot; + BARE_VP_VERB + &quot;)) | &gt; (@VP &quot; + BARE_VP_VERB + &quot;) | &gt; (@S &lt; (/^NP-SBJ/ &lt; /^-NONE-$/) &gt; (@VP &quot; + SAY_VERB + &quot;)) ]\n&quot; +
    &quot;relabel bad VB\n&quot; +
            '\n') +

    (&quot;@VP &lt; (NN=bad &lt; relocate) &gt; (@VP &lt; @CONJP &gt; (@VP &lt; MD))\n&quot; +
    &quot;relabel bad VB\n&quot; +
            '\n') +

    (&quot;@VP &lt; (NN=bad &lt; might|will)\n&quot; +
    &quot;relabel bad MD\n&quot; +
            '\n') +

    // ordered rules for NNP under VP

    // it's VBD for SINV
    (&quot;@VP &lt; (NNP=bad &lt; /...(?i:ed)$/) [ &gt; (SINV !&gt; /TTL/) | &gt; (@VP &lt; @CONJP|CC &gt; (SINV !&gt; /TTL/)) ]\n&quot; +
    &quot;relabel bad VBD\n&quot; +
            '\n') +

    // it's VBN not VBD because the one or two there are headline-speak
    (&quot;@VP &lt; (NNP=bad &lt; /...(?i:ed)$/) [ &gt; (S|S-HLN|S-ADV !&gt; /TTL/) | &gt; (@VP &lt; @CONJP|CC &gt; (S|S-HLN|S-ADV !&gt; /TTL/)) | &gt; (@VP &lt; (__ &lt; &quot; + BE_HAVE_GET + &quot;)) ]\n&quot; +
    &quot;relabel bad VBN\n&quot; +
            '\n') +

    // it's VBN not VBD because the one or two there are headline-speak
    (&quot;@VP &lt; (NNP=bad &lt; Got|Gotten) [ &gt; (S|S-HLN|S-ADV !&gt; /TTL/) | &gt; (@VP &lt; @CONJP|CC &gt; (S|S-HLN|S-ADV !&gt; /TTL/)) | &gt; (@VP &lt; (__ &lt; &quot; + BE_HAVE_GET + &quot;)) ]\n&quot; +
    &quot;relabel bad VBN\n&quot; +
            '\n') +

    // ordered rules for NNP under VP  (2 dots as want to get &quot;Adds&quot;)
    (&quot;@VP &lt; (NNP=bad &lt; /..[^Ss](?i:s)$/) [ &gt; (S|S-HLN|SINV !&gt; /TTL/) | &gt; (@VP &lt; @CONJP|CC &gt; (S|SINV|S-HLN !&gt; /TTL/)) ]\n&quot; +
    &quot;relabel bad VBZ\n&quot; +
            '\n') +

    // ordered rules for NNP under VP
    (&quot;@VP !&lt; /^VB/ &lt; (NNP=bad &lt; /(?i:ing)$/)\n&quot; +
    &quot;relabel bad VBG\n&quot; +
            '\n') +

    // ordered rules for NNP under VP
    (&quot;@VP &lt; NNP=bad [ &gt; (S|S-HLN !&gt; /TTL/) | &gt; (@VP &lt; @CONJP|CC &gt; (S|S-HLN !&gt; /TTL/)) ]\n&quot; +
    &quot;relabel bad VBP\n&quot; +
            '\n') +

    // this one is in a title....
    (&quot;@VP &lt; (NNP=bad &lt; are) [ &gt; @S | &gt; (@VP &lt; @CONJP|CC &gt; @S) ]\n&quot; +
    &quot;relabel bad VBP\n&quot; +
            '\n') +

    /* ----------------------------
       tregex3 -f -w '@VP &lt; NN' | &amp; less

       // unresolved: some bid, ask cases

       // so far only done 1-1000 inclusive

            } else if (word.equals(&quot;reconfirm&quot;)) {
              cat = changeBaseCat(cat, &quot;VB&quot;);
            } else if (word.equals(&quot;rebounded&quot;)) {
              cat = changeBaseCat(cat, &quot;VBD&quot;);
            }
    // still need to do NNP &gt; VP rules as well!
       --------------------- */

    /*
          } else if (baseCat.equals(&quot;NNP&quot;)) {
            if (word.equals(&quot;GRAB&quot;)) {
              cat = changeBaseCat(cat, &quot;VBP&quot;);
            } else if (word.equals(&quot;mature&quot;)) {
              cat = changeBaseCat(cat, &quot;VB&quot;);
            } else if (word.equals(&quot;Face&quot;)) {
              cat = changeBaseCat(cat, &quot;VBP&quot;);
            } else if (word.equals(&quot;are&quot;)) {
              cat = changeBaseCat(cat, &quot;VBP&quot;);
            } else if (word.equals(&quot;say&quot;)) {
              cat = changeBaseCat(cat, &quot;VBP&quot;);
            } else if (word.equals(&quot;Added&quot;)) {
              cat = changeBaseCat(cat, &quot;VBD&quot;);
            } else if (word.equals(&quot;Adds&quot;)) {
              cat = changeBaseCat(cat, &quot;VBZ&quot;);
            } else if (word.equals(&quot;BRACED&quot;)) {
              cat = changeBaseCat(cat, &quot;VBD&quot;);
            } else if (word.equals(&quot;REQUIRED&quot;)) {
              cat = changeBaseCat(cat, &quot;VBN&quot;);
            } else if (word.equals(&quot;REVIEW&quot;)) {
              cat = changeBaseCat(cat, &quot;VB&quot;);
            } else if (word.equals(&quot;code-named&quot;)) {
              cat = changeBaseCat(cat, &quot;VBN&quot;);
            } else if (word.equals(&quot;Printed&quot;)) {
              cat = changeBaseCat(cat, &quot;VBN&quot;);
            } else if (word.equals(&quot;Rated&quot;)) {
              cat = changeBaseCat(cat, &quot;VBN&quot;);
            } else if (word.equals(&quot;FALTERS&quot;)) {
              cat = changeBaseCat(cat, &quot;VBZ&quot;);
            } else if (word.equals(&quot;Got&quot;)) {
              cat = changeBaseCat(cat, &quot;VBN&quot;);
            } else if (word.equals(&quot;Adds&quot;)) {
              cat = changeBaseCat(cat, &quot;VBZ&quot;);
            }
    */

    // Modal fixes: of 'd tagged as VBD and others tagged VBP

    // first fix one where the complement verb tag is wrong
    (&quot;@VP &lt; (VBD &lt; /^(?i:'d)$/) &lt; (@VP &lt; (VB=badder &lt; seen))\n&quot; +
    &quot;relabel badder VBN\n&quot; +
            '\n') +

    (&quot;@VP &lt; (VBP=bad &lt; &quot; + MODAL_WORD + &quot;) &lt; (@VP &lt; VB)\n&quot; +
    &quot;relabel bad MD\n&quot; +
            '\n') +

    (&quot;@VP &lt; (VBP=bad &lt; /^(?i:'d)$/) &lt; (@VP &lt; VB)\n&quot; +
    &quot;relabel bad MD\n&quot; +
            '\n') +


    // this must be ordered before the have/be auxiliary complement fix!
    (&quot;@VP &lt; POS=bad\n&quot; +
    &quot;relabel bad VBZ\n&quot; +
            '\n') +

    (&quot;@VP &lt; (VBD=bad &lt; heaves)\n&quot; +
    &quot;relabel bad VBZ\n&quot; +
            '\n') +

    (&quot;@VP &lt; (VB=bad &lt; /.{2}[^e]ed$/) &gt; @S\n&quot; +
    &quot;relabel bad VBD\n&quot; +
            '\n') +

    (&quot;@VP &lt; (VB=bad &lt; /^(?i:.{2,}[^e]ed|reset|run|become|hit|remade|gone|rid|put|hurt|become)$/) [ &gt; (@VP &lt; (/^VB/ &lt; &quot; + BE_HAVE_GET + &quot;)) | &gt; (@NP &lt; @NP) ]\n&quot; +
    &quot;relabel bad VBN\n&quot; +
            '\n') +

    (&quot;@VP &lt; (VBN=bad &lt; has)\n&quot; +
    &quot;relabel bad VBZ\n&quot; +
            '\n') +

    (&quot;@VP &lt; (VBN=bad &lt; grew|fell|had) [ &gt; @S | &gt; (@VP &lt; CONJP|CC &gt; @S)]\n&quot; +
    &quot;relabel bad VBD\n&quot; +
            '\n') +

    // Doing the VBN to VBD is too general because of auxiliary deletion in
    // contracted constructions, headlines, etc.
    // Nevertheless, there are quite a few cases....
    // Try ones with objects??
    // &quot;@VP &lt; VBN=bad [ &gt; @S | &gt; (@VP &lt; CONJP|CC &gt; @S) ]\n&quot; +
    // &quot;relabel bad VBN\n&quot; +
    // &quot;\n&quot; +
    // Below are three patterns that doesn't overgeneralize and still gets a
    // lot of the cases: note that they don't use @ so as to not match NP-TMP
    // or S-HLN, and checks for non-NULL constituents

    // must be finite in clause with overt NPsubj and NPobj
    (&quot;@VP &lt; VBN=bad &lt; (NP !&lt; /^-NONE-$/) [ &gt; (S &lt; (@NP !&lt; /^-NONE-$/)) | &gt; (@VP &lt; CONJP|CC &gt; (S &lt; (@NP !&lt; /^-NONE-$/))) ]\n&quot; +
    &quot;relabel bad VBD\n&quot; +
            '\n') +

    // root main clauses with overt subj must be finite
    (&quot;@VP &lt; VBN=bad [ &gt; (S &lt; (@NP !&lt; /^-NONE-$/) &gt; (__ !&gt; __)) | &gt; (@VP &lt; CONJP|CC &gt; (S &lt; (@NP !&lt; /^-NONE-$/) &gt; (__ !&gt; __))) ]\n&quot; +
    &quot;relabel bad VBD\n&quot; +
            '\n') +

    // that clauses (or that-less that clauses) with overt subjects are finite
    (&quot;@SBAR [ &lt; (/^-NONE-$/ &lt; /^0$/) | &lt; (IN &lt; that) ] &lt; (@S &lt; (NP-SBJ !&lt; /^-NONE-$/) &lt; (@VP &lt; VBN=bad))\n&quot; +
    &quot;relabel bad VBD\n&quot; +
            '\n') +

    // similar but more limited corrections of VB to VBP
    // have to beware getting VB in imperatives, subjunctives, etc.
    // root main clauses with overt subj must be finite
    (&quot;@VP &lt; VB=bad [ &gt; (S &lt; (NP-SBJ !&lt; /^-NONE-$/) &gt; (__ !&gt; __)) | &gt; (@VP &lt; CONJP|CC &gt; (S &lt; (NP-SBJ !&lt; /^-NONE-$/) &gt; (__ !&gt; __))) ]\n&quot; +
    &quot;relabel bad VBP\n&quot; +
            '\n') +

    // Should have a finite VBP not a VB in a finite relative clause
    (&quot;@NP &lt; @NP &lt; (@SBAR &lt; @WHNP &lt; (@S &lt; (VP &lt; VB=bad)))\n&quot; +
    &quot;relabel bad VBP\n&quot; +
            '\n') +

    (&quot;@VP &lt; CONJP|CC &lt;1 (VBP $.. VB=bad)\n&quot; +
    &quot;relabel bad VBP\n&quot; +
            '\n') +

    (&quot;@VP &lt; (VBP=bad &lt; has)\n&quot; +
    &quot;relabel bad VBZ\n&quot; +
            '\n') +

    // JJ under VP rewrites (see also above for BARE_VP_VERB generalizations)

    (&quot;@VP &lt; (JJ=bad &lt; own|elaborate) [ &gt; @S | &gt; (@VP &lt; CONJP|CC &gt; @S)]\n&quot; +
    &quot;relabel bad VBP\n&quot; +
            '\n') +

    (&quot;@VP &lt; (JJ=bad &lt; /..ing$/) &lt; (@S &lt; (@NP !&lt; /^-NONE-$/) &lt; (VP &lt; TO))\n&quot; +
    &quot;relabel bad VBG\n&quot; +
            '\n') +

    (&quot;@VP &lt; (JJ=bad &lt; /...ed$/) [ &gt; @S | &gt; (@VP &lt; CONJP|CC &gt; @S)]\n&quot; +
    &quot;relabel bad VBD\n&quot; +
            '\n') +

    (&quot;@VP &lt; (JJ=bad &lt; pressured|known) [ &gt; (@VP &lt; (__ &lt; &quot; + BE + &quot;)) | &gt; (@VP &lt; CONJP|CC &gt; (@VP &lt; (__ &lt; &quot; + BE + &quot;))) ]\n&quot; +
    &quot;relabel bad VBN\n&quot; +
            '\n') +

    (&quot;@VP &lt; (JJ=bad &lt; /(?i:..e[dn])$/) &gt; (@VP &lt; (__ &lt; HAVE_AUX_WORD))\n&quot; +
    &quot;relabel bad VBN\n&quot; +
            '\n') +

    (&quot;@VP &lt; (JJ=bad &lt; /.{2}ing$/) [ &gt; @S | &gt; (@VP &lt; CONJP|CC &gt; @S)]\n&quot; +
    &quot;relabel bad VBG\n&quot; +
            '\n') +

    (&quot;@VP &lt; (JJ=bad &lt; to)\n&quot; +
    &quot;relabel bad TO\n&quot; +
            '\n') +

    (&quot;@VP|S &lt; (JJ=bad &lt; all|ALL|All)\n&quot; +
    &quot;relabel bad RB\n&quot; +
            '\n') +

    // VBN after have/be auxiliaries
    (&quot;@VP &lt; VBD=bad [ &gt; (@VP &lt; (/^VB/ &lt; &quot; + BE_HAVE_GET + &quot;)) | &gt; (@VP &lt; CONJP|CC &gt; (@VP &lt; (/^VB/ &lt; &quot; + BE_HAVE_GET + &quot;))) | &gt; (@NP &lt; @NP) ]\n&quot; +
    &quot;relabel bad VBN\n&quot; +
            '\n') +

    // Asked, Warned, etc. at start of sentence
    (&quot;@VP &lt; (VBD=bad &lt; /[A-Z]/) &gt; S-ADV\n&quot; +
    &quot;relabel bad VBN\n&quot; +
            '\n') +

    (&quot;@VP &lt; (/^VB/ $. (IN=bad &lt; up|off))\n&quot; +
    &quot;adjoin (PRT (RP@)) bad\n&quot; +
            '\n') +

    // remove the two (!) unsure phrasal categories: ADVP|PRT, PRT|ADVP
    (&quot;@VP &lt; /^VB/ &lt; (/^(?:ADVP|PRT)\\|(?:ADVP|PRT)$/=bad &lt; (RB|NN=badder &lt; back))\n&quot; +
    &quot;relabel bad PRT\n&quot; +
    &quot;relabel badder RP\n&quot; +
            '\n') +

    // make other instances of 'win back' particle verbs
    (&quot;@VP &lt; (/^VB/ &lt; win|wins|winning|won) &lt; (@ADVP=bad &lt; (RB=badder &lt; back))\n&quot; +
    &quot;relabel bad PRT\n&quot; +
    &quot;relabel badder RP\n&quot; +
            '\n') +

    // TODO: do other instances of put back.  Worth looking at Treebank II -PUT

    (&quot;@VP &lt; (PDT=bad &lt; all)\n&quot; +
    &quot;relabel bad RB\n&quot; +
            '\n') +

    (&quot;@VP &lt; (PRT &lt; (VBP=bad &lt; down))\n&quot; +
    &quot;relabel bad RP\n&quot; +
            '\n') +

    (&quot;@VP &lt; (PRT=bad &lt; (RBS &lt; best))\n&quot; +
    &quot;relabel bad ADVP\n&quot; +
            '\n') +

    (&quot;@VP &lt;1 (VB=bad &lt; plea) &lt;2 (NN=badder &lt; bargain) &gt; (@VP&quot; + MODAL_DO_TO + &quot;)\n&quot; +
    &quot;relabel bad NN\n&quot; +
    &quot;relabel badder VB\n&quot; +
            '\n') +

    // ADJP rules

    (
    (&quot;@ADJP &lt; UH=bad\n&quot; +
    &quot;relabel bad JJ\n&quot; +
            '\n') +

    // &quot;alive and well&quot;
    (&quot;@ADJP &lt; (JJ &lt; alive) &lt; CC &lt; (RB=bad &lt; well)\n&quot; +
    &quot;relabel bad JJ\n&quot; +
            '\n') +

    (&quot;@ADJP &lt; (JJ=bad &lt; more)\n&quot; +
    &quot;relabel bad JJR\n&quot; +
            '\n') +

    (&quot;Korean &gt; (NNP=x $- (NNP=y &lt; South))\n&quot; +
     &quot;relabel x JJ\n&quot; +
     &quot;relabel y JJ\n&quot; +
            '\n') +

    (&quot;@ADJP &lt;1 (NNP=x &lt; /^(?:New|San|Los|Des|St\\.|Washington|Hong)$/) &lt;2 (__ &lt; /^(?:York|Francisco|Angeles|London|Orleans|Zealand|Diego|Moines|Louis|D\\.C\\.|Kong)-based$/) !&lt;3 __\n&quot; +
     &quot;relabel x JJ\n&quot; +
            '\n') +

    (&quot;@ADJP &lt;1 (__ &lt; New|San|Los) &lt;2 (NNP=y &lt; /^(?:York|Francisco|Angeles)-based$/) !&lt;3 __\n&quot; +
     &quot;relabel y JJ\n&quot; +
            '\n') +

    (&quot;@ADJP &lt; (NN=bad &lt; firm|due|permissible)\n&quot; +
    &quot;relabel bad JJ\n&quot; +
            '\n') +

    (&quot;@ADJP &lt; (NNS=bad &lt; due)\n&quot; +
    &quot;relabel bad JJ\n&quot; +
            '\n') +

    (&quot;@ADJP &lt; (NNP=bad &lt; READY)\n&quot; +
    &quot;relabel bad JJ\n&quot; +
            '\n') +

    (&quot;@ADJP &lt; (RB=bad &lt; free|clear|tight|sure|particular|due)\n&quot; +
    &quot;relabel bad JJ\n&quot; +
            '\n') +
    // consider also &quot;hard&quot; -- many but not all cases should be JJ

    (&quot;@ADJP &lt; (RB=bad &lt; likely) &gt; @VP\n&quot; +
    &quot;relabel bad JJ\n&quot; +
            '\n') +
    // reconsider also cases not under VP, but some looked more complex....

    (&quot;@ADJP &lt; (VB=bad &lt; /^(?i:stock|No\\.)$/)\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n') +

    (&quot;@ADJP &lt; (VBP=bad &lt; fit|close)\n&quot; +
    &quot;relabel bad JJ\n&quot; +
            '\n') +

    (&quot;@ADJP &lt; (VB=bad &lt; secure|keen|quiet)\n&quot; +
    &quot;relabel bad JJ\n&quot; +
            '\n') +

    (&quot;@ADJP &lt; JJ &lt; (IN=bad &lt; that)\n&quot; +
     &quot;relabel bad RB\n&quot; +
            '\n') +

    &quot;&quot;) +


    (&quot;@QP &lt; (IN|JJ|RBR|RP=bad &lt; about)\n&quot; +
    &quot;relabel bad RB\n&quot; +
            '\n') +

    (&quot;@QP &lt; (JJ=bad &lt; as)\n&quot; +
    &quot;relabel bad RB\n&quot; +
            '\n') +
    // look at 'as' examples, but don't want to maul 'as much as X' idiom

    (&quot;@QP &lt; (JJ|JJS=bad &lt; more|less)\n&quot; +
    &quot;relabel bad JJR\n&quot; +
            '\n') +
    // need to work out whether to relabel all the RBR ones similarly....

    (&quot;@QP &lt; (RP=bad &lt; up $. (TO &lt;to))\n&quot; +
    &quot;relabel bad IN\n&quot; +
            '\n') +
    // there's some IN/RB variability for this up ... what's correct/why?

    (&quot;@ADVP &lt; EX=bad\n&quot; +
    &quot;relabel bad RB\n&quot; +
            '\n') +

    (&quot;@ADVP &lt; (NN=bad &lt; that)\n&quot; +
    &quot;relabel bad DT\n&quot; +
            '\n') +

    (&quot;@ADVP &lt; (NNP=bad [ &lt; /.{2}ly$/ | &lt; Overall | &lt; Systemwide ])\n&quot; +
    &quot;relabel bad RB\n&quot; +
            '\n') +

    (&quot;@ADVP &lt; (RP=bad &lt; around|before)\n&quot; +
    &quot;relabel bad RB\n&quot; +
            '\n') +

    (&quot;@ADVP=bad &lt;1 PRT !&lt;2 __\n&quot; +
    &quot;excise bad bad\n&quot; +
            '\n') +

    // special for let
    (&quot;@ADVP &lt; (VBD=bad &lt; let) &lt; (RB=badder &lt; alone)\n&quot; +
    &quot;relabel bad VB\n&quot; +
    &quot;relabel badder JJ\n&quot; +
            '\n') +

    // in general must be non finite
    (&quot;@ADVP &lt; VBD=bad\n&quot; +
    &quot;relabel bad VBN\n&quot; +
            '\n') +


    (&quot;@SBAR &lt; (DT|WDT|NN|NNP|RB=bad &lt; that|because|while|Though|Whether)\n&quot; +
    &quot;relabel bad IN\n&quot; +
            '\n') +

    (&quot;@SQ &lt; VB=bad\n&quot; +
    &quot;relabel bad VBP\n&quot; +
            '\n') +

    (&quot;@SQ &lt; (NNS=bad $. NP-SBJ)\n&quot; +
    &quot;relabel bad VBZ\n&quot; +
            '\n') +

    (&quot;@SQ &lt; (NNP=bad &lt; Does)\n&quot; +
    &quot;relabel bad VBZ\n&quot; +
            '\n') +

    (&quot;@SQ &lt; (NNP=bad &lt; Should)\n&quot; +
    &quot;relabel bad MD\n&quot; +
            '\n') +

    (&quot;@X &lt; (JJS=bad &lt; more|less)\n&quot; +
    &quot;relabel bad JJR\n&quot; +
            '\n') +

    // Under INTJ


    (&quot;@INTJ &lt; (RB=bad &lt; well|WELL|Well)\n&quot; +
    &quot;relabel bad UH\n&quot; +
            '\n') +

    (&quot;@INTJ &lt; (NNP=bad &lt; UH|HUH)\n&quot; +
    &quot;relabel bad UH\n&quot; +
            '\n') +


    // non-phrasally rooted POS tag corrections

    (&quot;JJ=bad &lt; /^%$/\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n') +

    (&quot;NN|NNP|JJ|IN=bad &lt; and\n&quot; +
    &quot;relabel bad CC\n&quot; +
            '\n') +

    (&quot;VB=bad &lt; even\n&quot; +
    &quot;relabel bad RB\n&quot; +
            '\n') +

    // bad comma tags section

    (&quot;/^,$/=bad &lt; /^2$/\n&quot; +
    &quot;relabel bad CD\n&quot; +
            '\n') +

    (&quot;/^,$/=bad &lt; an\n&quot; +
    &quot;relabel bad DT\n&quot; +
            '\n') +

    (&quot;/^,$/=bad &lt; Wa\n&quot; +
    &quot;relabel bad NNP\n&quot; +
            '\n') +

    (&quot;/^,$/=bad &lt; section\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n') +

    (&quot;/^,$/=bad &lt; underwriters\n&quot; +
    &quot;relabel bad NNS\n&quot; +
            '\n') +


    (&quot;CD=bad &lt; high-risk\n&quot; +
    &quot;relabel bad JJ\n&quot; +
            '\n') +

    (&quot;RB|RP|NN=bad &lt; for|at\n&quot; +
    &quot;relabel bad IN\n&quot; +
            '\n') +

    (&quot;NN=bad [ &lt; /^.\\.$/ | &lt; Lorillard ]\n&quot; +
    &quot;relabel bad NNP\n&quot; +
            '\n') +

    (&quot;JJS=bad &lt; StatesWest\n&quot; +
    &quot;relabel bad NNP\n&quot; +
            '\n') +

    (&quot;JJR=bad &lt; Richter|Gartner\n&quot; +
    &quot;relabel bad NNP\n&quot; +
            '\n') +

    (&quot;IN|JJ|NN|NNP=bad &lt; /^[Aa][Nn][Dd]$/\n&quot; +
    &quot;relabel bad CC\n&quot; +
            '\n') +

    // This is for 'ago' as adverb
    // TODO: reconsider this -- I think Pullum argues for IN
    // &quot;IN=bad &lt; ago\n&quot; +
    // &quot;relabel bad RB\n&quot; +
    // &quot;\n&quot; +

    // The next several are for 'ago' as postposition IN
    // NP is marked -ADV at least once... (strip it?)
    (&quot;/^(?:ADVP|ADVP-TMP.*)$/=badder &lt; (RB=bad &lt; ago) &lt; @NP\n&quot; +
    &quot;relabel bad IN\n&quot; +
    &quot;relabel badder PP-TMP\n&quot; +
            '\n') +

    (&quot;ADV-TMP=bad &lt; (ADVP|NP=badder &lt; (IN &lt; ago) &lt; @NP)\n&quot; +
    &quot;relabel bad PP-TMP\n&quot; +
    &quot;relabel badder PP\n&quot; +
            '\n') +

    // TODO: for cases embedded in ADV-TMP: &quot;a year ago, when X was snamed pres&quot;:
    // higher one PP-TMP.
    (&quot;/^(?:ADVP|NP)/=badder &lt; (IN &lt; ago) &lt; @NP\n&quot; +
    &quot;relabel badder PP-TMP\n&quot; +
            '\n') +

    (&quot;@NP=badder &lt; (RB=bad &lt; ago) &lt; @NP\n&quot; +
    &quot;relabel bad IN\n&quot; +
    &quot;relabel badder PP-TMP\n&quot; +
            '\n') +

    (&quot;/^ADVP-TMP/=badder &lt; (RB &lt; not|Not|so|So) &lt; (RB=jj &lt; long) &lt; (RB=bad &lt; ago)\n&quot; +
    &quot;adjoin (PP-TMP NP@ (IN ago)) badder\n&quot; +
    &quot;delete bad\n&quot; +
    &quot;relabel jj JJ\n&quot; +
            '\n') +

    (&quot;/^ADVP-TMP/=badder &lt;1 (RB|JJ=jj &lt; long) &lt;2 (RB=bad &lt; ago)\n&quot; +
    &quot;adjoin (PP-TMP NP@ (IN ago)) badder\n&quot; +
    &quot;delete bad\n&quot; +
    &quot;relabel jj JJ\n&quot; +
            '\n') +

    (&quot;ADJP=badder &lt;1 (NN=baddest &lt; Year) &lt;2 (RB=bad &lt; ago)\n&quot; +
    &quot;adjoin (NP NN@) baddest\n&quot; +
    &quot;relabel badder PP-TMP\n&quot; +
    &quot;relabel bad IN\n&quot; +
            '\n') +

    (&quot;@NP=bad &lt;1 NP &lt;2 (ADVP-TMP=badder &lt; (RB=baddest &lt; ago))\n&quot; +
    &quot;relabel bad PP-TMP\n&quot; +
    &quot;excise badder badder\n&quot; +
    &quot;relabel baddest IN\n&quot; +
            '\n') +

    (&quot;/^NP/=badder &lt; DT|CD &lt; NN|NNS &lt; (RB|IN=bad &lt; ago)\n&quot; +
    &quot;adjoin (PP-TMP NP@ (IN ago)) badder\n&quot; +
    &quot;delete bad\n&quot; +
            '\n') +

    // TODO: Provisional rule for this tree; should be revised!
    //    (ADVP-TMP
    //     (ADVP
    //      (ADVP (RB As) (RB long))
    //      (PP (IN as)
    //       (NP (DT a) (NN decade))))
    //     (IN ago))
    (&quot;ADVP-TMP=badder &lt; (IN &lt; ago) &lt; @ADVP\n&quot; +
    &quot;relabel badder PP-TMP\n&quot; +
            '\n') +

    // TODO: this suggests a postposing in the above sentence! Do as movement?
    //    (ADVP-TMP
    //     (ADVP (RB as) (JJ long) (RB ago))
    //     (PP (IN as)
    //      (NP (JJ early) (CD 1988))))


    // &quot;RB=bad &lt; ago\n&quot; +
    // &quot;relabel bad IN\n&quot; +
    // &quot;\n&quot; +



    /*
      (ADVP-TMP
        (ADVP
          (NP (CD 25) (NNS years))
          (RB ago))
        (, ,)
        (SBAR
          (WHADVP-1 (WRB when))

            (NP-TMP
              (ADVP
                (NP (DT a) (NN year))
                (RB ago))
              (, ,)
              (SBAR
                (WHADVP-1 (WRB when))

        (ADVP
          (NP (DT a) (NN year))
          (RB ago))))

                    (ADVP-TMP
                      (ADVP
                        (NP (DT a) (NN year))
                        (RB ago))
                      (, ,)
                      (SBAR
                        (WHADVP-1 (WRB when))
                        (S

                (PP-DIR (IN from)
                  (ADVP
                    (NP (DT a) (NN year))
                    (RB ago)))))))))

            (NP (DT the) (NN use))
            (PP (IN of)
              (NP (NNS incentives)))
            (UCP-TMP
              (NP (DT this) (NN year))
              (CC and)
              (RB not)
              (ADVP
                (NP (DT a) (NN year))
                (RB ago)))))

              (ADVP-TMP (RB so) (RB long) (RB ago))))

          (PP-DIR (IN from)
            (NP-TMP
              (NP (DT a) (NN year))
              (IN ago))))))

              (NP-TMP (DT a) (NN year) (IN ago)))))))

                  (PP-TMP (IN from)
                    (ADVP
                      (NP (DT a) (NN year))
                      (IN ago)))

          (ADVP-TMP
            (ADVP
              (NP (CD five) (NNS years))
              (IN ago))
            (, ,)
            (SBAR
              (WHPP-2 (IN at)
                (WHNP (WDT which) (NN time)))

        (ADVP
          (NP
            (QP (JJR more) (IN than) (CD 30))
            (NNS years))
          (IN ago))
        (, ,)
        (SBAR
          (WHADVP (WRB when))

    (NP-SBJ-1
      (ADJP (NN Year) (RB ago))
      (NN figure))

                (PP-TMP (IN until)
                  (ADVP
                    (NP (CD three) (NNS years))
                    (RB ago))))))))

        (PP-TMP (IN from)
          (ADVP
            (NP (CD six) (NNS years))
            (RB ago)))))

          (PP (IN of)
            (NP
              (NP (RB about) (CD two) (NNS decades))
              (ADVP-TMP (RB ago)))))))

              (PP-DIR (IN from)
                (ADVP
                  (NP (DT a) (NN year))
                  (RB ago))))))))

        (NP-TMP
          (NP (DT a) (NN year))
          (RB ago))))

                (PP-TMP (IN from)
                  (ADVP
                    (NP (DT a) (NN year))
                    (IN ago)))))))))

            (NP
              (ADVP
                (NP (CD six) (NNS months))
                (IN ago))
              (, ,)
              (SBAR
                (WHADVP-1 (WRB when))

      (PP-TMP (IN from)
        (ADVP
          (NP (DT a) (NN year))
          (IN ago)))

                      (NP-TMP
                        (ADVP
                          (NP (DT a) (NN year))
                          (IN ago))
                        (, ,)
                        (SBAR
                          (WHADVP-2 (WRB when))

                      (PP-TMP (IN until)
                        (NP (DT a) (JJ few) (NNS years) (IN ago)))

    (ADVP-TMP (RB long) (RB ago))
    */






    (&quot;RB=bad &lt; newsweekly\n&quot; +
    &quot;relabel bad NN\n&quot; +
            '\n') +

    (&quot;RB=bad &lt; stocks\n&quot; +
    &quot;relabel bad NNS\n&quot; +
            '\n') +

    (&quot;NN=bad &lt; PaineWebber\n&quot; +
    &quot;relabel bad NNP\n&quot; +
            '\n') +

    (&quot;NNP=bad &lt; Though\n&quot; +
    &quot;relabel bad IN\n&quot; +
            '\n') +

    // phrase structure stuff / phrasal categories

    // at best/least
    (&quot;@PP &lt; (IN &lt; /^(?i:at)$/ $. RBS=adj)\n&quot; +
    &quot;adjoin (NP RBS@) adj\n&quot; +
            '\n') +

    // Wh-phrases

    // treee in wsj_1447.
    (&quot;@SBAR &lt; (/^WP\\$$/=bad $. (@WHNP=dest &lt; NN))\n&quot; +
    &quot;move bad &gt;1 dest\n&quot; +
            '\n') +

    // tree in wsj_2155
    (&quot;@SBAR=sbar &lt; (/^WP\\$$/=wrong $. (S=ins &lt; NP-SBJ=fix &lt; VP))\n&quot; +
    &quot;move wrong &gt;1 fix\n&quot; +
    &quot;relabel fix WHNP\n&quot; +
    &quot;move fix &gt;1 sbar\n&quot; +
    &quot;insert (NP-SBJ (-NONE- *T*)) &gt;1 ins\n&quot; +
            '\n') +

    // tree in wsj_1457
    (&quot;@SBAR &lt;1 @WHNP &lt;2 @S=loc &lt;3 @VP=bad !&lt;4 __\n&quot; +
    &quot;move bad &gt;-1 loc\n&quot; +
            '\n') +

    (&quot;@WHNP &lt; (@WHADVP=bad &lt; (WRB &lt; /^(?i:how)$/) &lt; (JJ &lt; many|much)) &lt; NN|NNS|NNP|NNPS\n&quot; +
    &quot;relabel bad WHADJP\n&quot; +
            '\n') +

    (&quot;@WHNP &lt; (@NP=bad &lt; /^(?:WP\\$|WDT|WRB)$/ $.. @PP|PRN|NP)\n&quot; +
    &quot;relabel bad WHNP\n&quot; +
            '\n') +

    (&quot;@WHNP &lt; (@WHADVP=bad &lt; (WRB &lt; /^(?i:how)$/)) &lt; (JJ &lt; much)\n&quot; +
    &quot;excise bad bad\n&quot; +
            '\n') +

    (&quot;@WHNP &lt; @NP &lt; (@PP=bad &lt; (@WHNP &lt; WDT|WP))\n&quot; +
    &quot;relabel bad WHPP\n&quot; +
            '\n') +

    // Make a &quot;What&quot; before a noun a WDT (Santorini p.22)
    // Except not when there's a DT, since I'm unsure of the &quot;What a good feeling&quot; case....
    (&quot;@WHNP &lt; (WP=bad $.. NN|NNS !$.. DT)\n&quot; +
    &quot;relabel bad WDT\n&quot; +
            '\n') +

    (&quot;@WHNP &lt; @NP &lt; (@PP=bad &lt; (@NP=badder &lt; WDT))\n&quot; +
    &quot;relabel bad WHPP\n&quot; +
    &quot;relabel badder WHNP\n&quot; +
            '\n') +


    // ordered PP with noun directly in it - fix wrong size NP
    (&quot;@PP &lt;1 (IN|TO $. (@NP=place &lt; ADJP)) &lt;-1 NN|NNS|NNP|NNPS=word\n&quot; +
    &quot;move word &gt;-1 place\n&quot; +
            '\n') +

    // ordered PP with noun directly in it - fix missing NP
    (&quot;@PP=head &lt;1 IN|TO=prep &lt;-1 NN|NNS|NNP|NNPS\n&quot; +
    &quot;adjoinH (PP NP@) head\n&quot; +
    &quot;move prep &gt;1 head\n&quot; +
            '\n') +

    (&quot;@S &lt; (@SBAR &lt; (SBAR &lt; SINV $. (CC $. (SBAR=adj &lt; VBD &lt; S))))\n&quot; +
    &quot;adjoin (SBAR SINV@) adj\n&quot; +
            '\n') +

    (&quot;@SINV &lt; (NP-SBJ=subj $. (@VP=base $.. (@VP=say &lt; (/^VB/ &lt; say|says|said))))\n&quot; +
    &quot;adjoinH (S VP@) base\n&quot; +
    &quot;move subj &gt;1 base\n&quot; +
    &quot;relabel base S-1\n&quot; +
    &quot;insert (S (-NONE- *T*-1)) &gt;-1 say\n&quot; +
            '\n') +

    (&quot;NP-SBJ=bad &lt; NP-TMP !&lt; NP &lt; PP-TMP\n&quot; +
    &quot;excise bad bad\n&quot; +
            '\n') +

    (&quot;@S &lt; NP-SBJ &lt; (NP=bad &lt; (/^NN/ &lt; Tuesday|yesterday|Yesterday))\n&quot; +
    &quot;relabel bad NP-TMP\n&quot; +
            '\n') +

    (&quot;@S=bad &lt; (VBP $. (NP-SBJ $. VP))\n&quot; +
    &quot;relabel bad SINV\n&quot; +
            '\n') +

    // these two rules show why an &quot;insert above&quot; operation would be nice....
    (&quot;@S &lt; (/^NP-SBJ/ $. (VBP|VBZ=aux $. @VP=adj))\n&quot; +
    &quot;adjoinH (VP VP@) adj\n&quot; +
    &quot;move aux &gt;1 adj\n&quot; +
            '\n') +

    (&quot;@S &lt; (/^NP-SBJ/ $. (VBP|VBZ=aux $. @ADJP=adj))\n&quot; +
    &quot;adjoinH (VP ADJP@) adj\n&quot; +
    &quot;move aux &gt;1 adj\n&quot; +
            '\n') +

    (&quot;@PP=adj &lt; (IN=prep $. JJ)\n&quot; +
    &quot;adjoinH (PP NP@) adj\n&quot; +
    &quot;move prep &gt;1 adj\n&quot; +
            '\n') +

    (&quot;@SBARQ &lt;1 @WHADVP &lt;2 VBZ=bad &lt;3 RB=badder &lt;4 @SQ=loc\n&quot; +
    &quot;move badder &gt;1 loc\n&quot; +
    &quot;move bad &gt;1 loc\n&quot; +
            '\n') +

    (&quot;@SBARQ &lt;2 @WHADVP &lt;3 MD=bad &lt;4 @SQ=loc\n&quot; +
    &quot;move bad &gt;1 loc\n&quot; +
            '\n') +

    (&quot;@SBARQ &lt;2 @WHNP &lt;3 VBZ=bad &lt;4 @SQ=loc\n&quot; +
    &quot;move bad &gt;1 loc\n&quot; +
            '\n') +

    // tree in wsj_0755
    (&quot;@VP=adj &lt; (VBN=bad &lt; been) &lt; (JJ &lt; unable) !&lt; CC|CONJP\n&quot; +
    &quot;adjoin (VP (VBN been) ADJP@) adj\n&quot; +
    &quot;delete bad\n&quot; +
            '\n') +

    // fix a bad tree in wsj_1623
    (&quot;@S &lt; (@NP &lt; (NNS=bad &lt; runs)) &lt; (VP=home !&lt; /^VB/ &lt; (IN=badder &lt; up))\n&quot; +
    &quot;relabel bad VBZ\n&quot; +
    &quot;relabel badder RP\n&quot; +
    &quot;move bad &gt;1 home\n&quot; +
    &quot;adjoin (PRT RP@) badder\n&quot; +
            '\n') +

    (&quot;@VP=top &lt; (MD=bottom &lt; will $. /^VB/)\n&quot; +
    &quot;adjoin (VP (MD will) VP@) top\n&quot; +
    &quot;delete bottom\n&quot; +
            '\n') +

    (&quot;@VP &lt; (MD=bad &lt; /^'d$/)\n&quot; +
    &quot;relabel bad VBD\n&quot; +
            '\n') +

    (&quot;@S &lt; (TO=bottom &lt; to $. (@VP=top &lt; /^VB/))\n&quot; +
    &quot;adjoin (VP (TO to) VP@) top\n&quot; +
    &quot;delete bottom\n&quot; +
            '\n') +

    (&quot;@S &lt; /^NP-SBJ/ &lt; (VP &lt; (VBD &lt; &quot; + DO + &quot;) &lt; (@NP=bad &lt; (NN=badder &lt; work)))\n&quot; +
    &quot;relabel bad VP\n&quot; +
    &quot;relabel badder VB\n&quot; +
            '\n') +

    (&quot;@SBARQ !&lt; @SQ !&lt; /^-NONE-$/ !&lt; @SBARQ &lt; (@S|SINV=bad &lt; VBP|VBZ|MD|VBD)\n&quot; +
    &quot;relabel bad SQ\n&quot; +
            '\n') +

    (&quot;@SBARQ &lt; (@SINV=bad &lt; (__ &lt; would))\n&quot; +
    &quot;relabel bad SQ\n&quot; +
            '\n') +

    // NP over NP with nothing else.
    (&quot;@NP=top &lt; @NP=bottom !&lt;2 __\n&quot; +
    &quot;excise bottom bottom\n&quot; +
            '\n') +

    (&quot;NP-SBJ=bad &lt; (RB &lt; Earlier)\n&quot; +
    &quot;relabel bad NP-TMP\n&quot; +
            '\n') +

    (&quot;@NP &lt; (RB=bad &lt; late|early $+ /^NN/)\n&quot; +
    &quot;relabel bad JJ\n&quot; +
            '\n') +

    // clear cases of NN(P) tagged as JJ after an indefinite article; unclear cases are left JJ
    (&quot;@NP &lt;1 (DT &lt; a|an) &lt;2 (JJ=bad &lt; Hungary) !&lt;3 __\n&quot; +
     &quot;relabel bad NNP\n&quot; +
            '\n') +

    // spelling of &quot;deterrant&quot; is how it appears in wrong tree!
    (&quot;@NP &lt;1 (DT &lt; a|an) &lt;2 (JJ=bad &lt; /^(?:official|deterrant|bible|academic|fine|buy-out|perk|installment)$/) !&lt;3 __\n&quot; +
     &quot;relabel bad NN\n&quot; +
            '\n') +

    // most complements of help take an S complement (ECM analysis),
    // but some with null subjects don't, just a VP.  Fix them so they do.
    (&quot;@VP &lt; (/^VB/ &lt; help|helps|helped|helping|start|started|starts|starting|begin|begins|began|beginning) &lt; (@VP=site &lt; VB)\n&quot; +
    &quot;adjoin (S (NP-SBJ (-NONE- *)) VP@) site\n&quot; +
            '\n') +

    // This is in a NX-TTL, but just NNP is wrong on both counts so make NNS
    (&quot;@NP &lt; CD &lt; (NNP &lt; Drugs=bad)\n&quot; +
     &quot;relabel bad NNS\n&quot; +
            '\n') +

    // &quot;well&quot; that should be interjection, but done as (ADVP (RB well))
    (&quot;well|Well|WELL [ , /^[:,]$/ | !, __ ] . /^[:,]$/ &gt; (RB &gt; ADVP)\n&quot; +
    &quot;relabel bad UH\n&quot; +
    &quot;relabel badder INTJ\n&quot; +
    '\n') +

    // last minute; check more carefully

    (
     (&quot;NNP=bad &lt; Securities|Manufacturers|Enterprises|Securities|Resources|Corporations|Sports|Merchants|Industries|Holdings|Brothers|Airlines|Systems|Motors|Industries|Parks|Communications|Facilities|Technologies|Sons|Publications|Products|Nations|Monopolies|Mergers|Machines|INDUSTRIES|Giants|Firearms|Associates|ASSOCIATES\n&quot; +
      &quot;relabel bad NNPS\n&quot; +
             '\n') +

     (&quot;@NP &lt; (NN=bad &lt; chief $++ /^NN/)\n&quot; +
      &quot;relabel bad JJ\n&quot; +
             '\n') +

     (&quot;@NP &lt; (VBG=bad &lt; operating|Operating $++ /^NN/)\n&quot; +
      &quot;relabel bad NN\n&quot; +
             '\n') +

     (&quot;@NP &lt;- (DT=bad &lt; half)\n&quot; +
      &quot;relabel bad NN\n&quot; +
             '\n') +

     (&quot;@ADVP &lt; (RB=bad &lt; easier|harder|earlier)\n&quot; +
      &quot;relabel bad RBR\n&quot; +
             '\n') +

     (&quot;@ADJP &lt; (RB|JJ=bad &lt; easier|harder|earlier)\n&quot; +
      &quot;relabel bad JJR\n&quot; +
             '\n') +

     (&quot;NN=bad &lt; salespeople\n&quot; +
      &quot;relabel bad NNS\n&quot; +
             '\n') +

     (&quot;NN=bad &lt; Chevrolet\n&quot; +
      &quot;relabel bad NNP\n&quot; +
             '\n') +

     (&quot;NNS=bad &lt; Caltrans\n&quot; +
      &quot;relabel bad NNP\n&quot; +
             '\n') +

     (&quot;NNS=bad &lt; Dirks\n&quot; +
      &quot;relabel bad NNP\n&quot; +
             '\n') +

     (&quot;NN=bad &lt; /^U\\.K\\.$/\n&quot; +
      &quot;relabel bad NNP\n&quot; +
             '\n') +

     (&quot;@PP &lt; (JJR=bad &lt; more|less)\n&quot; +
      &quot;relabel bad RBR\n&quot; +
             '\n') +

     (&quot;@PP &lt; (@ADVP &lt; (JJR=bad &lt; more|less))\n&quot; +
      &quot;relabel bad RBR\n&quot; +
             '\n') +

     (&quot;RB=bad &lt; earlier\n&quot; +
      &quot;relabel bad RBR\n&quot; +
             '\n') +

     (&quot;@NP &lt;- (NN &lt; month|year) &lt; (@QP &lt; (RBR=bad &lt; less|more) &lt; (IN &lt; than))\n&quot; +
      &quot;relabel bad JJR\n&quot; +
             '\n') +

     (&quot;@NP &lt; (NNP=bad &lt; Afghan $+ /^NN/)\n&quot; +
      &quot;relabel bad JJ\n&quot; +
             '\n') +

     (&quot;NNS=bad &lt; headquarters\n&quot; +
      &quot;relabel bad NN\n&quot; +
             '\n') +

     (&quot;@NP &lt; (NN=bad &lt; managing)\n&quot; +
      &quot;relabel bad VBG\n&quot; +
             '\n') +

     (&quot;@NP &lt; (NNS=x &lt; East) &lt; (NNS=y &lt; Germans)\n&quot; +
      &quot;relabel x NNPS\n&quot; +
      &quot;relabel y NNPS\n&quot; +
             '\n') +

     (&quot;@NP &lt; DT &lt; (NNS=y &lt; Germans)\n&quot; +
      &quot;relabel y NNPS\n&quot; +
             '\n') +

     (&quot;@NP &lt; (NN=y &lt; /^S&amp;P$/)\n&quot; +
      &quot;relabel y NNP\n&quot; +
             '\n') +

     (&quot;JJ=y &lt; benchmark\n&quot; +
      &quot;relabel y NN\n&quot; +
             '\n') +

     (&quot;JJ=y &lt; Aeroflot\n&quot; +
      &quot;relabel y NNP\n&quot; +
             '\n') +

     (&quot;NNPS=y &lt; ADRs\n&quot; +
      &quot;relabel y NNS\n&quot; +
             '\n') +

     (&quot;NN=y &lt; telecommunications\n&quot; +
      &quot;relabel y NNS\n&quot; +
             '\n') +

     (&quot;@NP &lt; (NN=y &lt; executive $+ (NN|NNS &lt; officer|officers|vice))\n&quot; +
      &quot;relabel y JJ\n&quot; +
             '\n') +

     (&quot;@NP &lt; (CD|NN=y &lt; /^(?:'[0-9]0s|1[1-9][0-9]0s)$/)\n&quot; +
      &quot;relabel y NNS\n&quot; +
             '\n') +

     (&quot;IN|CC|NN|JJ=bad &lt; /^(vs\\.|versus)$/\n&quot; +
      &quot;relabel bad FW\n&quot; +
             '\n') +

     (&quot;NN=bad &lt; /^U\\.S\\.A\\.$/\n&quot; +
      &quot;relabel bad NNP\n&quot; +
             '\n') +

     &quot;&quot;) +

    &quot;&quot;;


    // not yet done
    // 94 NP &lt; (RB &lt; much) -- many are determinatives (JJ?)
    // lots of weird stuff in NP &lt; RB !!

    // Lots of PP &lt; RP that should be consistentized somehow!

    // Don Blaheta
    // Markus Dickinson (does he cite Blaheta??)
    // Ratnaparkhi tagger paper
    // Singer et al. POS tagging paper
    // Huddleston and Pullum analyze 'ago' as IN.  Check Treebank guidelines.

    // turn off markCC in definition of goodFactored.  It just doesn't help.

    // Naiwen Xue et al. for CTB discuss similar style of rules and tgrep error
    // detection and correction phase.

}

// Salomon Brothers: is Brothers NNPS or NNP?
// Securities (146 NNP vs. 160 NNPS).
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.7.8.201612092310</span></div></body></html>